(function(t){function e(e){for(var r,i,l=e[0],s=e[1],c=e[2],p=0,m=[];p<l.length;p++)i=l[p],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],r=!0,l=1;l<a.length;l++){var s=a[l];0!==n[s]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var r={},n={app:0},o=[];function i(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=r,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=s;o.push([1,"chunk-vendors"]),a()})({0:function(t,e){},1:function(t,e,a){t.exports=a("56d7")},2:function(t,e){},3:function(t,e){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("scenic-profit-statistic")],1)},o=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"partner-company"},[a("el-container",[a("el-header",{staticClass:"header"},[a("el-form",{ref:"searchValidateForm",staticClass:"search-validate-form",attrs:{inline:!0,model:t.searchValidateForm,"label-width":"100px",rules:t.searchValidateFormRules}},[a("el-form-item",{attrs:{label:"",prop:"companyId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择公司",clearable:""},on:{change:t.onChangeSearchCompany},model:{value:t.searchValidateForm.companyId,callback:function(e){t.$set(t.searchValidateForm,"companyId",e)},expression:"searchValidateForm.companyId"}},t._l(t.searchCompanyOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.COMPANY_NAME,value:t.COMPANY_ID}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:"spotId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择景区",clearable:""},on:{change:t.onChangeSearchSpot},model:{value:t.searchValidateForm.spotId,callback:function(e){t.$set(t.searchValidateForm,"spotId",e)},expression:"searchValidateForm.spotId"}},t._l(t.searchScenicOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.SPOT_NAME,value:t.SPOT_ID}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:""}},[a("el-date-picker",{attrs:{"unlink-panels":"",type:t.dateType,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.searchStartEndDate,callback:function(e){t.searchStartEndDate=e},expression:"searchStartEndDate"}})],1),a("el-form-item",{attrs:{label:"",prop:"payState"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择状态"},model:{value:t.searchValidateForm.payState,callback:function(e){t.$set(t.searchValidateForm,"payState",e)},expression:"searchValidateForm.payState"}},t._l(t.payStateOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-right"},on:{click:t.onReset}},[t._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.onSearch("searchValidateForm")}}},[t._v("查询数据")]),a("el-button",{attrs:{type:"primary",loading:t.downloadLoading,icon:"el-icon-top-right"},on:{click:t.exportExcel}},[t._v("导出数据")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showTable,expression:"showTable"}]},[a("el-main",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticClass:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","show-summary":"","summary-method":t.getSummaries}},[t._l(t.tableFields,(function(e,r){return[a("el-table-column",{key:r,attrs:{prop:e,label:r,"min-width":"130",fixed:t.activeFixed(e)},scopedSlots:t._u([{key:"default",fn:function(r){return[a("div",[t._v(" "+t._s(t.tableContentValue(r.row,e))+" ")])]}}],null,!0)})]})),a("el-table-column",{attrs:{label:"操作","min-width":"130",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.editRow(e.$index,e.row)}}},[t._v(" 编辑 ")])]}}])})],2),a("el-table",{staticClass:"table",staticStyle:{width:"100%",display:"none"},attrs:{id:"outTable",data:t.exportTableData,border:"","header-cell-style":{background:"#f2f2f2",color:"#606266",height:"38px",padding:"0px"},"cell-style":{height:"38px",padding:"0"},"show-summary":"","summary-method":t.getSummaries}},t._l(t.tableFields,(function(t,e){return a("el-table-column",{key:e,attrs:{prop:t,label:e,"min-width":"130",align:"center"}})})),1)],1),a("el-footer",[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total, sizes, jumper",total:t.total,"current-page":t.currentPage,"page-sizes":[10,20,30,40,50,60,70,80,90],"page-size":t.pageSize},on:{"current-change":t.onCurrentChange,"size-change":t.onSizeChange}})],1)])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showTable,expression:"!showTable"}]},[a("div",{staticClass:"my-echarts"},[a("div",{attrs:{id:"myChart"}})])]),a("el-dialog",{staticClass:"dialog",attrs:{title:"编辑景区分润统计",visible:t.dialogVisible,"before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"validateForm",staticClass:"demo-ruleForm",attrs:{model:t.validateForm,"label-width":"100px",rules:t.validateFormRules}},[a("el-form-item",{attrs:{label:"平台微信支付金额",prop:"wechatPaymentFlow"}},[a("el-input",{attrs:{type:"number",autocomplete:"off",placeholder:"请输入平台微信支付金额"},model:{value:t.validateForm.wechatPaymentFlow,callback:function(e){t.$set(t.validateForm,"wechatPaymentFlow",e)},expression:"validateForm.wechatPaymentFlow"}})],1),a("el-form-item",{attrs:{label:"平台储值支付金额",prop:"storedValuePaymentFlow"}},[a("el-input",{attrs:{type:"number",autocomplete:"off",placeholder:"请输入平台储值支付金额"},model:{value:t.validateForm.storedValuePaymentFlow,callback:function(e){t.$set(t.validateForm,"storedValuePaymentFlow",e)},expression:"validateForm.storedValuePaymentFlow"}})],1),a("el-form-item",{attrs:{label:"平台储值抵扣+微信支付金额",prop:"wechatStoredPaymentFlow"}},[a("el-input",{attrs:{type:"number",autocomplete:"off",placeholder:"请输入平台储值抵扣+微信支付金额"},model:{value:t.validateForm.wechatStoredPaymentFlow,callback:function(e){t.$set(t.validateForm,"wechatStoredPaymentFlow",e)},expression:"validateForm.wechatStoredPaymentFlow"}})],1),a("el-form-item",{attrs:{label:"平台押金抵扣金额",prop:"depositDeductionPaymentFlow"}},[a("el-input",{attrs:{type:"number",autocomplete:"off",placeholder:"请输入平台押金抵扣金额"},model:{value:t.validateForm.depositDeductionPaymentFlow,callback:function(e){t.$set(t.validateForm,"depositDeductionPaymentFlow",e)},expression:"validateForm.depositDeductionPaymentFlow"}})],1),a("el-form-item",{attrs:{label:"平台总订单金额",prop:"totalAmount"}},[a("el-input",{attrs:{type:"number",autocomplete:"off",placeholder:"请输入平台总订单金额"},model:{value:t.validateForm.totalAmount,callback:function(e){t.$set(t.validateForm,"totalAmount",e)},expression:"validateForm.totalAmount"}})],1),a("el-form-item",{attrs:{label:"平台统计分润基数",prop:"platformFenrunBase"}},[a("el-input",{attrs:{type:"number",autocomplete:"off",placeholder:"请输入平台统计分润基数"},model:{value:t.validateForm.platformFenrunBase,callback:function(e){t.$set(t.validateForm,"platformFenrunBase",e)},expression:"validateForm.platformFenrunBase"}})],1),a("el-form-item",{attrs:{label:"平台统计分润(支出)金额",prop:"platformFenrunExpenditure"}},[a("el-input",{attrs:{type:"number",autocomplete:"off",placeholder:"请输入平台统计分润(支出)金额"},model:{value:t.validateForm.platformFenrunExpenditure,callback:function(e){t.$set(t.validateForm,"platformFenrunExpenditure",e)},expression:"validateForm.platformFenrunExpenditure"}})],1),a("el-form-item",{attrs:{label:"平台统计分润(收入)金额",prop:"platformFenrunIncome"}},[a("el-input",{attrs:{type:"number",autocomplete:"off",placeholder:"请输入平台统计分润(收入)金额"},model:{value:t.validateForm.platformFenrunIncome,callback:function(e){t.$set(t.validateForm,"platformFenrunIncome",e)},expression:"validateForm.platformFenrunIncome"}})],1),a("el-form-item",{attrs:{label:"平台统计配件维修金额",prop:"platformStatisticsPartsMaintenance"}},[a("el-input",{attrs:{type:"number",autocomplete:"off",placeholder:"请输入平台统计配件维修金额"},model:{value:t.validateForm.platformStatisticsPartsMaintenance,callback:function(e){t.$set(t.validateForm,"platformStatisticsPartsMaintenance",e)},expression:"validateForm.platformStatisticsPartsMaintenance"}})],1),a("el-form-item",{attrs:{label:"平台统计结算(支出)金额",prop:"platformStatisticsSettlementExpenditure"}},[a("el-input",{attrs:{type:"number",autocomplete:"off",placeholder:"请输入平台统计结算(支出)金额"},model:{value:t.validateForm.platformStatisticsSettlementExpenditure,callback:function(e){t.$set(t.validateForm,"platformStatisticsSettlementExpenditure",e)},expression:"\n              validateForm.platformStatisticsSettlementExpenditure\n            "}})],1),a("el-form-item",{attrs:{label:"平台统计结算(收入)金额",prop:"platformStatisticsSettlementIncome"}},[a("el-input",{attrs:{type:"number",autocomplete:"off",placeholder:"请输入平台统计结算(收入)金额"},model:{value:t.validateForm.platformStatisticsSettlementIncome,callback:function(e){t.$set(t.validateForm,"platformStatisticsSettlementIncome",e)},expression:"validateForm.platformStatisticsSettlementIncome"}})],1),a("el-form-item",{attrs:{label:"对账备注",prop:"reconciliationRemarks"}},[a("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入对账备注"},model:{value:t.validateForm.reconciliationRemarks,callback:function(e){t.$set(t.validateForm,"reconciliationRemarks",e)},expression:"validateForm.reconciliationRemarks"}})],1)],1),a("div",{staticClass:"submit"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("validateForm")}}},[t._v("提交")]),a("el-button",{on:{click:t.dialogClose}},[t._v("取消")])],1)],1)],1)],1)},l=[],s=a("1da1"),c=a("5530");a("96cf"),a("a9e3"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("159b"),a("b680"),a("21a6"),a("1146"),a("25f0"),a("4d90");function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",a=t.getFullYear().toString(),r=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0"),o="";return"1"==e?o=a+"-"+r:"2"==e?o=a+"-"+r+"-"+n:"3"==e&&(o=a),o}var p={name:"ScenicProfitStatistic",data:function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(e,a,r){if(!a)return r(new Error(t+"不能为空"));r()}}return{tableLoading:!1,showTable:!0,feeInput:"",taxInput:"",searchFeeInput:"",searchTaxInput:"",tableFields:{"合作主体":"subjectName","合作公司":"companyName","收款单位":"payee","景区名称":"scenicSpotName","月份":"profitSharingMonth","平台微信支付金额/元":"wechatPaymentFlow","平台储值支付金额/元":"storedValuePaymentFlow","平台储值抵扣+微信支付金额/元":"wechatStoredPaymentFlow","平台押金抵扣金额/元":"depositDeductionPaymentFlow","平台总订单金额/元":"totalAmount","平台统计分润基数/元":"platformFenrunBase","平台统计分润(支出)金额/元":"platformFenrunExpenditure","平台统计分润(收入)金额/元":"platformFenrunIncome","平台统计配件维修金额/元":"platformStatisticsPartsMaintenance","平台统计结算(支出)金额/元":"platformStatisticsSettlementExpenditure","平台统计结算(收入)金额/元":"platformStatisticsSettlementIncome","收支类型":"type","手续费费率":"charge","分润比例":"proportion","税点":"taxPoint","对账备注":"reconciliationRemarks","实际分润基数金额/元":"actualFenrunBase","实际扣税后分润(支出)金额/元":"actualTaxFenrunExpenditure","实际扣税后分润(收入)金额/元":"actualTaxFenrunIncome","分润金额结算状态":"fenrunSettlemenType","景区承担的配件维修金额/元":"spotPartsMaintenance","配件维修费结算状态":"spotSettlemenType","实际结算(支出)金额/元":"actualSettlemenExpenditure","实际结算(收入)金额/元":"actualSettlemenIncome","分润备注":"fenrunRemarks"},tableData:[],totalData:{},searchCompanyOptions:[],searchScenicOptions:[],companyOptions:[],scenicOptions:[],dateStateOptions:[{value:"1",label:"按月查询"},{value:"2",label:"按日查询"},{value:"3",label:"按年查询"}],payStateOptions:[{value:"1",label:"已核实"},{value:"2",label:"已付款"},{value:"3",label:"已收款"}],exportTableData:[],downloadLoading:!1,total:0,currentPage:1,pageSize:10,dialogVisible:!1,dialogState:"",selectDateState:"1",dateType:"monthrange",searchValidateForm:{partnerCompanyName:"",scenicName:"",startEndDate:"",payState:""},validateForm:{},searchPartnerCompanyName:"",searchScenicName:"",searchSelectDateState:"1",searchStartEndDate:[new Date,new Date],searchPayState:"",companys:[],companyState:"",scenics:[],scenicState:"",searchValidateFormRules:{},validateFormRules:{subjectName:[{validator:t("合作主体"),required:!0,trigger:["blur","change"]}]}}},created:function(){this.getSearchValidateForm(),this.getValidateForm(),this.initTableData(),this.getCompanyList(),this.getScenicList()},mounted:function(){this.drawEcharts()},methods:{getSearchValidateForm:function(){var t={};for(var e in this.tableFields)t[this.tableFields[e]]=null;this.searchValidateForm=Object(c["a"])(Object(c["a"])({},t),{},{companyId:null,spotId:null})},getValidateForm:function(){var t={};for(var e in this.tableFields)t[this.tableFields[e]]=null;this.validateForm=Object(c["a"])(Object(c["a"])({},t),{},{companyId:null,spotId:null}),console.log(this.validateForm)},login:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("/loginSystem?username=lijiazhao&password=lijiazhao");case 2:a=e.sent,a.data;case 4:case"end":return e.stop()}}),e)})))()},getCompanyList:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t||(t=null),a.next=3,e.$http.get("/system/subscriptionInformation/companyList",{params:{spotId:t}});case 3:if(r=a.sent,n=r.data,"200"!=n.state){a.next=10;break}return e.searchCompanyOptions=n.data,a.abrupt("return",n);case 10:return a.abrupt("return");case 11:case"end":return a.stop()}}),a)})))()},getFormCompanyList:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t||(t=null),a.next=3,e.$http.get("/system/subscriptionInformation/companyList",{params:{spotId:t}});case 3:if(r=a.sent,n=r.data,"200"!=n.state){a.next=10;break}return e.companyOptions=n.data,a.abrupt("return",n);case 10:return a.abrupt("return");case 11:case"end":return a.stop()}}),a)})))()},getFormScenicList:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t||(t=null),a.next=3,e.$http.get("/system/subscriptionInformation/spotList",{params:{companyId:t}});case 3:if(r=a.sent,n=r.data,"200"!=n.state){a.next=10;break}return e.scenicOptions=n.data,a.abrupt("return",n);case 10:return a.abrupt("return");case 11:case"end":return a.stop()}}),a)})))()},getScenicList:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t||(t=null),a.next=3,e.$http.get("/system/subscriptionInformation/spotList",{params:{companyId:t}});case 3:if(r=a.sent,n=r.data,"200"!=n.state){a.next=10;break}return e.searchScenicOptions=n.data,a.abrupt("return",n);case 10:return a.abrupt("return");case 11:case"end":return a.stop()}}),a)})))()},initTableData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tableLoading=!0,a=null,r=null,t.searchStartEndDate&&0!==t.searchStartEndDate.length&&(a=u(t.searchStartEndDate[0],t.selectDateState),r=u(t.searchStartEndDate[1],t.selectDateState)),e.next=6,t.$http.get("/system/spotProfitSharingStatistics/spotProfitSharingStatisticeList",{params:Object(c["a"])(Object(c["a"])({},t.searchValidateForm),{},{startDate:a,endDate:r,pageNum:t.currentPage,pageSize:t.pageSize})});case 6:if(n=e.sent,o=n.data,200==o.code){e.next=11;break}return t.$message({type:"error",message:"请求失败！"}),e.abrupt("return");case 11:t.totalData=o.data&&o.data[0]||{},t.tableData=o.list,t.total=o.totals,t.tableLoading=!1;case 15:case"end":return e.stop()}}),e)})))()},editTableData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("/system/spotProfitSharingStatistics/editSpotProfitSharingStatistice",t.validateForm);case 2:a=e.sent,r=a.data,"200"==r.state?(t.$message({message:r.msg,type:"success",offset:100,center:!0,duration:1e3}),t.initTableData()):t.$message({message:r.msg,type:"error",offset:100,center:!0,duration:3e3});case 5:case"end":return e.stop()}}),e)})))()},getExportTableData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r,n,o,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.downloadLoading=!0,a=null,r=null,t.searchStartEndDate&&0!==t.searchStartEndDate.length&&(a=u(t.searchStartEndDate[0],t.selectDateState),r=u(t.searchStartEndDate[1],t.selectDateState)),e.next=6,t.$http.get("/system/spotProfitSharingStatistics/downloadExcel",{params:Object(c["a"])(Object(c["a"])({},t.searchValidateForm),{},{startDate:a,endDate:r}),responseType:"arraybuffer"});case 6:n=e.sent,o=n.data,i=window.URL.createObjectURL(new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),l=document.createElement("a"),console.log(i),l.href=i,l.download="景区分润统计",l.click(),t.downloadLoading=!1;case 15:case"end":return e.stop()}}),e)})))()},getSpotGrossProfitMarginChartList:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=null,r=null,t.searchStartEndDate&&0!==t.searchStartEndDate.length&&(a=u(t.searchStartEndDate[0],t.selectDateState),r=u(t.searchStartEndDate[1],t.selectDateState)),t.myChart.showLoading({text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.2)",zlevel:0}),e.next=6,t.$http.get("/system/spotProfitSharingStatistics/spotProfitSharingStatisticeChart",{params:Object(c["a"])(Object(c["a"])({},t.searchValidateForm),{},{startDate:a,endDate:r})});case 6:n=e.sent,o=n.data,console.log(o),t.myChart.hideLoading(),i=o.data||{},t.option.xAxis.data=i.spotNameList,t.option.series[0].data=i.grossProfitList,t.option.series[1].data=i.grossProfitMargin,t.option.series[2].data=i.robotGrossProfit,t.myChart.setOption(t.option);case 16:case"end":return e.stop()}}),e)})))()},drawEcharts:function(){var t=this;this.myChart=this.$echarts.init(document.getElementById("myChart")),this.option={backgroundColor:"#fff",tooltip:{trigger:"axis",textStyle:{align:"left"},axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["毛利","毛利率","台均毛利"],top:0},dataZoom:[{type:"inside",start:0,end:10},{type:"slider"}],xAxis:{type:"category",data:[],axisPointer:{type:"shadow"}},yAxis:[{name:"毛利",type:"value",axisLabel:{formatter:"{value} 元"}},{name:"毛利率",type:"value",axisLabel:{formatter:"{value} %"}}],series:[{name:"毛利",type:"bar",data:[],tooltip:{valueFormatter:function(t){return t+" 元"}}},{name:"毛利率",type:"line",yAxisIndex:1,data:[],tooltip:{valueFormatter:function(t){return t+" %"}}},{name:"台均毛利",type:"bar",data:[],tooltip:{valueFormatter:function(t){return t+" 元"}}}]},this.myChart.setOption(this.option),window.addEventListener("resize",(function(){t.myChart.resize()}))},onChangeSearchCompany:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getScenicList(t);case 2:if(r=a.sent,console.log(r),n=r.data,e.searchScenicOptions=n,0!=n.length){a.next=9;break}return e.searchValidateForm.spotId="",a.abrupt("return");case 9:o=!1,n.forEach((function(t){t.SPOT_ID!=e.searchValidateForm.spotId||(o=!0)})),t&&!o&&(e.searchValidateForm.spotId=n[0].SPOT_ID);case 12:case"end":return a.stop()}}),a)})))()},onChangeSearchSpot:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getCompanyList(t);case 2:if(r=a.sent,n=r.data,e.searchCompanyOptions=n,0!=n.length){a.next=8;break}return e.searchValidateForm.companyId="",a.abrupt("return");case 8:o=!1,n.forEach((function(t){t.COMPANY_ID!=e.searchValidateForm.companyId||(o=!0)})),t&&!o&&(e.searchValidateForm.companyId=n[0].COMPANY_ID);case 11:case"end":return a.stop()}}),a)})))()},onDateChange:function(){console.log(this.selectDateState),"1"==this.selectDateState?this.dateType="monthrange":"2"==this.selectDateState?this.dateType="daterange":"3"==this.selectDateState&&(this.dateType="yearrange")},onReset:function(){this.getSearchValidateForm(),this.currentPage=1,this.searchStartEndDate=[new Date,new Date],this.selectDateState="1",this.dateType="monthrange",this.initTableData(),this.getCompanyList(),this.getScenicList()},onStatGrossProfit:function(){this.showTable=!1,this.getSpotGrossProfitMarginChartList()},onExportReport:function(){var t=this;this.$nextTick((function(){var e=document.getElementById("exportReport");e.href=t.myChart.getDataURL()}))},onExportReportLine:function(){var t=this;this.$nextTick((function(){var e=document.getElementById("exportReportLine");e.href=t.myLineChart.getDataURL(),console.log(e)}))},onSearch:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.showTable=!0,e.initTableData()}))},exportExcel:function(){var t=this;this.$confirm("确认导出Excel表格?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.getExportTableData()})).catch((function(){t.$message({type:"info",message:"已取消导出Excel表格",offset:100,center:!0,duration:1e3})}))},onAdd:function(){this.dialogVisible=!0,this.dialogState="add"},editRow:function(t,e){console.log(t,e),this.dialogVisible=!0;var a=Object.assign({},e);a.totalAmount=parseInt(a.totalAmount),a.charge=parseInt(a.charge),a.dividableAmount=parseInt(a.dividableAmount),a.profitSharingRatio=parseInt(a.profitSharingRatio),a.profitSharingAmount=parseInt(a.profitSharingAmount),a.taxPoint=parseInt(a.taxPoint),a.taxDeStreamProfitSharingExpenditureAmount=parseInt(a.taxDeStreamProfitSharingExpenditureAmount),a.robotNumber=parseInt(a.robotNumber),a.accessoryRepairAmount=parseInt(a.accessoryRepairAmount),a.payment=parseInt(a.payment),this.validateForm=a,this.dialogState="edit"},dialogClose:function(){this.dialogVisible=!1,this.$refs.validateForm.resetFields(),this.getValidateForm()},handleClose:function(t){t(),this.$refs.validateForm.resetFields(),this.getValidateForm()},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;console.log(e.validateForm),"add"==e.dialogState?console.log("新增公司信息"):"edit"==e.dialogState&&(console.log("编辑公司信息"),e.editTableData()),e.dialogVisible=!1,e.$refs.validateForm.resetFields()}))},getSummaries:function(t){var e=this,a=t.columns,r=(t.data,[]);return a.forEach((function(t,a){0===a&&(r[a]="合计");var n=e.totalData||{};"wechatPaymentFlow"==t.property&&(r[a]=n.wechatPaymentFlowTotal&&Number(n.wechatPaymentFlowTotal).toFixed(2)||"0.00元"),"storedValuePaymentFlow"==t.property&&(r[a]=n.storedValuePaymentFlowTotal&&Number(n.storedValuePaymentFlowTotal).toFixed(2)||"0.00元"),"wechatStoredPaymentFlow"==t.property&&(r[a]=n.wechatStoredPaymentFlowTotal&&Number(n.wechatStoredPaymentFlowTotal).toFixed(2)||"0.00元"),"depositDeductionPaymentFlow"==t.property&&(r[a]=n.depositDeductionPaymentFlowTotal&&Number(n.depositDeductionPaymentFlowTotal).toFixed(2)||"0.00元"),"totalAmount"==t.property&&(r[a]=n.totalAmountTotal&&Number(n.totalAmountTotal).toFixed(2)||"0.00元"),"platformFenrunBase"==t.property&&(r[a]=n.platformFenrunBaseTotal&&Number(n.platformFenrunBaseTotal).toFixed(2)||"0.00元"),"platformFenrunExpenditure"==t.property&&(r[a]=n.platformFenrunExpenditureTotal||"0元"),"platformFenrunIncome"==t.property&&(r[a]=n.platformFenrunIncomeTotal&&Number(n.platformFenrunIncomeTotal).toFixed(2)||"0.00元"),"platformStatisticsPartsMaintenance"==t.property&&(r[a]=n.platformStatisticsPartsMaintenanceTotal&&Number(n.platformStatisticsPartsMaintenanceTotal).toFixed(2)||"0.00元"),"platformStatisticsSettlementExpenditure"==t.property&&(r[a]=n.platformStatisticsSettlementExpenditureTotal&&Number(n.platformStatisticsSettlementExpenditureTotal).toFixed(2)||"0.00元"),"platformStatisticsSettlementIncome"==t.property&&(r[a]=n.platformStatisticsSettlementIncomeTotal&&Number(n.platformStatisticsSettlementIncomeTotal).toFixed(2)||"0.00元"),"actualFenrunBase"==t.property&&(r[a]=n.actualFenrunBaseTotal&&Number(n.actualFenrunBaseTotal).toFixed(2)||"0.00元"),"actualTaxFenrunExpenditure"==t.property&&(r[a]=n.actualTaxFenrunExpenditureTotal&&Number(n.actualTaxFenrunExpenditureTotal).toFixed(2)||"0.00元"),"actualTaxFenrunIncome"==t.property&&(r[a]=n.actualTaxFenrunIncomeTotal&&Number(n.actualTaxFenrunIncomeTotal).toFixed(2)||"0.00元"),"spotPartsMaintenance"==t.property&&(r[a]=n.spotPartsMaintenanceTotal&&Number(n.spotPartsMaintenanceTotal).toFixed(2)||"0.00元"),"actualSettlemenExpenditure"==t.property&&(r[a]=n.actualSettlemenExpenditureTotal&&Number(n.actualSettlemenExpenditureTotal).toFixed(2)||"0.00元"),"actualSettlemenIncome"==t.property&&(r[a]=n.actualSettlemenIncome&&Number(n.actualSettlemenIncome).toFixed(2)||"0.00元")})),r},onCurrentChange:function(t){this.currentPage=t,this.initTableData()},onSizeChange:function(t){this.pageSize=t,this.initTableData()}},components:{},computed:{activeFixed:function(){return function(t){if("subjectName"==t||"companyName"==t||"payee"==t||"scenicSpotName"==t||"profitSharingMonth"==t)return"left"}},tableContentValue:function(){return function(t,e){var a="";return a="type"==e?"1"==t[e]?"收入":"2"==t[e]?"支出":"无":"fenrunSettlemenType"==e||"spotSettlemenType"==e?"1"==t[e]?"待核实":"2"==t[e]?"已核实":"3"==t[e]?"已付款/已收款":"无":"wechatPaymentFlow"==e||"storedValuePaymentFlow"==e||"wechatStoredPaymentFlow"==e||"depositDeductionPaymentFlow"==e||"totalAmount"==e||"platformFenrunBase"==e||"platformFenrunExpenditure"==e||"platformFenrunIncome"==e||"platformStatisticsPartsMaintenance"==e||"platformStatisticsSettlementExpenditure"==e||"platformStatisticsSettlementIncome"==e||"proportion"==e||"taxPoint"==e||"actualFenrunBase"==e||"actualTaxFenrunExpenditure"==e||"actualTaxFenrunIncome"==e||"spotPartsMaintenance"==e||"actualSettlemenExpenditure"==e||"actualSettlemenIncome"==e?t[e]&&Number(t[e]).toFixed(2)||"0.00":"charge"==e?t[e]&&(100*t[e]).toFixed(2)+"%":t[e]||"无",a}}}},m=p,d=(a("ef1f"),a("2877")),f=Object(d["a"])(m,i,l,!1,null,"9a7f31ba",null),h=f.exports,b={name:"App",components:{ScenicProfitStatistic:h}},g=b,y=(a("5c0b"),Object(d["a"])(g,n,o,!1,null,null,null)),S=y.exports,v=a("2f62");r["default"].use(v["a"]);var F=new v["a"].Store({state:{},mutations:{},actions:{},modules:{}}),x=(a("9e1f"),a("450d"),a("6ed5")),w=a.n(x),P=(a("0fb7"),a("f529")),T=a.n(P),D=(a("be4f"),a("896a")),I=a.n(D),E=(a("826b"),a("c263")),k=a.n(E),O=(a("3db2"),a("58b8")),C=a.n(O),V=(a("eca7"),a("3787")),R=a.n(V),$=(a("425f"),a("4105")),N=a.n($),j=(a("a7cc"),a("df33")),L=a.n(j),_=(a("672e"),a("101e")),A=a.n(_),M=(a("5466"),a("ecdf")),B=a.n(M),z=(a("38a0"),a("ad41")),Y=a.n(z),G=(a("10cb"),a("f3ad")),U=a.n(G),J=(a("bdc7"),a("aa2f")),q=a.n(J),Z=(a("de31"),a("c69e")),H=a.n(Z),K=(a("a673"),a("7b31")),Q=a.n(K),W=(a("adec"),a("3d2d")),X=a.n(W),tt=(a("6611"),a("e772")),et=a.n(tt),at=(a("1f1a"),a("4e4b")),rt=a.n(at),nt=(a("1951"),a("eedf")),ot=a.n(nt);r["default"].use(ot.a),r["default"].use(rt.a),r["default"].use(et.a),r["default"].use(X.a),r["default"].use(Q.a),r["default"].use(H.a),r["default"].use(q.a),r["default"].use(U.a),r["default"].use(Y.a),r["default"].use(B.a),r["default"].use(A.a),r["default"].use(L.a),r["default"].use(N.a),r["default"].use(R.a),r["default"].use(C.a),r["default"].use(k.a),r["default"].use(I.a),r["default"].prototype.$message=T.a,r["default"].prototype.$confirm=w.a.confirm;var it=a("bc3a"),lt=a.n(it),st=a("313e");lt.a.defaults.withCredentials=!0,r["default"].prototype.$http=lt.a,r["default"].config.productionTip=!1,r["default"].prototype.$echarts=st,new r["default"]({store:F,render:function(t){return t(S)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";a("9c0c")},"9b5b":function(t,e,a){},"9c0c":function(t,e,a){},ef1f:function(t,e,a){"use strict";a("9b5b")}});
//# sourceMappingURL=app.1e3083cc.js.map