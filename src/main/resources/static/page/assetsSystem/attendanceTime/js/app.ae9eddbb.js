(function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],d=0,m=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&m.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={app:0},i=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([1,"chunk-vendors"]),a()})({0:function(e,t){},1:function(e,t,a){e.exports=a("56d7")},2:function(e,t){},3:function(e,t){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("attendance-time")],1)},i=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"partner-company"},[a("el-container",[a("el-header",{staticClass:"header"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.onAdd}},[e._v("添加")])],1),a("el-main",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-cell-style":{background:"#f2f2f2",color:"#606266",height:"38px",padding:"0px"},"cell-style":{height:"38px",padding:"0"},"default-sort":{prop:"grossProfit",order:"descending"}},on:{"sort-change":e.onSortChange}},[e._l(e.tableFields,(function(t,n){return a("el-table-column",{key:n,attrs:{prop:t,label:n,align:"center","min-width":"130",sortable:e.tableSortable(t)},scopedSlots:e._u([{key:"default",fn:function(n){return[a("div",{domProps:{innerHTML:e._s(e.tableContentValue(n.row,t))}})]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.editAtt(t.$index,t.row)}}},[e._v(" 编辑 ")]),a("el-button",{attrs:{type:0==t.row.status?"danger":"primary",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.stateAtt(t.$index,t.row)}}},[e._v(" "+e._s(0==t.row.status?"禁用":"启用")+" ")]),a("el-button",{attrs:{type:"info",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.delAtt(t.$index,t.row)}}},[e._v(" 删除 ")])]}}])})],2),a("el-table",{staticClass:"table",staticStyle:{width:"100%",display:"none"},attrs:{id:"outTable",data:e.exportTableData,border:""}},e._l(e.tableFields,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e,label:t,"min-width":"130",align:"center"}})})),1)],1),a("el-footer",[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total, sizes, jumper",total:e.total,"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize},on:{"current-change":e.onCurrentChange,"size-change":e.onSizeChange}})],1)]),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.centerDialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"validateForm",staticClass:"demo-ruleForm",attrs:{model:e.validateForm,"label-width":"100px",rules:e.validateFormRules}},[a("el-form-item",{attrs:{label:"开始时间",prop:"startTimeRules"}},[a("el-time-select",{staticClass:"time-select_startTime",attrs:{placeholder:"请输入开始时间","picker-options":{start:"08:00",step:"00:10",end:"20:00"}},on:{change:e.handStartTime},model:{value:e.validateForm.startTimeRules,callback:function(t){e.$set(e.validateForm,"startTimeRules",t)},expression:"validateForm.startTimeRules"}})],1),a("el-form-item",{attrs:{label:"结束时间",prop:"endTimeRules"}},[a("el-time-select",{staticClass:"time-select_endTime",attrs:{placeholder:"请输入结束时间","picker-options":{start:"08:00",step:"00:10",end:"20:00",minTime:e.validateForm.startTimeRules}},on:{change:e.handEndTime},model:{value:e.validateForm.endTimeRules,callback:function(t){e.$set(e.validateForm,"endTimeRules",t)},expression:"validateForm.endTimeRules"}})],1),e.creator?a("el-form-item",{attrs:{label:"创建人:",prop:"creatorName"}},[a("el-input",{staticStyle:{width:"220px","margin-left":"50px"},attrs:{placeholder:"请输入创建人"},model:{value:e.validateForm.creatorName,callback:function(t){e.$set(e.validateForm,"creatorName",t)},expression:"validateForm.creatorName"}})],1):e._e()],1),a("div",{staticClass:"submit"},[a("el-button",{on:{click:function(t){return e.cancelForm()}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("validateForm")}}},[e._v("提交")])],1)],1)],1)],1)},o=[],l=a("1da1"),c=a("5530");a("96cf"),a("a9e3"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("159b"),a("21a6"),a("1146"),a("25f0"),a("4d90");function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"3",a=e.getFullYear().toString(),n=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0"),i=(e.getHours().toString().padStart(2,"0"),e.getMinutes().toString().padStart(2,"0"),e.getSeconds().toString().padStart(2,"0"),"");return"3"==t?i=a+"-"+n+"-"+r:"2"==t?i=a+"-"+n:"1"==t&&(i=a),i}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",a=e.getHours().toString(),n=e.getMinutes().toString().padStart(2,"0"),r=(e.getSeconds().toString().padStart(2,"0"),"");return"0"==t&&(r=a+":"+n),r}var m={name:"AttendanceTime",data:function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,a,n){if(!a)return n(new Error(e+"不能为空"));n()}}return{showTable:!0,tableFields:{"考勤时间":"updateDate","状态":"status","创建时间":"createDate","创建人":"creatorName"},tableData:[],tableLoading:!1,searchCompanyOptions:[],clockItem:[],companyOptions:[],exportTableData:[],downloadLoading:!1,startTimeRules:"",endTimeRules:"",currentPage:1,pageSize:10,total:0,dates:"",dialogTitle:"",ountAttendancec:"",tatisticalAttendances:"",dialogVisible:!1,creator:!0,dialogState:"",dialogItem:!0,centerDialogVisible:!1,dateType:"daterange",ItemType:"datetime",searchValidateForm:{},validateForm:{},validateFormTime:{},searchStartEndDate:"",searchStartEndItem:"",selectDateState:"3",selectTimeState:"0",myPieChart:null,pieOption:{},robotId:"",statisticDialogVisible:!1,searchValidateFormRules:{},tableSort:"1,desc",validateFormRules:{startTimeRules:[{validator:e("开始时间"),required:!0,trigger:["blur","change"]}],endTimeRules:[{validator:e("结束时间"),required:!0,trigger:["blur","change"]}],creatorName:[{validator:e("创建人"),required:!0,trigger:["blur","change"]}]}}},created:function(){this.getSearchValidateForm(),this.getCompanyList(),this.initTableData()},beforeMount:function(){},mounted:function(){},methods:{getSearchValidateForm:function(){var e={};for(var t in this.tableFields)e[this.tableFields[t]]="";this.searchValidateForm=Object(c["a"])({},e)},getValidateForm:function(){var e={};for(var t in this.tableFields)e[this.tableFields[t]]="";this.validateForm=e},getCompanyList:function(e){return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},initTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,null,null,null,null,console.log(e.searchStartEndDate),0!==e.searchStartEndDate.length&&(u(e.searchStartEndDate[0],e.selectDateState),u(e.searchStartEndDate[1],e.selectDateState)),0!==e.searchStartEndItem.length&&(d(e.searchStartEndItem[0],e.selectTimeState),d(e.searchStartEndItem[1],e.selectTimeState)),console.log(),t.next=11,e.$http.get("/sys/AttendanceRecord/selectAttendanceTime",{params:Object(c["a"])(Object(c["a"])({},e.searchValidateForm),{},{pageNum:e.currentPage,pageSize:e.pageSize})});case 11:if(a=t.sent,n=a.data,console.log(n),200==n.state){t.next=17;break}return e.$message({type:"error",message:"请求失败！"}),t.abrupt("return");case 17:console.log(n),e.tableData=n.data,e.total=n.total,e.tableLoading=!1;case 21:case"end":return t.stop()}}),t)})))()},stateAtt:function(e,t){var a=this;console.log(t.id),this.$confirm("是否改变状态?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if("1"==t.status){a.searchValidateForm.status=0;var e=a.searchValidateForm,n=t.id,r="id";e[r]=n,console.log(e),a.stateTableData(e)}else if("0"==t.status){a.searchValidateForm.status=1;e=a.searchValidateForm,n=t.id,r="id";e[r]=n,console.log(e),a.stateTableData(e)}console.log("状态已更改")})).catch((function(){console.log("已取消更改状态")}))},onAdd:function(){this.creator=!0,this.centerDialogVisible=!0,this.dialogState="add",this.dialogTitle="添加考勤管理时间"},cancelForm:function(){this.centerDialogVisible=!1,this.creator=!1,this.getValidateForm()},editAtt:function(e,t){console.log(t),this.creator=!1;var a=Object.assign({},t);this.validateFormTime=a,this.centerDialogVisible=!0,this.dialogState="edit",this.dialogTitle="编辑考勤管理时间"},handleClose:function(e){e(),this.$refs.validateForm.resetFields(),this.getValidateForm()},submitForm:function(){"add"==this.dialogState?(console.log("新增考勤管理时间"),this.addTableData()):"edit"==this.dialogState&&(console.log("修改考勤管理时间"),this.editTableData()),this.centerDialogVisible=!1,this.dialogVisible=!1,this.$refs.validateForm.resetFields(),this.getValidateForm()},addTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.validateForm),a={startDate:e.validateForm.startTimeRules,endDate:e.validateForm.endTimeRules,creatorName:e.validateForm.creatorName},t.next=4,e.$http.post("/sys/AttendanceRecord/addAttendanceTime",e.$qs.stringify(a));case 4:n=t.sent,r=n.data,console.log(r),"200"==r.state?(e.$message({message:r.msg,type:"success",offset:100,center:!0,duration:1e3}),e.creatorName="",e.startDate="",e.endDate="",e.initTableData()):e.$message({message:r.msg,type:"error",offset:100,center:!0,duration:3e3});case 8:case"end":return t.stop()}}),t)})))()},editTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={startDate:e.validateForm.startTimeRules,endDate:e.validateForm.endTimeRules,creatorName:e.validateFormTime.creatorName,id:e.validateFormTime.id,status:e.validateFormTime.status},t.next=3,e.$http.post("/sys/AttendanceRecord/upAttendanceTime",e.$qs.stringify(a));case 3:n=t.sent,r=n.data,console.log(r),"200"==r.state?(e.$message({message:r.msg,type:"success",offset:100,center:!0,duration:1e3}),e.initTableData()):e.$message({message:r.msg,type:"error",offset:100,center:!0,duration:3e3});case 7:case"end":return t.stop()}}),t)})))()},stateTableData:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.post("/sys/AttendanceRecord/upAttendanceTime",t.$qs.stringify(e));case 2:n=a.sent,r=n.data,console.log(r),"200"==r.state?(t.$message({type:"success",message:"状态已更改!"}),t.initTableData()):t.$message({type:"info",message:"更改状态失败"});case 6:case"end":return a.stop()}}),a)})))()},delAtt:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log(e,t),a.$confirm("此操作将删除该行数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.$http.get("/sys/AttendanceRecord/deAttendanceTime",{params:{id:t.id}});case 2:n=e.sent,r=n.data,console.log(r),"200"==r.state?(a.$message({type:"success",message:r.msg,offset:100,center:!0,duration:1e3}),a.initTableData()):a.$message({type:"error",message:r.msg,offset:100,center:!0,duration:3e3});case 6:case"end":return e.stop()}}),e)})))).catch((function(){a.$message({type:"info",message:"已取消删除",offset:100,center:!0,duration:1e3})}));case 2:case"end":return n.stop()}}),n)})))()},getExportTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=null,n=null,0!==e.searchStartEndDate.length&&(a=formatDate(e.searchStartEndDate[0],e.selectDateState),n=formatDate(e.searchStartEndDate[1],e.selectDateState)),t.next=5,e.$http.post("/sys/AttendanceRecord/exportEmployeeAttendance",Object(c["a"])(Object(c["a"])({},e.searchValidateForm),{},{startDate:a,endDate:n}),{responseType:"arraybuffer"});case 5:r=t.sent,i=r.data,s=window.URL.createObjectURL(new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),o=document.createElement("a"),console.log(s),console.log(o),o.href=s,o.download="员工考勤",o.click(),e.downloadLoading=!1;case 15:case"end":return t.stop()}}),t)})))()},onChangeSearchSpot:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.getCompanyList(e);case 2:if(n=a.sent,r=n.data,0!=r.length){a.next=7;break}return t.searchValidateForm.ascriptionCompanyId="",a.abrupt("return");case 7:i=!1,r.forEach((function(e){e.COMPANY_ID!=t.searchValidateForm.ascriptionCompanyId||(i=!0)})),e&&!i&&(t.searchValidateForm.ascriptionCompanyId=r[0].COMPANY_ID);case 10:case"end":return a.stop()}}),a)})))()},onReset:function(){this.getSearchValidateForm(),this.currentPage=1,this.selectDateState="3",this.dateType="daterange",this.searchStartEndDate="",this.searchStartEndItem="",this.initTableData()},handStartTime:function(e){null!=e&&(this.startTime=e)},handEndTime:function(e){if(null!=e){console.log(this.startTime);var t=this.startTime,a=this.endTime,n={index:this.index++,startTime:t,endTime:a};console.log(n),""!=n.startTime&&null!=n.startTime&&this.clockItem.push(n)}},onCurrentChange:function(e){this.currentPage=e,this.initTableData()},onSizeChange:function(e){this.pageSize=e,this.initTableData()},onSortChange:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t,a,n),"grossProfit"==a?this.tableSort="descending"==n?"1,desc":"ascending"==n?"1,asc":"":"runningAmount"==a?this.tableSort="descending"==n?"2,desc":"ascending"==n?"2,asc":"":"comprehensiveCost"==a?this.tableSort="descending"==n?"3,desc":"ascending"==n?"3,asc":"":"robotGrossProfit"==a?this.tableSort="descending"==n?"4,desc":"ascending"==n?"4,asc":"":"netProfit"==a&&(this.tableSort="descending"==n?"5,desc":"ascending"==n?"5,asc":""),this.initTableData()}},computed:{tableContentValue:function(){return function(e,t){var a="";return a="status"==t?0==e[t]?"启用":"禁用":"updateDate"==t?null==e.startDate&&null==e.endDate?"":e.startDate+" ~ "+e.endDate:e[t],a}},tableSortable:function(){return function(e){var t="";return t=("runningAmount"==e||"comprehensiveCost"==e||"grossProfit"==e||"robotGrossProfit"==e||"netProfit"==e)&&"custom",t}}}},f=m,p=(a("e0c0"),a("2877")),g=Object(p["a"])(f,s,o,!1,null,"4205729c",null),h=g.exports,b={name:"App",components:{AttendanceTime:h}},v=b,T=(a("5c0b"),Object(p["a"])(v,r,i,!1,null,null,null)),y=T.exports,S=a("2f62");n["default"].use(S["a"]);var D=new S["a"].Store({state:{},mutations:{},actions:{},modules:{}}),w=(a("9e1f"),a("450d"),a("6ed5")),F=a.n(w),x=(a("0fb7"),a("f529")),R=a.n(x),$=(a("4ffc"),a("946e")),O=a.n($),k=(a("d624"),a("3e9c")),C=a.n(k),V=(a("e612"),a("dd87")),A=a.n(V),j=(a("075a"),a("72aa")),_=a.n(j),E=(a("fb08"),a("21e5")),P=a.n(E),I=(a("2f02"),a("fe11")),N=a.n(I),z=(a("ed7b"),a("e1a5")),L=a.n(z),M=(a("cbb5"),a("8bbc")),q=a.n(M),B=(a("9c49"),a("6640")),H=a.n(B),Y=(a("d2ac"),a("95b0")),G=a.n(Y),J=(a("f225"),a("89a9")),U=a.n(J),K=(a("be4f"),a("896a")),Q=a.n(K),W=(a("826b"),a("c263")),X=a.n(W),Z=(a("3db2"),a("58b8")),ee=a.n(Z),te=(a("eca7"),a("3787")),ae=a.n(te),ne=(a("425f"),a("4105")),re=a.n(ne),ie=(a("a7cc"),a("df33")),se=a.n(ie),oe=(a("672e"),a("101e")),le=a.n(oe),ce=(a("5466"),a("ecdf")),ue=a.n(ce),de=(a("38a0"),a("ad41")),me=a.n(de),fe=(a("10cb"),a("f3ad")),pe=a.n(fe),ge=(a("bdc7"),a("aa2f")),he=a.n(ge),be=(a("de31"),a("c69e")),ve=a.n(be),Te=(a("a673"),a("7b31")),ye=a.n(Te),Se=(a("adec"),a("3d2d")),De=a.n(Se),we=(a("6611"),a("e772")),Fe=a.n(we),xe=(a("1f1a"),a("4e4b")),Re=a.n(xe),$e=(a("1951"),a("eedf")),Oe=a.n($e);n["default"].use(Oe.a),n["default"].use(Re.a),n["default"].use(Fe.a),n["default"].use(De.a),n["default"].use(ye.a),n["default"].use(ve.a),n["default"].use(he.a),n["default"].use(pe.a),n["default"].use(me.a),n["default"].use(ue.a),n["default"].use(le.a),n["default"].use(se.a),n["default"].use(re.a),n["default"].use(ae.a),n["default"].use(ee.a),n["default"].use(X.a),n["default"].use(Q.a),n["default"].use(U.a),n["default"].use(G.a),n["default"].use(H.a),n["default"].use(q.a),n["default"].use(L.a),n["default"].use(N.a),n["default"].use(P.a),n["default"].use(_.a),n["default"].use(A.a),n["default"].use(C.a),n["default"].use(O.a),n["default"].prototype.$message=R.a,n["default"].prototype.$confirm=F.a.confirm;var ke=a("bc3a"),Ce=a.n(ke),Ve=a("4328"),Ae=a.n(Ve),je=a("313e"),_e=a("1209");Ce.a.defaults.withCredentials=!0,n["default"].prototype.$http=Ce.a,n["default"].prototype.$qs=Ae.a,n["default"].config.productionTip=!1,n["default"].prototype.$echarts=je,n["default"].prototype.$anime=_e["a"],new n["default"]({store:D,render:function(e){return e(y)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";a("9c0c")},9543:function(e,t,a){},"9c0c":function(e,t,a){},e0c0:function(e,t,a){"use strict";a("9543")}});
//# sourceMappingURL=app.ae9eddbb.js.map