(function(e){function t(t){for(var n,r,s=t[0],l=t[1],c=t[2],p=0,d=[];p<s.length;p++)r=s[p],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,s=1;s<a.length;s++){var l=a[s];0!==o[l]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},o={app:0},i=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;i.push([1,"chunk-vendors"]),a()})({0:function(e,t){},1:function(e,t,a){e.exports=a("56d7")},2:function(e,t){},3:function(e,t){},"56d7":function(e,t,a){"use strict";a.r(t);a("0fae");var n=a("9e2f"),o=a.n(n),i=(a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("2b0e")),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("approval-process")],1)},s=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"partner-company"},[a("el-container",[a("el-header",{staticClass:"header"},[a("el-form",{ref:"searchValidateForm",staticClass:"search-validate-form",attrs:{inline:!0,model:e.searchValidateForm,"label-width":"100px",rules:e.searchValidateFormRules}},[a("el-form-item",{attrs:{label:"",prop:"SCENIC_SPOT_ID"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择景区",clearable:""},on:{change:e.onChangeSearchSpot},model:{value:e.searchValidateForm.SCENIC_SPOT_ID,callback:function(t){e.$set(e.searchValidateForm,"SCENIC_SPOT_ID",t)},expression:"searchValidateForm.SCENIC_SPOT_ID"}},e._l(e.searchScenicOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.SCENIC_SPOT_NAME,value:e.SCENIC_SPOT_ID}})})),1)],1)],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.onSearch("searchValidateForm")}}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-right"},on:{click:e.onReset}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.onAdd}},[e._v("新增")]),a("el-upload",{staticClass:"upload-demo",attrs:{action:"","on-change":e.handleChange,"on-exceed":e.handleExceed,"on-remove":e.handleRemove,"file-list":e.fileListUpload,limit:e.limitUpload,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel","auto-upload":!1}}),a("a",{staticClass:"exportA",attrs:{id:"exportA",href:e.downloadUrl,download:""}})],1),a("el-main",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"审批流名称","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(" "+e._s(t.row.flowPathName)+" ")])]}}])}),a("el-table-column",{attrs:{label:"景区名称","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",e._l(t.row.appFlowPathSpotList,(function(t,n){return a("el-tag",{staticStyle:{margin:"3px"},attrs:{type:"info"}},[e._v(e._s(t.scenicSpotName))])})),1)]}}])}),a("el-table-column",{attrs:{label:"审批人/抄送人","min-width":"130",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.seeRow(t.$index,t.row)}}},[e._v(" 查看 ")])]}}])}),a("el-table-column",{attrs:{label:"操作","min-width":"130",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.editRow(t.$index,t.row)}}},[e._v(" 编辑 ")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t.$index,t.row)}}},[e._v(" 删除 ")])]}}])})],1),a("el-table",{staticClass:"table",staticStyle:{width:"100%",display:"none"},attrs:{id:"outTable",data:e.exportTableData,border:""}},e._l(e.tableFields,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e,label:t,"min-width":"130",align:"center"}})})),1)],1),a("el-footer",[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total, sizes, jumper",total:e.total,"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize},on:{"current-change":e.onCurrentChange,"size-change":e.onSizeChange}})],1)]),a("el-dialog",{attrs:{title:"审批人/抄送人",visible:e.approveDialogVisible,width:"15%","before-close":e.approveHandleClose},on:{"update:visible":function(t){e.approveDialogVisible=t}}},[a("el-timeline",e._l(e.appRoverData,(function(t,n){return a("el-timeline-item",{key:n,staticStyle:{"font-size":"18px"}},[e._v(" 审批人："+e._s(t.userName)+" "),e._l(t.appFlowPathDetailsList,(function(t,n){return a("div",{key:n,staticStyle:{padding:"10px","font-size":"16px"}},[e._v("抄送人:"+e._s(t.userName))])}))],2)})),1)],1),a("el-dialog",{staticClass:"dialog",attrs:{title:"新增审批流名称",visible:e.dialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"validateForm",staticClass:"demo-ruleForm",attrs:{model:e.validateForm,"label-width":"100px",rules:e.validateFormRules}},[a("el-form-item",{attrs:{label:"审批流名称",prop:"flowPathName"}},[a("el-input",{attrs:{placeholder:"请输入审批流名称"},model:{value:e.validateForm.flowPathName,callback:function(t){e.$set(e.validateForm,"flowPathName",t)},expression:"validateForm.flowPathName"}})],1),a("el-form-item",{attrs:{label:"景区名称",prop:"SCENIC_SPOT_NAME"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择景区名称"},model:{value:e.validateForm.SCENIC_SPOT_NAME,callback:function(t){e.$set(e.validateForm,"SCENIC_SPOT_NAME",t)},expression:"validateForm.SCENIC_SPOT_NAME"}},e._l(e.searchScenicOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.SCENIC_SPOT_NAME,value:e.SCENIC_SPOT_ID}})})),1)],1),a("el-form-item",{attrs:{label:"添加审批人",prop:"addPrev"}},["preview"!==e.dialogState?a("el-tooltip",{staticClass:"add-item",attrs:{effect:"dark",content:"新增",placement:"top"}},[a("el-button",{staticClass:"icon-size",staticStyle:{float:"left"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.onAddauditor}})],1):e._e()],1),e._l(e.auditorList,(function(t,n){return a("el-form-item",{key:n,attrs:{label:"审核人",prop:"license"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择审核人"},on:{change:function(a){e.onChangeApprover(a,t,n)}},model:{value:t.sysAppUserId,callback:function(a){e.$set(t,"sysAppUserId",a)},expression:"item.sysAppUserId"}},e._l(e.approver,(function(e,t){return a("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userId}})})),1),"preview"!==e.dialogState?a("el-tooltip",{staticClass:"add-item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("el-button",{staticClass:"icon-size",staticStyle:{float:"right"},attrs:{type:"text",icon:"el-icon-remove-outline"},on:{click:function(a){return e.delectAuditor(t,n)}}})],1):e._e(),a("el-form-item",{attrs:{label:"添加抄送人",prop:"license"}},["preview"!==e.dialogState?a("el-tooltip",{staticClass:"add-item",attrs:{effect:"dark",content:"新增",placement:"top"}},[a("el-button",{staticClass:"icon-size",staticStyle:{float:"left"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(a){return e.onAddCopySend(t,n)}}})],1):e._e()],1),e._l(t.appFlowPathDetailsList,(function(n,o){return a("el-form-item",{key:o,attrs:{label:"抄送人",prop:"license"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择抄送人"},on:{change:function(a){e.onChangeCopyAndSend(a,t,o)}},model:{value:n.sysAppUserId,callback:function(t){e.$set(n,"sysAppUserId",t)},expression:"val.sysAppUserId"}},e._l(e.copyAndSend,(function(e,t){return a("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userId}})})),1),"preview"!==e.dialogState?a("el-tooltip",{staticClass:"add-item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("el-button",{staticClass:"icon-size",staticStyle:{float:"right"},attrs:{type:"text",icon:"el-icon-remove-outline"},on:{click:function(a){return e.delectCopyAndSend(t,o)}}})],1):e._e()],1)}))],2)}))],2),a("div",{staticClass:"submit"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("validateForm")}}},[e._v("提交")]),a("el-button",{on:{click:e.dialogClose}},[e._v("取消")])],1)],1),a("el-dialog",{staticClass:"dialog",attrs:{title:"编辑审批人/抄送人",visible:e.editDialogVisible,"before-close":e.editHandleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("el-form",{ref:"editValidateForm",staticClass:"demo-ruleForm",attrs:{model:e.editValidateForm,"label-width":"100px",rules:e.editValidateFormRules}},[a("el-form-item",{attrs:{label:"审批流名称",prop:"carType"}},[a("el-input",{attrs:{placeholder:"请输入审批流名称"},model:{value:e.editDataRow.flowPathName,callback:function(t){e.$set(e.editDataRow,"flowPathName",t)},expression:"editDataRow.flowPathName"}})],1),a("el-form-item",{attrs:{label:"景区名称",prop:"carType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择景区名称"},on:{change:function(t){e.onChangeScenicSpotName(t,e.editDataRow)}},model:{value:e.modelScenicSpotName,callback:function(t){e.modelScenicSpotName=t},expression:"modelScenicSpotName"}},e._l(e.searchScenicOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.SCENIC_SPOT_NAME,value:e.SCENIC_SPOT_ID}})})),1)],1),a("el-form-item",{attrs:{label:"添加审批人",prop:"license"}},["preview"!==e.dialogState?a("el-tooltip",{staticClass:"add-item",attrs:{effect:"dark",content:"新增",placement:"top"}},[a("el-button",{staticClass:"icon-size",staticStyle:{float:"left"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.onAddauditor1}})],1):e._e()],1),e._l(e.editDataRow.appFlowPathDetailsList,(function(t,n){return a("el-form-item",{key:n,attrs:{label:"审核人",prop:"license"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择审核人"},on:{change:function(a){e.onChangeApprover(a,t,n)}},model:{value:t.userName,callback:function(a){e.$set(t,"userName",a)},expression:"item.userName"}},e._l(e.approver,(function(e,t){return a("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userId}})})),1),"preview"!==e.dialogState?a("el-tooltip",{staticClass:"add-item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("el-button",{staticClass:"icon-size",staticStyle:{float:"right"},attrs:{type:"text",icon:"el-icon-remove-outline"},on:{click:function(a){return e.delectAuditor(t,n)}}})],1):e._e(),a("el-form-item",{attrs:{label:"添加抄送人",prop:"license"}},["preview"!==e.dialogState?a("el-tooltip",{staticClass:"add-item",attrs:{effect:"dark",content:"新增",placement:"top"}},[a("el-button",{staticClass:"icon-size",staticStyle:{float:"left"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(a){return e.onAddCopySend(t,n)}}})],1):e._e()],1),e._l(t.appFlowPathDetailsList,(function(n,o){return a("el-form-item",{key:o,attrs:{label:"抄送人",prop:"license"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择抄送人"},on:{change:function(t){e.onChangeCopyAndSend1(t,n,o)}},model:{value:n.userName,callback:function(t){e.$set(n,"userName",t)},expression:"val.userName"}},e._l(e.copyAndSend,(function(e,t){return a("el-option",{key:t,attrs:{label:e.userName,value:e.userId}})})),1),"preview"!==e.dialogState?a("el-tooltip",{staticClass:"add-item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("el-button",{staticClass:"icon-size",staticStyle:{float:"right"},attrs:{type:"text",icon:"el-icon-remove-outline"},on:{click:function(a){return e.delectCopyAndSend(t,o)}}})],1):e._e()],1)}))],2)}))],2),a("div",{staticClass:"submit"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("editValidateForm")}}},[e._v("提交")]),a("el-button",{on:{click:e.editDialogClose}},[e._v("取消")])],1)],1)],1)],1)},c=[],u=a("2909"),p=a("5530"),d=a("1da1"),f=(a("96cf"),a("a9e3"),a("4d63"),a("ac1f"),a("25f0"),a("159b"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("a630"),a("a434"),a("4e82"),a("99af"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("d81d"),a("21a6")),m=a.n(f),h=a("1146"),g=a.n(h);a("4d90");var b={name:"SettlementFlow",data:function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,a,n){if(!a)return n(new Error(e+"不能为空"));n()}}return{approveDialogVisible:!1,appRoverData:[],showTable:!0,feeInput:"",taxInput:"",tableFields:{"审批流名称":"flowPathName","景区名称":"SCENIC_SPOT_NAME","添加审批人":"addPrev"},tableData:[],tableLoading:!1,searchCompanyOptions:[],searchScenicOptions:[],searchFaultTimeTypeOptions:[{value:"1",label:"故障上报时间"},{value:"2",label:"故障维修时间"}],dateStateOptions:[{value:"1",label:"按日查询"},{value:"2",label:"按月查询"},{value:"3",label:"按年查询"}],searchWarrantyStateOptions:[{value:"1",label:"在质保期"},{value:"2",label:"不在质保期"}],searchFaultStateOptions:[{value:"1",label:"未处理"},{value:"2",label:"已处理"},{value:"3",label:"已关闭"}],searchSignStateOptions:[{value:"1",label:"已收到"},{value:"2",label:"未收到"}],pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},applicanteOptions:[],factoryOptions:[],consignorOptions:[],consigneeOptions:[],consignmentDateOptions:[],exportTableData:[],downloadLoading:!1,currentPage:1,pageSize:10,dialogVisible:!1,editDialogVisible:!1,detailTableList:[],dialogState:"",selectDateState:"1",dateType:"daterange",valueFormat:"yyyy-MM-dd",searchValidateForm:{robotCode:"",SCENIC_SPOT_ID:"",faultName:"",faultTimeType:"",startEndDate:"",warrantyState:"",faultState:"",signState:""},searchVF:{robotCode:"",spotId:"",faultName:"",faultTimeType:"",startEndDate:"",warrantyState:"",faultState:"",signState:""},validateForm:{},editValidateForm:{},searchPartnerCompanyName:"",searchScenicName:"",searchSelectDateState:"1",searchStartEndDate:"",searchPayState:"",companys:[],companyState:"",scenics:[],scenicState:"",downloadUrl:"",total:0,currentEditRowId:null,uploadDialogImageUrl:"",uploadDialogVisible:!1,uploadDisabled:!1,limitUpload:1,file:null,fileTemp:null,fileListUpload:[],modelScenicSpotName:[],searchValidateFormRules:{},validateFormRules:{flowPathName:[{validator:e("审批流名称"),required:!0,trigger:["blur","change"]}],SCENIC_SPOT_NAME:[{validator:e("景区名称"),required:!0,trigger:["blur","change"]}]},editValidateFormRules:{},auditorList:[],approver:[],copyAndSend:[],auditorIndex:0,editDataRow:{},flowPathName:"",scenicSpotIdList:[],scenicSpotIdList1:[],scenicSpotIdList2:[],approverIndex:0}},created:function(){this.getValidateForm(),this.login(),this.getScenicList(),this.initTableData(),this.getFactoryList(),this.getUserList(),this.approverList()},beforeMount:function(){},mounted:function(){},methods:{approverList:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/system/sys_app_flow_path/reviewedDrop");case 2:if(a=t.sent,n=a.data,"200"!=n.state){t.next=11;break}return console.log(n),e.approver=n.data,e.copyAndSend=n.data,t.abrupt("return",n);case 11:return t.abrupt("return");case 12:case"end":return t.stop()}}),t)})))()},getValidateForm:function(){var e={};for(var t in this.tableFields)e[this.tableFields[t]]="";this.validateForm=e},login:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/loginSystem?username=houjingchen&password=houjingchen");case 2:a=t.sent,a.data;case 4:case"end":return t.stop()}}),t)})))()},getCompanyList:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e||(e=null),a.next=3,t.$http.get("/system/subscriptionInformation/companyList",{params:{spotId:e}});case 3:if(n=a.sent,o=n.data,"200"!=o.state){a.next=10;break}return t.searchCompanyOptions=o.data,a.abrupt("return",o);case 10:return a.abrupt("return");case 11:case"end":return a.stop()}}),a)})))()},getScenicList:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/system/robot_time_statistics/spotList",{});case 2:return a=t.sent,n=a.data,e.searchScenicOptions=n.data,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()},initTableData:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.searchVF.spotId,console.log(a),e.tableLoading=!0,t.next=5,e.$http.get("/system/sys_app_flow_path/getSysAppFlowPathList",{params:{flowPathName:"",scenicSpotIds:a,pageNum:(e.currentPage-1)*e.pageSize,pageSize:e.pageSize}});case 5:n=t.sent,o=n.data,console.log(o),e.tableData=o.data,e.total=o.total,e.tableLoading=!1;case 11:case"end":return t.stop()}}),t)})))()},addTableData:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.validateForm.SCENIC_SPOT_NAME+"",n=e.validateForm.flowPathName,e.validateForm={scenicSpotIds:a,flowPathName:n,appFlowPathDetailsList:e.auditorList},JSON.stringify(e.auditorList),console.log(e.validateForm),t.next=7,e.$http({method:"post",url:"/system/sys_app_flow_path/addSysAppFlowPath",data:e.validateForm,dataType:"json"});case 7:o=t.sent,i=o.data,console.log(i),"200"==i.state?(e.$message({message:i.msg,type:"success"}),e.initTableData(),e.validateForm={}):e.$message({message:i.msg,type:"error"});case 11:case"end":return t.stop()}}),t)})))()},editTableData:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n,o,i,r,s,l,c,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=/^[0-9]*$/,o=new RegExp(n),i=[],console.log(e.currentEditRowId),e.scenicSpotIdList1.forEach((function(e){o.test(e)&&i.push(e)})),(a=e.scenicSpotIdList).push.apply(a,i),console.log(e.scenicSpotIdList2),console.log(e.scenicSpotIdList),r=e.scenicSpotIdList2,s=new Set(r),r=Array.from(s),console.log(r),l=e.scenicSpotIdList,c=new Set(l),l=Array.from(c),""==e.scenicSpotIdList?e.editDataRow.scenicSpotIds=r+"":e.editDataRow.scenicSpotIds=l+"",console.log(e.editDataRow),t.next=19,e.$http({method:"post",url:"/system/sys_app_flow_path/editSysAppFlowPath",data:Object(p["a"])(Object(p["a"])({},e.editDataRow),{},{id:e.currentEditRowId}),dataType:"json"});case 19:u=t.sent,d=u.data,console.log(d),"200"==d.state?(e.$message({message:d.msg,type:"success"}),e.initTableData()):e.$message({message:d.msg,type:"error"});case 23:case"end":return t.stop()}}),t)})))()},getFactoryList:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/system/factory_send/factory_list");case 2:a=t.sent,n=a.data,e.factoryOptions=n;case 5:case"end":return t.stop()}}),t)})))()},getUserList:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/system/factory_send/user_list");case 2:a=t.sent,n=a.data,e.applicanteOptions=n,e.consignorOptions=n,e.consigneeOptions=n;case 7:case"end":return t.stop()}}),t)})))()},getExportTableData:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n,o,i,r,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.searchVF.spotId,""!=a&&a||(a=null),n=e.searchVF.startEndDate,""!=n&&n?(o=e.searchVF.startEndDate[0],i=e.searchVF.startEndDate[1]):(o=null,i=null),r=e.searchVF.type,""!=r&&r||(r=null),t.next=8,e.$http.get("/system/factory_send/sendList",{params:{spotId:a,beginDate:o,endDate:i,type:r}});case 8:if(s=t.sent,l=s.data,"200"!=l.state){t.next=14;break}e.exportTableData=l.data,t.next=15;break;case 14:return t.abrupt("return");case 15:case"end":return t.stop()}}),t)})))()},onChangeApprover:function(e,t,a){var n=this;return Object(d["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:console.log(e,t,a),t.sysAppUserId=e,n.approverIndex=e;case 3:case"end":return o.stop()}}),o)})))()},onChangeScenicSpotName:function(e,t){var a=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a.scenicSpotIdList1=e,a.scenicSpotIdList=[],console.log(e),t.appFlowPathSpotList.forEach((function(t){e.forEach((function(e){e==t.scenicSpotName&&a.scenicSpotIdList.push(t.scenicSpotId)}))}));case 4:case"end":return n.stop()}}),n)})))()},onChangeCopyAndSend:function(e,t,a){return Object(d["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log(e,t,a),t.appFlowPathDetailsList.sysAppUserId=e;case 2:case"end":return n.stop()}}),n)})))()},onChangeCopyAndSend1:function(e,t,a){return Object(d["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log(e,t,a),t.sysAppUserId=e;case 2:case"end":return n.stop()}}),n)})))()},delectAuditor:function(e,t){console.log(t),0==t&&(this.approverIndex=0),this.auditorList.splice(t,1),this.editDataRow.appFlowPathDetailsList.splice(t,1)},delectCopyAndSend:function(e,t){console.log(e),e.appFlowPathDetailsList.splice(t,1)},onAddauditor:function(){var e=1;e++,console.log(e),this.auditorIndex++,console.log(this.auditorIndex),this.auditorList.push({sort:this.auditorIndex,type:1,sysAppUserId:"",appFlowPathDetailsList:[]})},onAddauditor1:function(){console.log(this.editDataRow.appFlowPathDetailsList.length),this.auditorIndex++,this.editDataRow.appFlowPathDetailsList.push({appFlowPathDetailsList:[],sort:this.editDataRow.appFlowPathDetailsList.length+1,sysAppUserId:"",type:1})},onAddCopySend:function(e,t){console.log(t),e.appFlowPathDetailsList.push({sort:e.sort,sysAppUserId:"",type:2}),console.log(e)},getTableData:function(){this.searchVF.spotId=this.searchValidateForm.SCENIC_SPOT_ID,console.log("调用接口"),this.initTableData()},onChangeSearchSpot:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n="",t.searchScenicOptions.forEach((function(t){t.SCENIC_SPOT_ID==e&&(n=t.SCENIC_SPOT_NAME)})),t.searchValidateForm.spotName=n;case 3:case"end":return a.stop()}}),a)})))()},onChangeSpot:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n="",t.searchScenicOptions.forEach((function(t){t.spotId==e&&(n=t.spotName)})),t.validateForm.spotName=n;case 3:case"end":return a.stop()}}),a)})))()},onDateChange:function(){console.log(this.selectDateState),"1"==this.selectDateState?(this.dateType="monthrange",this.valueFormat="yyyy-MM"):"2"==this.selectDateState?(this.dateType="daterange",this.valueFormat="yyyy-MM-dd"):"3"==this.selectDateState&&(this.dateType="yearrange",this.valueFormat="yyyy")},onReset:function(){this.searchValidateForm.SCENIC_SPOT_ID="",this.getTableData(),this.getScenicList()},onSearch:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.showTable=!0,t.getTableData()}))},exportExcel:function(){var e=this;this.$confirm("确认导出Excel表格?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.downloadLoading=!0,t.next=3,e.getExportTableData();case 3:e.$nextTick((function(){var t={raw:!0},a=g.a.utils.table_to_book(document.querySelector("#outTable"),t),n=g.a.write(a,{bookType:"xlsx",bookSST:!0,type:"array"});try{m.a.saveAs(new Blob([n],{type:"application/octet-stream"}),"订单统计状态.xlsx")}catch(o){"undefined"!==typeof console&&console.log(o,n)}return e.downloadLoading=!1,n})),e.$message({type:"success",message:"已成功导出Excel表格！"});case 5:case"end":return t.stop()}}),t)})))).catch((function(){e.$message({type:"info",message:"已取消导出Excel表格"})}))},onAdd:function(){this.dialogVisible=!0,this.dialogState="add"},seeRow:function(e,t){this.approveDialogVisible=!0,console.log(t),this.appRoverData=t.appFlowPathDetailsList},editRow:function(e,t){var a=this;console.log(e,t),this.editDataRow=t,this.currentEditRowId=t.id,this.modelScenicSpotName=[],this.scenicSpotIdList2=[],t.appFlowPathSpotList.forEach((function(e){a.modelScenicSpotName.push(e.scenicSpotName),a.scenicSpotIdList2.push(e.scenicSpotId)})),this.editDialogVisible=!0,this.dialogState="edit"},deleteRow:function(e,t){var a=this;this.$confirm("此操作将删除该行数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.deleteTableDate(t.id);case 1:case"end":return e.stop()}}),e)})))).catch((function(){a.$message({type:"info",message:"已取消删除",offset:100,center:!0,duration:1e3})}))},deleteTableDate:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.delete("/system/sys_app_flow_path/delSysAppFlowPath",{params:{id:e}});case 2:n=a.sent,o=n.data,"200"==o.state?(t.$message({type:"success",message:"删除成功",offset:100,center:!0,duration:1e3}),t.initTableData()):t.$message({type:"error",message:o.msg,offset:100,center:!0,duration:3e3});case 5:case"end":return a.stop()}}),a)})))()},detailRow:function(e,t){this.dialogState="detail"},dialogClose:function(){this.dialogVisible=!1,this.$refs.validateForm.resetFields(),this.getValidateForm()},editDialogClose:function(){this.editDialogVisible=!1,this.$refs.editValidateForm.resetFields(),this.editValidateForm={}},detailDialogClose:function(){},handleClose:function(e){e(),this.$refs.validateForm.resetFields(),this.getValidateForm()},editHandleClose:function(e){e(),this.$refs.editValidateForm.resetFields(),this.editValidateForm={}},detailHandleClose:function(e){e()},approveHandleClose:function(e){this.appRoverData=[],e()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;if("add"==t.dialogState){if(""==t.validateForm.flowPathName)return t.$message({type:"error",message:"请输入审批流名称",offset:100,center:!0,duration:3e3}),!1;if(""==t.validateForm.SCENIC_SPOT_NAME)return t.$message({type:"error",message:"请选择景区",offset:100,center:!0,duration:3e3}),!1;if(0==t.approverIndex)return t.$message({type:"error",message:"请选择审核人",offset:100,center:!0,duration:3e3}),!1;console.log("新增审核人/抄送人信息"),t.addTableData(),t.dialogVisible=!1}else if("edit"==t.dialogState){if(0==t.approverIndex)return t.$message({type:"error",message:"请选择审核人",offset:100,center:!0,duration:3e3}),!1;console.log("编辑审核人/抄送人信息"),t.editTableData(),t.editDialogVisible=!1}else"detail"==t.dialogState&&console.log("工厂发货详情信息");t.validateForm={},t.editValidateForm={}}))},onCurrentChange:function(e){this.currentPage=e,this.initTableData()},onSizeChange:function(e){this.pageSize=e,this.initTableData()},handleChange:function(e,t){console.log(e),this.fileTemp=e.raw,this.fileTemp?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==this.fileTemp.type||"application/vnd.ms-excel"==this.fileTemp.type?this.importfxx(this.fileTemp):this.$message({type:"warning",message:"附件格式错误，请删除后重新上传！"}):this.$message({type:"warning",message:"请上传附件！"})},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleRemove:function(e,t){this.fileTemp=null},importfxx:function(e){this.file=e;var t=!1,n=this.file,o=new FileReader;FileReader.prototype.readAsBinaryString=function(e){var t,n,o="",i=!1,r=new FileReader;r.onload=function(e){for(var s=new Uint8Array(r.result),l=s.byteLength,c=0;c<l;c++)o+=String.fromCharCode(s[c]);var p=a("1146");t=i?p.read(btoa(fixdata(o)),{type:"base64"}):p.read(o,{type:"binary"}),n=p.utils.sheet_to_json(t.Sheets[t.SheetNames[0]]),console.log(n),this.da=Object(u["a"])(n);var d=[];return this.da.map((function(e){var t={robotCount:e["机器人数量"],type:e["发货进度"],applicantName:e["申请人"],factoryName:e["发货工厂"],consignorName:e["发货人"],receivingName:e["收货景区"],consigneeName:e["收货人"],consigneePhone:e["收货人电话"],receiningAddress:e["收货地址"],consignmentDate:e["发货时间"]};d.push(t)})),this.tableData=d,d},r.readAsArrayBuffer(e)},t?o.readAsArrayBuffer(n):o.readAsBinaryString(n)}},components:{},computed:{SpotName:function(){return function(e){var t=[];return e.appFlowPathSpotList.forEach((function(e){t.push(e.scenicSpotName)})),t+""}}}},v=b,y=(a("df7d"),a("2877")),S=Object(y["a"])(v,l,c,!1,null,"5bee84c3",null),w=S.exports,C={name:"App",components:{ApprovalProcess:w}},_=C,x=(a("5c0b"),Object(y["a"])(_,r,s,!1,null,null,null)),D=x.exports,F=a("2f62");i["default"].use(F["a"]);var I=new F["a"].Store({state:{},mutations:{},actions:{},modules:{}}),k=a("bc3a"),N=a.n(k),O=a("4328"),T=a.n(O),R=a("313e");i["default"].use(o.a),N.a.defaults.withCredentials=!0,i["default"].prototype.$http=N.a,i["default"].prototype.$qs=T.a,i["default"].config.productionTip=!1,i["default"].prototype.$echarts=R,new i["default"]({store:I,render:function(e){return e(D)}}).$mount("#app")},"598a":function(e,t,a){},"5c0b":function(e,t,a){"use strict";a("9c0c")},"9c0c":function(e,t,a){},df7d:function(e,t,a){"use strict";a("598a")}});
//# sourceMappingURL=app.99f6f48d.js.map