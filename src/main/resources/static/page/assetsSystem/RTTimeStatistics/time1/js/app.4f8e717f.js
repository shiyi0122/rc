(function(e){function t(t){for(var r,n,i=t[0],l=t[1],c=t[2],h=0,u=[];h<i.length;h++)n=i[h],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&u.push(s[n][0]),s[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(u.length)u.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,i=1;i<a.length;i++){var l=a[i];0!==s[l]&&(r=!1)}r&&(o.splice(t--,1),e=n(n.s=a[0]))}return e}var r={},s={app:0},o=[];function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=r,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=l;o.push([1,"chunk-vendors"]),a()})({0:function(e,t){},"0907":function(e,t,a){},1:function(e,t,a){e.exports=a("56d7")},2:function(e,t){},3:function(e,t){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("robot-time-statistics-time")],1)},o=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"partner-company"},[a("el-container",[a("el-header",{staticClass:"header"},[a("el-form",{ref:"searchValidateForm",staticClass:"search-validate-form",attrs:{inline:!0,model:e.searchValidateForm,"label-width":"100px",rules:e.searchValidateFormRules}},[a("el-form-item",{attrs:{label:"",prop:"companyId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择公司",clearable:""},on:{change:e.onChangeSearchCompany},model:{value:e.searchValidateForm.companyId,callback:function(t){e.$set(e.searchValidateForm,"companyId",t)},expression:"searchValidateForm.companyId"}},e._l(e.searchCompanyOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.COMPANY_NAME,value:e.COMPANY_ID}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:"spotId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择景区",clearable:""},on:{change:e.onChangeSearchSpot},model:{value:e.searchValidateForm.spotId,callback:function(t){e.$set(e.searchValidateForm,"spotId",t)},expression:"searchValidateForm.spotId"}},e._l(e.searchScenicOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.SCENIC_SPOT_NAME,value:e.SCENIC_SPOT_ID}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:"type"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择统计方式"},on:{change:e.onChangeType},model:{value:e.searchValidateForm.type,callback:function(t){e.$set(e.searchValidateForm,"type",t)},expression:"searchValidateForm.type"}},e._l(e.typeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:"status"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择景区运营状态",clearable:""},model:{value:e.searchValidateForm.status,callback:function(t){e.$set(e.searchValidateForm,"status",t)},expression:"searchValidateForm.status"}},e._l(e.statusOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:"selectDateState"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择日期统计方式"},on:{change:e.onDateChange},model:{value:e.searchValidateForm.selectDateState,callback:function(t){e.$set(e.searchValidateForm,"selectDateState",t)},expression:"searchValidateForm.selectDateState"}},e._l(e.dateStateOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticStyle:{width:"350px"},attrs:{label:"",prop:"startEndDate"}},[a("el-date-picker",{attrs:{"unlink-panels":"",type:e.dateType,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValidateForm.startEndDate,callback:function(t){e.$set(e.searchValidateForm,"startEndDate",t)},expression:"searchValidateForm.startEndDate"}})],1),a("el-form-item",{attrs:{label:"",prop:"timeType"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择时长类型",disabled:e.disabledTimeType},on:{change:e.onChangeTimeType},model:{value:e.searchValidateForm.timeType,callback:function(t){e.$set(e.searchValidateForm,"timeType",t)},expression:"searchValidateForm.timeType"}},e._l(e.timeTypeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:"totalTime"}},[a("el-input",{attrs:{placeholder:"请输入运营时长"},model:{value:e.searchValidateForm.totalTime,callback:function(t){e.$set(e.searchValidateForm,"totalTime",t)},expression:"searchValidateForm.totalTime"}})],1),a("el-form-item",{attrs:{label:"",prop:"robotCode"}},[a("el-input",{attrs:{placeholder:"请输入机器人编号",disabled:e.disabledRobotCode},model:{value:e.searchValidateForm.robotCode,callback:function(t){e.$set(e.searchValidateForm,"robotCode",t)},expression:"searchValidateForm.robotCode"}})],1)],1),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-right"},on:{click:e.onReset}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-data-line",disabled:e.disabledStatGrossProfit},on:{click:function(t){return e.onStatGrossProfit("searchValidateForm")}}},[e._v("统计报表")]),a("a",{attrs:{href:"",id:"exportReport",download:"按时间统计运营时长"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-s-data"},on:{click:e.onExportReport}},[e._v("导出报表")])],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.onSearch("searchValidateForm")}}},[e._v("查询数据")]),a("el-button",{attrs:{type:"primary",loading:e.downloadLoading,icon:"el-icon-top-right"},on:{click:e.exportExcel}},[e._v("导出数据")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTable,expression:"showTable"}]},[a("el-main",[e.updateTable?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"},{name:"loadmore",rawName:"v-loadmore",value:e.load,expression:"load"}],staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","default-sort":{prop:"totalTime",order:"descending"},"header-cell-style":{background:"#f2f2f2",color:"#606266",height:"38px",padding:"0px"},"cell-style":{height:"38px",padding:"0"},"max-height":"500px","show-summary":"","summary-method":e.getSummaries},on:{"sort-change":e.onSortChange}},[e._l(e.tableFields,(function(t,r){return[a("el-table-column",{key:r,attrs:{prop:t,label:r,"min-width":"130",fixed:e.activeFixed(t),sortable:e.sortable(t)},scopedSlots:e._u([{key:"default",fn:function(r){return[a("div",[e._v(" "+e._s(e.tableContentValue(r.row,t))+" ")])]}}],null,!0)})]}))],2):e._e(),a("el-table",{staticClass:"table",staticStyle:{width:"100%",display:"none"},attrs:{id:"outTable",data:e.exportTableData,border:"","show-summary":"","summary-method":e.getSummaries}},e._l(e.tableFields,(function(t,r){return a("el-table-column",{key:r,attrs:{prop:t,label:r,"min-width":"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[a("div",[e._v(" "+e._s(e.tableContentValue(r.row,t))+" ")])]}}],null,!0)})})),1)],1),a("el-footer",[a("div",[e._v("一共"+e._s(e.total)+"条数据，已加载"+e._s(this.tableData.length)+"条数据")])])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showTable,expression:"!showTable"}],staticClass:"my-echarts"},[a("div",{attrs:{id:"myChart"}})]),a("div")],1)],1)},i=[],l=a("ade3"),c=a("2909"),d=a("1da1"),h=(a("96cf"),a("a9e3"),a("99af"),a("159b"),a("b680"),a("b0c0"),a("07ac"),a("a434"),a("b64b"),a("d3b7"),a("25f0"),a("7db0"),a("d81d"),a("21a6")),u=a.n(h),p=a("1146"),m=a.n(p);a("4d90");function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",a=e.getFullYear().toString(),r=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0"),o="";return"1"==t?o=a+"-"+r+"-"+s:"2"==t?o=a+"-"+r:"3"==t&&(o=a),o}function f(){var e=(new Date).getTime(),t=864e5,a=e-t,r=new Date(a);return r}var F={name:"ScenicProfitStatistic",data:function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,a,r){a||r(),Number(a)?r():r(new Error(e+"必须为数字值"))}}return{showTable:!0,feeInput:"",taxInput:"",searchFeeInput:"",searchTaxInput:"",tableFields:{"时间":"checkDate","景区名称":"spotName","运营时长/小时":"totalTime","同比":"tb","环比":"hb","机器利用率":"lyl","平均单台运营时长/小时":"avgsc"},tableData:[],searchTableFields:{"时间":"checkDate","景区名称":"spotName","运营时长/小时":"totalTime","同比":"tb","环比":"hb","机器利用率":"lyl","平均单台运营时长/小时":"avgsc"},tableLoading:!1,searchCompanyOptions:[],searchScenicOptions:[],dateStateOptions:[{value:"1",label:"按日查询"},{value:"2",label:"按月查询"},{value:"3",label:"按年查询"}],typeOptions:[{value:"1",label:"按景区统计"},{value:"2",label:"按机器人统计"}],statusOptions:[{value:"1",label:"已运营景区"},{value:"2",label:"测试景区"},{value:"3",label:"预运营景区"}],timeTypeOptions:[{value:"1",label:"运营时长"},{value:"2",label:"平均单台运营时长"}],exportTableData:[],downloadLoading:!1,currentPage:1,pageSize:15,dialogVisible:!1,dialogState:"",dateType:"daterange",valueFormat:"yyyy-MM-dd",searchValidateForm:{companyId:"",spotId:"",type:"1",status:"1",selectDateState:"1",startEndDate:[f(),f()],timeType:"1",totalTime:"",robotCode:""},searchVF:{companyId:"",spotId:"",type:"1",status:"1",selectDateState:"1",startEndDate:[f(),f()],timeType:"1",totalTime:"",robotCode:""},searchVFEcharts:{companyId:"",spotId:"",type:"1",status:"1",selectDateState:"1",startEndDate:[f(),f()],timeType:"1",totalTime:"",robotCode:""},validateForm:{},companys:[],companyState:"",scenics:[],scenicState:"",timeChartData:[],total:0,typeTotalTime:0,order:"totalTime desc",echartsOrder:null,myChart:null,option:{},disabledStatGrossProfit:!1,disabledTimeType:!1,disabledRobotCode:!0,updateTable:!0,searchValidateFormRules:{totalTime:[{validator:e("运营时长"),required:!0,trigger:["blur","change"]}]},validateFormRules:{}}},created:function(){this.getValidateForm(),this.loadTableData(),this.initEchartsData(),this.getCompanyList(),this.getScenicList(),this.getTimeChart()},mounted:function(){this.drawEcharts()},methods:{getValidateForm:function(){var e={};for(var t in this.tableFields)e[this.tableFields[t]]="";this.validateForm=e,console.log(this.validateForm)},login:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/loginSystem?username=lijiazhao&password=lijiazhao");case 2:a=t.sent,a.data;case 4:case"end":return t.stop()}}),t)})))()},updateTableMethode:function(){var e=this;this.updateTable=!1,this.$nextTick((function(){e.updateTable=!0}))},initTableData:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,r,s,o,n,i,l,c,d,h,u,p,m,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.searchVF.companyId,""!=a&&a||(a=null),r=e.searchVF.spotId,""!=r&&r||(r=null),s=e.searchVF.type,""!=s&&s||(s=null),o=e.searchVF.status,""!=o&&o||(o=null),n=e.searchVF.selectDateState,""!=n&&n||(n=null),i=e.searchVF.startEndDate,""!=i&&i?(l=b(e.searchVF.startEndDate[0],e.searchVF.selectDateState),c=b(e.searchVF.startEndDate[1],e.searchVF.selectDateState)):(l=null,c=null),d=e.searchVF.timeType,""!=d&&d||(d=null),h=e.searchVF.totalTime,""!=h&&h||(h=null),u=e.searchVF.robotCode,""!=u&&u||(u=null),e.currentPage=1,p={companyId:a,spotId:r,type:s,status:o,dateType:n,startDate:l,endDate:c,timeType:d,totalTime:h,robotCode:u,order:e.order,pageNum:(e.currentPage-1)*e.pageSize,pageSize:e.pageSize},e.tableLoading=!0,t.next=23,e.$http.get("/system/robot_time_statistics/timeList",{params:p});case 23:return m=t.sent,f=m.data,"200"==f.state&&(e.updateTableMethode(),e.currentPage++,e.tableData=f.data,s=JSON.parse(f.type),e.total=s.count,e.typeTotalTime=s.totalTime,e.tableLoading=!1),t.abrupt("return",f);case 27:case"end":return t.stop()}}),t)})))()},loadTableData:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,r,s,o,n,i,l,d,h,u,p,m,f,F,y;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.searchVF.companyId,""!=a&&a||(a=null),r=e.searchVF.spotId,""!=r&&r||(r=null),s=e.searchVF.type,""!=s&&s||(s=null),o=e.searchVF.status,""!=o&&o||(o=null),n=e.searchVF.selectDateState,""!=n&&n||(n=null),i=e.searchVF.startEndDate,""!=i&&i?(l=b(e.searchVF.startEndDate[0],e.searchVF.selectDateState),d=b(e.searchVF.startEndDate[1],e.searchVF.selectDateState)):(l=null,d=null),h=e.searchVF.timeType,""!=h&&h||(h=null),u=e.searchVF.totalTime,""!=u&&u||(u=null),p=e.searchVF.robotCode,""!=p&&p||(p=null),m={},m={companyId:a,spotId:r,type:s,status:o,dateType:n,startDate:l,endDate:d,timeType:h,totalTime:u,robotCode:p,order:e.order,pageNum:(e.currentPage-1)*e.pageSize,pageSize:e.pageSize},e.tableData.length!=e.total){t.next=23;break}return e.$message({type:"info",message:"到底啦！",offset:100,center:!0,duration:1e3}),t.abrupt("return");case 23:return e.tableLoading=!0,t.next=26,e.$http.get("/system/robot_time_statistics/timeList",{params:m});case 26:return f=t.sent,F=f.data,"200"==F.state&&(F.data.length>0?(e.currentPage++,(y=e.tableData).push.apply(y,Object(c["a"])(F.data)),s=JSON.parse(F.type),e.total=s.count,e.typeTotalTime=s.totalTime):e.$message({type:"info",message:"到底啦！",offset:100,center:!0,duration:1e3}),e.tableLoading=!1),t.abrupt("return",F);case 30:case"end":return t.stop()}}),t)})))()},initEchartsData:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,r,s,o,n,i,l,c,d,h,u,p,m,f,F,y,g,V,v,T,D,S,x,E,w,C,O,I,k,_,j,N,R,P,$,L,A,M;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.searchVFEcharts.companyId,""!=a&&a||(a=null),r=e.searchVFEcharts.spotId,""!=r&&r||(r=null),s=e.searchVFEcharts.type,""!=s&&s||(s=null),o=e.searchVFEcharts.status,""!=o&&o||(o=null),n=e.searchVFEcharts.selectDateState,""!=n&&n||(n=null),i=e.searchVFEcharts.startEndDate,""!=i&&i?(l=b(e.searchVFEcharts.startEndDate[0],e.searchVFEcharts.selectDateState),c=b(e.searchVFEcharts.startEndDate[1],e.searchVFEcharts.selectDateState),console.log(l,c)):(l=null,c=null),d=e.searchVFEcharts.timeType,""!=d&&d||(d=null),h=e.searchVFEcharts.totalTime,""!=h&&h||(h=null),u=e.searchVFEcharts.robotCode,""!=u&&u||(u=null),p=!0,p=l==c,console.log(p),m=!1,m=!!e.searchVFEcharts.spotId,console.log(m),p&&!m?"1"==e.searchVFEcharts.timeType?e.echartsOrder="totalTime desc":"2"==e.searchVFEcharts.timeType&&(e.echartsOrder="avgsc desc"):e.echartsOrder="checkDate asc",t.next=27,e.$http.get("/system/robot_time_statistics/timeList",{params:{companyId:a,spotId:r,type:s,status:o,dateType:n,startDate:l,endDate:c,timeType:d,totalTime:h,robotCode:u,order:e.echartsOrder}});case 27:return f=t.sent,F=f.data,"200"==F.state&&(e.myChart.hideLoading(),y=F.data.concat(),g=[],V=[],v=[],T=[],D=[],S=[],x=[],E=[],w=[],C=[],O=[],I=[],k=[],_="",j="初始totalTimes",N="初始avgscs",R="初始tb",P="初始hb",$="初始jxzs",y.forEach((function(e){g.push(e.spotName),V.push(e.totalTime),v.push(e.avgsc),T.push(e.checkDate),D.push(e.tb),S.push(e.hb),x.push(e.jxz),e.checkDate!==_?("初始totalTimes"!==j&&E.push(Number(j).toFixed(2)),"初始avgscs"!==N&&w.push(Number(N).toFixed(2)),"初始tb"!==R&&O.push(Number(R).toFixed(2)),"初始hb"!==P&&I.push(Number(P).toFixed(2)),"初始jxzs"!==$&&k.push(Number($)),_=e.checkDate,C.push(_),j=e.totalTime,N=e.avgsc,R=e.tb,P=e.hb,$=e.jxz):(j+=e.totalTime,N+=e.avgsc,R+=e.tb,P+=e.hb,$+=e.jxz)})),E.push(Number(j).toFixed(2)),w.push(Number(N).toFixed(2)),O.push(Number(R).toFixed(2)),I.push(Number(P).toFixed(2)),k.push(Number($)),console.log("avgscList2:",w),L="","1"==e.searchVFEcharts.timeType?(L="运营时长/小时",p&&!m?(e.option.xAxis[0].data=g,e.option.series[0].data=V,e.option.series[0].itemStyle.normal.label.formatter=function(e){var t="";return t=x[e.dataIndex],t},e.option.series[1].data=D,"3"==e.searchValidateForm.selectDateState?(e.option.legend.data=["运营时长/小时","同比/小时"],e.option.series[2].data=[]):(e.option.legend.data=["运营时长/小时","同比/%","环比/%"],e.option.series[2].data=S),g&&g.length<=20?e.option.dataZoom[0].end=100:e.option.dataZoom[0].end=30):p&&m?(e.option.xAxis[0].data=T,e.option.series[0].data=V,e.option.series[0].itemStyle.normal.label.formatter=function(e){var t="";return t=x[e.dataIndex],t},e.option.series[1].data=D,"3"==e.searchValidateForm.selectDateState?(e.option.legend.data=["运营时长/小时","同比/%"],e.option.series[2].data=[]):(e.option.legend.data=["运营时长/小时","同比/%","环比/%"],e.option.series[2].data=S),T&&T.length<=20?e.option.dataZoom[0].end=100:e.option.dataZoom[0].end=30):!p&&m?(e.option.xAxis[0].data=T,e.option.series[0].data=V,e.option.series[0].itemStyle.normal.label.formatter=function(e){var t="";return t=x[e.dataIndex],t},e.option.series[1].data=D,"3"==e.searchValidateForm.selectDateState?(e.option.legend.data=["运营时长/小时","同比/%"],e.option.series[2].data=[]):(e.option.legend.data=["运营时长/小时","同比/%","环比/%"],e.option.series[2].data=S),T&&T.length<=20?e.option.dataZoom[0].end=100:e.option.dataZoom[0].end=30):p||m||(e.option.xAxis[0].data=C,e.option.series[0].data=E,e.option.series[0].itemStyle.normal.label.formatter=function(e){var t="";return t=k[e.dataIndex],t},A=[],M=[],e.timeChartData.forEach((function(e){A.push(e.tb),M.push(e.hb)})),e.option.series[1].data=A,"3"==e.searchValidateForm.selectDateState?(e.option.legend.data=["运营时长/小时","同比/%"],e.option.series[2].data=[]):(e.option.legend.data=["运营时长/小时","同比/%","环比/%"],e.option.series[2].data=M),C&&C.length<=20?e.option.dataZoom[0].end=100:e.option.dataZoom[0].end=30)):"2"==e.searchVFEcharts.timeType&&(L="平均单台运营时长",p&&!m?(e.option.xAxis[0].data=g,e.option.series[0].data=v,e.option.series[0].itemStyle.normal.label.formatter=function(e){var t="";return t=x[e.dataIndex],t},e.option.series[1].data=D,"3"==e.searchValidateForm.selectDateState?(e.option.legend.data=["运营时长/小时","同比/%"],e.option.series[2].data=[]):(e.option.legend.data=["运营时长/小时","同比/%","环比/%"],e.option.series[2].data=S),g&&g.length<=20?e.option.dataZoom[0].end=100:e.option.dataZoom[0].end=30):p&&m?(e.option.xAxis[0].data=T,e.option.series[0].data=v,e.option.series[0].itemStyle.normal.label.formatter=function(e){var t="";return t=x[e.dataIndex],t},e.option.series[1].data=D,"3"==e.searchValidateForm.selectDateState?(e.option.legend.data=["运营时长/小时","同比/%"],e.option.series[2].data=[]):(e.option.legend.data=["运营时长/小时","同比/%","环比/%"],e.option.series[2].data=S),T&&T.length<=20?e.option.dataZoom[0].end=100:e.option.dataZoom[0].end=30):!p&&m?(e.option.xAxis[0].data=T,e.option.series[0].data=v,e.option.series[0].itemStyle.normal.label.formatter=function(e){var t="";return t=x[e.dataIndex],t},e.option.series[1].data=D,"3"==e.searchValidateForm.selectDateState?(e.option.legend.data=["运营时长/小时","同比/%"],e.option.series[2].data=[]):(e.option.legend.data=["运营时长/小时","同比/%","环比/%"],e.option.series[2].data=S),T&&T.length<=20?e.option.dataZoom[0].end=100:e.option.dataZoom[0].end=30):p||m||(e.option.xAxis[0].data=C,e.option.series[0].data=w,e.option.series[0].itemStyle.normal.label.formatter=function(e){var t="";return t=k[e.dataIndex],t},A=[],M=[],e.timeChartData.forEach((function(e){A.push(e.tb),M.push(e.hb)})),e.option.series[1].data=A,"3"==e.searchValidateForm.selectDateState?(e.option.legend.data=["运营时长/小时","同比/%"],e.option.series[2].data=[]):(e.option.legend.data=["运营时长/小时","同比/%","环比/%"],e.option.series[2].data=M),C&&C.length<=20?e.option.dataZoom[0].end=100:e.option.dataZoom[0].end=30)),e.option.legend.data[0]=L,e.option.series[0].name=L,e.myChart.setOption(e.option)),t.abrupt("return",F);case 31:case"end":return t.stop()}}),t)})))()},getCompanyList:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e||(e=null),a.next=3,t.$http.get("/system/robot_time_statistics/companyList",{params:{spotId:e}});case 3:if(r=a.sent,s=r.data,"200"!=s.state){a.next=10;break}return t.searchCompanyOptions=s.data,a.abrupt("return",s);case 10:return a.abrupt("return");case 11:case"end":return a.stop()}}),a)})))()},getScenicList:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e||(e=null),a.next=3,t.$http.get("/system/robot_time_statistics/spotList",{params:{companyId:e}});case 3:if(r=a.sent,s=r.data,"200"!=s.state){a.next=10;break}return t.searchScenicOptions=s.data,a.abrupt("return",s);case 10:return a.abrupt("return");case 11:case"end":return a.stop()}}),a)})))()},getExportTableData:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,r,s,o,n,i,l,c,d,h,u,p,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.searchValidateForm.companyId,""!=a&&a||(a=null),r=e.searchValidateForm.spotId,""!=r&&r||(r=null),s=e.searchValidateForm.type,""!=s&&s||(s=null),o=e.searchValidateForm.status,""!=o&&o||(o=null),n=e.searchValidateForm.selectDateState,""!=n&&n||(n=null),i=e.searchValidateForm.startEndDate,""!=i&&i?(l=b(e.searchValidateForm.startEndDate[0],e.searchValidateForm.selectDateState),c=b(e.searchValidateForm.startEndDate[1],e.searchValidateForm.selectDateState)):(l=null,c=null),d=e.searchValidateForm.timeType,""!=d&&d||(d=null),h=e.searchValidateForm.totalTime,""!=h&&h||(h=null),u=e.searchValidateForm.robotCode,""!=u&&u||(u=null),t.next=20,e.$http.get("/system/robot_time_statistics/timeList",{params:{companyId:a,spotId:r,type:s,status:o,dateType:n,startDate:l,endDate:c,timeType:d,totalTime:h,robotCode:u,order:e.order}});case 20:if(p=t.sent,m=p.data,"200"!=m.state){t.next=26;break}e.exportTableData=m.data,t.next=27;break;case 26:return t.abrupt("return");case 27:case"end":return t.stop()}}),t)})))()},getTimeChart:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,r,s,o,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.searchVFEcharts.selectDateState,""!=a&&a||(a=null),r=e.searchVFEcharts.startEndDate,""!=r&&r?(s=b(e.searchVFEcharts.startEndDate[0],e.searchVFEcharts.selectDateState),o=b(e.searchVFEcharts.startEndDate[1],e.searchVFEcharts.selectDateState)):(s=null,o=null),t.next=6,e.$http.get("/system/robot_time_statistics/timeChart",{params:Object(l["a"])({dateType:a,startDate:s,endDate:o},"endDate",o)});case 6:n=t.sent,i=n.data,e.timeChartData=i.data;case 9:case"end":return t.stop()}}),t)})))()},onDateChange:function(){var e=[];for(var t in this.searchTableFields){var a={};a[t]=this.searchTableFields[t],e.push(a)}"1"==this.searchValidateForm.selectDateState?(this.dateType="daterange",this.searchTableFields.hasOwnProperty("环比")||e.forEach((function(t,a){"tb"==Object.values(t)[0]&&e.splice(a+1,0,{"环比":"hb"})}))):"2"==this.searchValidateForm.selectDateState?(this.dateType="monthrange",this.searchTableFields.hasOwnProperty("环比")||e.forEach((function(t,a){"tb"==Object.values(t)[0]&&e.splice(a+1,0,{"环比":"hb"})}))):"3"==this.searchValidateForm.selectDateState&&(this.dateType="yearrange",this.searchTableFields.hasOwnProperty("环比")&&e.forEach((function(t,a){"hb"==Object.values(t)[0]&&e.splice(a,1)})));var r={};e.forEach((function(e){r[Object.keys(e)[0]]=Object.values(e)[0]})),this.searchTableFields=r},onSortChange:function(e){var t=e.column,a=e.prop,r=e.order;console.log(t,a,r),"ascending"==r?r="asc":"descending"==r&&(r="desc"),this.order=r?"".concat(a," ").concat(r):null,this.initTableData()},drawEcharts:function(){var e=this;this.myChart=this.$echarts.init(document.getElementById("myChart")),this.option={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},saveAsImage:{show:!0}}},legend:{data:["运营时长/小时","同比/%","环比/%"],top:0},dataZoom:[{type:"inside",start:0,end:30},{type:"slider"}],xAxis:[{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],axisPointer:{type:"shadow"}}],yAxis:[{type:"value",axisLabel:{formatter:"{value} 小时"}},{type:"value",axisLabel:{formatter:"{value} %"}}],series:[{name:"运营时长/小时",type:"bar",data:[],itemStyle:{normal:{label:{show:!0,position:"top",textStyle:{color:"black",fontSize:16},formatter:""}}}},{name:"同比/%",type:"line",yAxisIndex:1,data:[]},{name:"环比/%",type:"line",yAxisIndex:1,data:[]}]},this.myChart.setOption(this.option),window.addEventListener("resize",(function(){e.myChart.resize()}))},getTableData:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=[],r=[],a=[b(e.searchValidateForm.startEndDate[0],e.searchValidateForm.selectDateState),b(e.searchValidateForm.startEndDate[1],e.searchValidateForm.selectDateState)],r=[b(e.searchVF.startEndDate[0],e.searchVF.selectDateState),b(e.searchVF.startEndDate[1],e.searchVF.selectDateState)],e.searchValidateForm.companyId!=e.searchVF.companyId||e.searchValidateForm.spotId!=e.searchVF.spotId||e.searchValidateForm.type!=e.searchVF.type||e.searchValidateForm.status!=e.searchVF.status||e.searchValidateForm.selectDateState!=e.searchVF.selectDateState||a.toString()!=r.toString()||e.searchValidateForm.timeType!=e.searchVF.timeType||e.searchValidateForm.totalTime!=e.searchVF.totalTime||e.searchValidateForm.robotCode!=e.searchVF.robotCode){t.next=6;break}return t.abrupt("return");case 6:return e.searchVF.companyId=e.searchValidateForm.companyId,e.searchVF.spotId=e.searchValidateForm.spotId,e.searchVF.type=e.searchValidateForm.type,e.searchVF.status=e.searchValidateForm.status,e.searchVF.selectDateState=e.searchValidateForm.selectDateState,e.searchVF.startEndDate=e.searchValidateForm.startEndDate,e.searchVF.timeType=e.searchValidateForm.timeType,e.searchVF.totalTime=e.searchValidateForm.totalTime,e.searchVF.robotCode=e.searchValidateForm.robotCode,console.log("调用接口"),t.next=18,e.initTableData();case 18:s=t.sent,"200"==s.state&&(e.tableFields=e.searchTableFields);case 20:case"end":return t.stop()}}),t)})))()},getEchartsData:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=[],r=[],a=[b(e.searchValidateForm.startEndDate[0],e.searchValidateForm.selectDateState),b(e.searchValidateForm.startEndDate[1],e.searchValidateForm.selectDateState)],r=[b(e.searchVFEcharts.startEndDate[0],e.searchVFEcharts.selectDateState),b(e.searchVFEcharts.startEndDate[1],e.searchVFEcharts.selectDateState)],e.myChart.showLoading({text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.2)",zlevel:0}),e.searchValidateForm.companyId!=e.searchVFEcharts.companyId||e.searchValidateForm.spotId!=e.searchVFEcharts.spotId||e.searchValidateForm.type!=e.searchVFEcharts.type||e.searchValidateForm.status!=e.searchVFEcharts.status||e.searchValidateForm.selectDateState!=e.searchVFEcharts.selectDateState||a.toString()!=r.toString()||e.searchValidateForm.timeType!=e.searchVFEcharts.timeType||e.searchValidateForm.totalTime!=e.searchVFEcharts.totalTime||e.searchValidateForm.robotCode!=e.searchVFEcharts.robotCode){t.next=8;break}return e.myChart.hideLoading(),t.abrupt("return");case 8:return e.searchVFEcharts.companyId=e.searchValidateForm.companyId,e.searchVFEcharts.spotId=e.searchValidateForm.spotId,e.searchVFEcharts.type=e.searchValidateForm.type,e.searchVFEcharts.status=e.searchValidateForm.status,e.searchVFEcharts.selectDateState=e.searchValidateForm.selectDateState,e.searchVFEcharts.startEndDate=e.searchValidateForm.startEndDate,e.searchVFEcharts.timeType=e.searchValidateForm.timeType,e.searchVFEcharts.totalTime=e.searchValidateForm.totalTime,e.searchVFEcharts.robotCode=e.searchValidateForm.robotCode,console.log("调用接口"),t.next=20,e.getTimeChart();case 20:return t.next=22,e.initEchartsData();case 22:s=t.sent,"200"==s.state&&(e.tableFields=e.searchTableFields);case 24:case"end":return t.stop()}}),t)})))()},onChangeSearchCompany:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var r,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.getScenicList(e);case 2:if(r=a.sent,console.log(r),s=r.data,t.searchScenicOptions=s,0!=s.length){a.next=9;break}return t.searchValidateForm.spotId="",a.abrupt("return");case 9:o=!1,s.forEach((function(e){e.SCENIC_SPOT_ID!=t.searchValidateForm.spotId||(o=!0)})),e&&!o&&(t.searchValidateForm.spotId=s[0].SCENIC_SPOT_ID);case 12:case"end":return a.stop()}}),a)})))()},onChangeSearchSpot:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var r,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.getCompanyList(e);case 2:if(r=a.sent,s=r.data,t.searchCompanyOptions=s,0!=s.length){a.next=8;break}return t.searchValidateForm.companyId="",a.abrupt("return");case 8:o=!1,s.forEach((function(e){e.COMPANY_ID!=t.searchValidateForm.companyId||(o=!0)})),e&&!o&&(t.searchValidateForm.companyId=s[0].COMPANY_ID);case 11:case"end":return a.stop()}}),a)})))()},onChangeType:function(e){var t=[];for(var a in this.searchTableFields){var r={};r[a]=this.searchTableFields[a],t.push(r)}if("1"==e){if(this.searchTableFields.hasOwnProperty("机器人编号"))for(var s=t.length-1;s>0;s--)"robotCode"==Object.values(t[s])[0]&&t.splice(s,1);this.disabledStatGrossProfit=!1,this.disabledTimeType=!1,this.disabledRobotCode=!0}else"2"==e&&(this.searchTableFields.hasOwnProperty("机器人编号")||t.splice(2,0,{"机器人编号":"robotCode"}),this.disabledStatGrossProfit=!0,this.searchValidateForm.timeType="1",this.disabledRobotCode=!1,this.searchTableFields.hasOwnProperty("运营时长/小时")||t.splice(2,0,{"运营时长/小时":"totalTime"}),this.disabledTimeType=!0);var o={};t.forEach((function(e){o[Object.keys(e)[0]]=Object.values(e)[0]})),this.searchTableFields=o},onChangeTimeType:function(e){var t=[];for(var a in this.searchTableFields){var r={};r[a]=this.searchTableFields[a],t.push(r)}"1"==e?this.searchTableFields.hasOwnProperty("运营时长/小时")||t.splice(2,0,{"运营时长/小时":"totalTime"}):"2"==e&&this.searchTableFields.hasOwnProperty("运营时长/小时")&&t.forEach((function(e,a){"totalTime"==Object.values(e)[0]&&t.splice(a,1)}));var s={};t.forEach((function(e){s[Object.keys(e)[0]]=Object.values(e)[0]})),this.searchTableFields=s},onChangeCompany:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r={},r=t.companyOptions.find((function(t){return t.COMPANY_NAME===e})),s=r.COMPANY_ID,t.validateForm.companyId=s;case 4:case"end":return a.stop()}}),a)})))()},onChangeSpot:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r={},r=t.scenicOptions.find((function(t){return t.SCENIC_SPOT_NAME===e})),s=r.SCENIC_SPOT_ID,t.validateForm.spotId=s;case 4:case"end":return a.stop()}}),a)})))()},onChangeSubject:function(e){var t={};t=this.subjectOptions.find((function(t){return t.COMPANY_NAME===e})),console.log(t.COMPANY_ID),this.validateForm.subjectId=t.COMPANY_ID},onReset:function(){this.searchValidateForm.companyId="",this.searchValidateForm.spotId="",this.searchValidateForm.type="1",this.searchValidateForm.status="1",this.searchValidateForm.startEndDate=[f(),f()],this.searchValidateForm.timeType="1",this.searchValidateForm.totalTime="",this.searchValidateForm.robotCode="",this.searchValidateForm.selectDateState="1",this.dateType="daterange",this.getTableData(),this.getEchartsData()},onStatGrossProfit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var a=b(t.searchValidateForm.startEndDate[0],t.searchValidateForm.selectDateState),r=b(t.searchValidateForm.startEndDate[1],t.searchValidateForm.selectDateState),s=b(new Date,t.searchValidateForm.selectDateState),o="";switch(t.searchValidateForm.selectDateState){case"1":o="日";break;case"2":o="月";break;case"3":o="年";break;default:break}a==s||r==s?t.$confirm("因当".concat(o,"未结束，统计当").concat(o,"的同比、环比数据不准确，是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.showTable=!1,t.getEchartsData()})).catch((function(){})):(t.showTable=!1,t.getEchartsData())}))},onExportReport:function(){var e=this;this.$nextTick((function(){var t=document.getElementById("exportReport");t.href=e.myChart.getDataURL()}))},onSearch:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var a=b(t.searchValidateForm.startEndDate[0],t.searchValidateForm.selectDateState),r=b(t.searchValidateForm.startEndDate[1],t.searchValidateForm.selectDateState),s=b(new Date,t.searchValidateForm.selectDateState),o="";switch(t.searchValidateForm.selectDateState){case"1":o="日";break;case"2":o="月";break;case"3":o="年";break;default:break}a==s||r==s?t.$confirm("因当".concat(o,"未结束，统计当").concat(o,"的同比、环比数据不准确，是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.showTable=!0,t.getTableData()})).catch((function(){})):(t.showTable=!0,t.getTableData())}))},exportExcel:function(){var e=this;this.$confirm("确认导出Excel表格?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.downloadLoading=!0,t.next=3,e.getExportTableData();case 3:e.$nextTick((function(){var t={raw:!0},a=m.a.utils.table_to_book(document.querySelector("#outTable"),t),r=m.a.write(a,{bookType:"xlsx",bookSST:!0,type:"array"});try{u.a.saveAs(new Blob([r],{type:"application/octet-stream"}),"按时间统计运营时长.xlsx")}catch(s){"undefined"!==typeof console&&console.log(s,r)}return e.downloadLoading=!1,r})),e.$message({type:"success",message:"已成功导出Excel表格！",offset:100,center:!0,duration:1e3});case 5:case"end":return t.stop()}}),t)})))).catch((function(){e.$message({type:"info",message:"已取消导出Excel表格",offset:100,center:!0,duration:1e3})}))},onAdd:function(){this.dialogVisible=!0,this.dialogState="add"},editRow:function(e,t){console.log(e,t),this.dialogVisible=!0;var a=Object.assign({},t);this.validateForm=a,this.dialogState="edit"},dialogClose:function(){this.dialogVisible=!1,this.$refs.validateForm.resetFields(),this.getValidateForm()},handleClose:function(e){e(),this.$refs.validateForm.resetFields(),this.getValidateForm()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;console.log(t.validateForm),"add"==t.dialogState?console.log("新增公司信息"):"edit"==t.dialogState&&console.log("编辑公司信息"),t.dialogVisible=!1,t.$refs.validateForm.resetFields()}))},getSummaries:function(e){var t=this,a=e.columns,r=e.data,s=[];return a.forEach((function(e,a){if(0!==a){var o=r.map((function(t){return Number(t[e.property])}));o.every((function(e){return isNaN(e)}))||(s[a]=o.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0),s[a]=""),"totalTime"==e.property&&(s[a]=t.typeTotalTime+"小时")}else s[a]="合计"})),s},load:function(){this.loadTableData()}},components:{},computed:{activeFixed:function(){return function(e){}},tableContentValue:function(){return function(e,t){var a="";return a="tb"==t||"hb"==t?e[t]+"%":e[t],a}},sortable:function(){return function(e){var t="";return t="spotName"!=e&&"机器人型号字段"!=e&&"运营模式字段"!=e&&"custom",t}}}},y=F,g=(a("ec56"),a("2877")),V=Object(g["a"])(y,n,i,!1,null,"0f1033f2",null),v=V.exports,T={name:"App",components:{RobotTimeStatisticsTime:v}},D=T,S=(a("5c0b"),Object(g["a"])(D,s,o,!1,null,null,null)),x=S.exports,E=a("2f62");r["default"].use(E["a"]);var w=new E["a"].Store({state:{},mutations:{},actions:{},modules:{}}),C=(a("9e1f"),a("450d"),a("6ed5")),O=a.n(C),I=(a("0fb7"),a("f529")),k=a.n(I),_=(a("be4f"),a("896a")),j=a.n(_),N=(a("826b"),a("c263")),R=a.n(N),P=(a("3db2"),a("58b8")),$=a.n(P),L=(a("eca7"),a("3787")),A=a.n(L),M=(a("425f"),a("4105")),z=a.n(M),Z=(a("a7cc"),a("df33")),Y=a.n(Z),B=(a("672e"),a("101e")),G=a.n(B),q=(a("5466"),a("ecdf")),J=a.n(q),H=(a("38a0"),a("ad41")),U=a.n(H),K=(a("10cb"),a("f3ad")),Q=a.n(K),W=(a("bdc7"),a("aa2f")),X=a.n(W),ee=(a("de31"),a("c69e")),te=a.n(ee),ae=(a("a673"),a("7b31")),re=a.n(ae),se=(a("adec"),a("3d2d")),oe=a.n(se),ne=(a("6611"),a("e772")),ie=a.n(ne),le=(a("1f1a"),a("4e4b")),ce=a.n(le),de=(a("1951"),a("eedf")),he=a.n(de);r["default"].use(he.a),r["default"].use(ce.a),r["default"].use(ie.a),r["default"].use(oe.a),r["default"].use(re.a),r["default"].use(te.a),r["default"].use(X.a),r["default"].use(Q.a),r["default"].use(U.a),r["default"].use(J.a),r["default"].use(G.a),r["default"].use(Y.a),r["default"].use(z.a),r["default"].use(A.a),r["default"].use($.a),r["default"].use(R.a),r["default"].use(j.a),r["default"].prototype.$message=k.a,r["default"].prototype.$confirm=O.a.confirm;var ue=a("521e"),pe=a("bc3a"),me=a.n(pe),be=a("313e"),fe=a("323e"),Fe=a.n(fe);a("a5d8");r["default"].use(ue["a"]),r["default"].directive("loadmore",{bind:function(e,t){var a=e.querySelector(".el-table__body-wrapper");a.addEventListener("scroll",(function(){var e=0,a=this.scrollHeight-this.scrollTop-this.clientHeight;a<=e&&t.value()}))}}),me.a.defaults.withCredentials=!0,r["default"].prototype.$http=me.a,r["default"].config.productionTip=!1,r["default"].prototype.$echarts=be,me.a.interceptors.request.use((function(e){return Fe.a.start(),e})),me.a.interceptors.response.use((function(e){return Fe.a.done(),e})),new r["default"]({store:w,render:function(e){return e(x)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";a("9c0c")},"9c0c":function(e,t,a){},ec56:function(e,t,a){"use strict";a("0907")}});
//# sourceMappingURL=app.4f8e717f.js.map