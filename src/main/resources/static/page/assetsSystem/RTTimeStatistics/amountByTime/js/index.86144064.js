(function(e){function t(t){for(var n,s,i=t[0],l=t[1],c=t[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,i=1;i<a.length;i++){var l=a[i];0!==r[l]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={index:0},o=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"164e":function(e,t){e.exports=echarts},"1a35":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("8bbf"),r=a.n(n),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("statistics-line")],1)},s=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"partner-company"},[a("el-container",[a("el-header",{staticClass:"header"},[a("el-form",{ref:"searchValidateForm",staticClass:"search-validate-form",attrs:{inline:!0,model:e.searchValidateForm,"label-width":"100px",rules:e.searchValidateFormRules}},[a("el-form-item",{attrs:{label:"",prop:"dateType"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择模式",clearable:""},on:{change:e.onChangeMode},model:{value:e.searchValidateForm.dateType,callback:function(t){e.$set(e.searchValidateForm,"dateType",t)},expression:"searchValidateForm.dateType"}},e._l(e.searchModeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:"startEndDate"}},[a("el-date-picker",{attrs:{"unlink-panels":"",type:e.dateType,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValidateForm.startEndDate,callback:function(t){e.$set(e.searchValidateForm,"startEndDate",t)},expression:"searchValidateForm.startEndDate"}})],1),a("el-form-item",{attrs:{label:"",prop:"spotId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择景区",clearable:""},model:{value:e.searchValidateForm.spotId,callback:function(t){e.$set(e.searchValidateForm,"spotId",t)},expression:"searchValidateForm.spotId"}},e._l(e.searchScenicOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.SCENIC_SPOT_NAME,value:e.SCENIC_SPOT_ID}})})),1)],1)],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.onSearch("searchValidateForm")}}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:function(t){return e.onRefresh("searchValidateForm")}}},[e._v("刷新")])],1),a("el-main",[a("div",{staticClass:"my-echarts"},[a("div",{attrs:{id:"myChart"}})])]),a("el-footer")],1)],1)},l=[],c=a("2909"),u=a("1da1");a("96cf"),a("a9e3"),a("159b"),a("99af"),a("b0c0"),a("d81d"),a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("25f0"),a("4d90"),a("9588"),a("5f5c");function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",a=e.getFullYear().toString(),n=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0"),o="";return"1"==t?o=a+"-"+n+"-"+r:"2"==t?o=a+"-"+n:"3"==t&&(o=a),o}var p={name:"PartnerCompany",data:function(){return{dateType:"daterange",valueFormat:"yyyy-MM-dd",searchModeOptions:[{label:"按日查询",value:1},{label:"按月查询",value:2},{label:"按年查询",value:3}],searchScenicOptions:[],searchValidateForm:{dateType:1,spotId:"",startEndDate:[new Date(new Date-6048e5),new Date(new Date-864e5)]},searchVF:{spotId:"",startEndDate:[]},validateForm:{},total:0,myChart:null,option:{},realTimeList:[],drysList:[],jxzList:[],searchValidateFormRules:{},timer:null}},created:function(){this.getValidateForm(),this.getAllSpotList()},mounted:function(){this.getRevenueLine(),this.randomDate()},beforeDestroy:function(){clearInterval(this.timer)},methods:{getValidateForm:function(){var e={};for(var t in this.tableFields)e[this.tableFields[t]]="";this.validateForm=e},login:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/loginSystem?username=houjingchen&password=houjingchen");case 2:a=t.sent,n=a.data,console.log(n);case 5:case"end":return t.stop()}}),t)})))()},getAllSpotList:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/system/robot_time_statistics/spotList");case 2:a=t.sent,n=a.data,e.searchScenicOptions=n.data;case 5:case"end":return t.stop()}}),t)})))()},getRevenueLine:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,s,i,l,u,p,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.searchValidateForm),a=e.searchValidateForm.spotId,n=e.searchValidateForm.startEndDate,r=null,o=null,s=1,"daterange"==e.dateType?(r=d(n[0],1),o=d(n[1],1),s=1):"monthrange"==e.dateType?(r=d(n[0],2),o=d(n[1],2),s=2):"yearrange"==e.dateType&&(r=d(n[0],3),o=d(n[1],3),s=3),console.log({spotId:a,dateType:s,startTime:r,endTime:o}),i={},""==a?"daterange"==e.dateType?i={spotId:a,startDate:r,endDate:o}:"monthrange"==e.dateType?i={spotId:a,dateType:4,startDate:r,endDate:o}:"yearrange"==e.dateType&&(i={spotId:a,dateType:5,startDate:r,endDate:o}):i={spotId:a,dateType:s,startDate:r,endDate:o},t.next=12,e.$http.get("/system/robot_time_statistics/amountByTime",{params:i});case 12:l=t.sent,u=l.data,"200"==u.state?(console.log(u),p=[],h=[],u.data.forEach((function(t){"daterange"==e.dateType?(p.push(t.DATE),h.push(t.total_amount)):"monthrange"==e.dateType?(p.push(t.month),h.push(t.total_amount)):"yearrange"==e.dateType&&(p.push(t.year),h.push(t.total_amount))})),console.log(p),e.myChart=e.$echarts.init(document.getElementById("myChart")),e.option={title:{text:"统计总金额"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}},textStyle:{align:"left"},formatter:function(e){return"日期：".concat(e[0].name,"</br>统计营收:").concat(e[0].value,"元")}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:Object(c["a"])(new Map(p.map((function(e){return[e,e]})))).map((function(e){return e[1]}))},yAxis:{type:"value"},series:[{data:h,type:"line"}]},e.myChart.setOption(e.option)):e.$message({type:"error",message:"无数据",offset:100,center:!0,duration:3e3});case 15:case"end":return t.stop()}}),t)})))()},onSearch:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.getRevenueLine()}))},randomDate:function(e){for(var t=new Date,a=[],n=1;n<=e;n++){t.setDate(t.getDate()-1);var r=new Date(t.getTime()),o=r.getFullYear().toString(),s=(r.getMonth()+1).toString().padStart(2,"0"),i=r.getDate().toString().padStart(2,"0"),l=o+"-"+s+"-"+i;a.push(l)}return console.log(a),a},onRefresh:function(){var e=this;this.searchValidateForm.spotIdList=[],this.searchValidateForm.spotId="",this.searchValidateForm.mode=0,this.searchValidateForm.date=new Date,this.searchValidateForm.startEndDate=[new Date,new Date],this.searchValidateForm.multipeDate=[new Date],this.updateSelectSpotIdList=!1,this.$nextTick((function(){e.updateSelectSpotIdList=!0})),this.updateSelectDate=!1,this.$nextTick((function(){e.updateSelectDate=!0})),this.updateSelectSpotId=!1,this.$nextTick((function(){e.updateSelectSpotId=!0})),this.getRevenueLine()},drawEcharts:function(){var e=this;this.myChart=this.$echarts.init(document.getElementById("myChart")),this.option={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}},textStyle:{align:"left"}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},saveAsImage:{show:!0}}},legend:{bottom:0,data:["统计营收/元","统计订单/条"]},xAxis:[{type:"category",data:[],axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"统计",axisLabel:{formatter:"{value} 元"},max:null,splitNumber:6,interval:null}],series:[]};for(var t=0;t<999;t++)this.option.series[t]=t%2==0?{type:"line",yAxisIndex:0}:{type:"line",yAxisIndex:1};this.myChart.setOption(this.option,!0),window.addEventListener("resize",(function(){e.myChart.resize()}))},onChangeMode:function(e){1==e?this.dateType="daterange":2==e?this.dateType="monthrange":3==e&&(this.dateType="yearrange")}},components:{}},h=p,f=(a("b783"),a("2877")),m=Object(f["a"])(h,i,l,!1,null,"a9be6496",null),y=m.exports,g={name:"App",components:{statisticsLine:y}},b=g,v=(a("5c0b"),Object(f["a"])(b,o,s,!1,null,null,null)),x=v.exports,S=a("5880"),w=a.n(S);r.a.use(w.a);var D=new w.a.Store({state:{},mutations:{},actions:{},modules:{}}),T=(a("9e1f"),a("450d"),a("6ed5")),F=a.n(T),V=(a("0fb7"),a("f529")),I=a.n(V),O=(a("826b"),a("c263")),_=a.n(O),C=(a("be4f"),a("896a")),$=a.n(C),E=(a("eca7"),a("3787")),j=a.n(E),k=(a("425f"),a("4105")),L=a.n(k),M=(a("a7cc"),a("df33")),R=a.n(M),P=(a("672e"),a("101e")),A=a.n(P),N=(a("5466"),a("ecdf")),z=a.n(N),B=(a("38a0"),a("ad41")),J=a.n(B),X=(a("10cb"),a("f3ad")),Y=a.n(X),q=(a("bdc7"),a("aa2f")),G=a.n(q),H=(a("de31"),a("c69e")),K=a.n(H),Q=(a("a673"),a("7b31")),U=a.n(Q),W=(a("adec"),a("3d2d")),Z=a.n(W),ee=(a("6611"),a("e772")),te=a.n(ee),ae=(a("1f1a"),a("4e4b")),ne=a.n(ae),re=(a("1951"),a("eedf")),oe=a.n(re);r.a.use(oe.a),r.a.use(ne.a),r.a.use(te.a),r.a.use(Z.a),r.a.use(U.a),r.a.use(K.a),r.a.use(G.a),r.a.use(Y.a),r.a.use(J.a),r.a.use(z.a),r.a.use(A.a),r.a.use(R.a),r.a.use(L.a),r.a.use(j.a),r.a.use($.a),r.a.use(_.a),r.a.prototype.$message=I.a,r.a.prototype.$confirm=F.a.confirm;var se=a("bc3a"),ie=a.n(se),le=a("164e");ie.a.defaults.withCredentials=!0,r.a.prototype.$http=ie.a,r.a.config.productionTip=!1,r.a.prototype.$echarts=le,new r.a({store:D,render:function(e){return e(x)}}).$mount("#app")},5880:function(e,t){e.exports=Vuex},"5c0b":function(e,t,a){"use strict";a("9c0c")},"5f5c":function(e,t){e.exports=XLSX},"8bbf":function(e,t){e.exports=Vue},9588:function(e,t){e.exports=FileSaver},"9c0c":function(e,t,a){},b783:function(e,t,a){"use strict";a("1a35")}});
//# sourceMappingURL=index.86144064.js.map