(function(e){function t(t){for(var r,i,o=t[0],l=t[1],c=t[2],u=0,h=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&h.push(n[i][0]),n[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(h.length)h.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},n={app:0},s=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;s.push([1,"chunk-vendors"]),a()})({0:function(e,t){},1:function(e,t,a){e.exports=a("56d7")},2:function(e,t){},3:function(e,t){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("amount-analysis")],1)},s=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"partner-company"},[a("el-container",[a("el-header",{staticClass:"header",staticStyle:{height:"100px"}},[a("el-form",{ref:"searchValidateForm",staticClass:"search-validate-form",attrs:{inline:!0,model:e.searchValidateForm,"label-width":"100px",rules:e.searchValidateFormRules}},[a("el-form-item",{attrs:{label:"",prop:"selectDateState"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择日期统计方式"},on:{change:e.onDateChange},model:{value:e.searchValidateForm.selectDateState,callback:function(t){e.$set(e.searchValidateForm,"selectDateState",t)},expression:"searchValidateForm.selectDateState"}},e._l(e.dateStateOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:"startEndDate"}},[a("el-date-picker",{attrs:{"unlink-panels":"",type:e.dateType,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValidateForm.startEndDate,callback:function(t){e.$set(e.searchValidateForm,"startEndDate",t)},expression:"searchValidateForm.startEndDate"}})],1)],1),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-right"},on:{click:e.onReset}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-s-tools"},on:{click:function(t){return e.onSetting("searchValidateForm")}}},[e._v("景区统计设置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-data-line"},on:{click:function(t){return e.onStatGrossProfit("searchValidateForm")}}},[e._v("统计分析")]),a("a",{attrs:{href:"",id:"exportReport",download:"运营流水分析"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-s-data"},on:{click:e.onExportReport}},[e._v("导出报表")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTable,expression:"showTable"}]},[a("el-main",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","default-sort":{prop:"totalTime",order:"descending"},"header-cell-style":{background:"#f2f2f2",color:"#606266",height:"38px",padding:"0px"},"cell-style":{height:"38px",padding:"0"}},on:{"sort-change":e.onSortChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._l(e.tableFields,(function(t,r){return[a("el-table-column",{key:r,attrs:{prop:t,label:r,"min-width":"130",fixed:e.activeFixed(t)},scopedSlots:e._u([{key:"default",fn:function(r){return[a("div",[e._v(" "+e._s(e.tableContentValue(r.row,t))+" ")])]}}],null,!0)})]})),a("el-table-column",{attrs:{label:"操作","min-width":"130",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.editRow(t.$index,t.row)}}},[e._v(" 编辑 ")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t.$index,t.row)}}},[e._v(" 删除 ")])]}}])})],2),a("el-button",{staticClass:"add-btn",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.onAdd}},[e._v("新增统计设置")])],1),a("el-footer")],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showTable,expression:"!showTable"}],staticClass:"my-echarts"},[a("div",{attrs:{id:"myChart"}}),a("div",[e._v(" "+e._s(e.sectionMessage)+" ")])]),a("div",[a("el-dialog",{staticClass:"dialog",attrs:{title:"新增统计设置",visible:e.dialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"validateForm",staticClass:"demo-ruleForm",attrs:{model:e.validateForm,"label-width":"170px",rules:e.validateFormRules}},[a("el-form-item",{attrs:{label:"景区排序分段统计时长",prop:"begin"}},[a("el-input",{staticStyle:{width:"100px"},attrs:{type:"number",autocomplete:"off",placeholder:"请输入起始分段",disabled:e.disabledInput},model:{value:e.validateForm.begin,callback:function(t){e.$set(e.validateForm,"begin",t)},expression:"validateForm.begin"}})],1),a("el-form-item",{staticClass:"section-end"},[a("span",[e._v("——")])]),a("el-form-item",{staticClass:"section-end",staticStyle:{width:"100px"},attrs:{label:"",prop:"end"}},[a("el-input",{staticStyle:{width:"100px"},attrs:{type:"number",autocomplete:"off",placeholder:"请输入结束分段",disabled:e.disabledInput},model:{value:e.validateForm.end,callback:function(t){e.$set(e.validateForm,"end",t)},expression:"validateForm.end"}})],1)],1),a("div",{staticClass:"submit"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("validateForm")}}},[e._v("提交")]),a("el-button",{on:{click:e.dialogClose}},[e._v("取消")])],1)],1)],1)],1)],1)},o=[],l=a("1da1");a("96cf"),a("a9e3"),a("99af"),a("d3b7"),a("25f0"),a("21a6"),a("1146"),a("4d90");function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",a=e.getFullYear().toString(),r=(e.getMonth()+1).toString().padStart(2,"0"),n=(e.getDate().toString().padStart(2,"0"),"");return"1"==t?n=a+"-"+r:"2"==t&&(n=a),n}var d={name:"ScenicProfitStatistic",data:function(){return{showTable:!1,feeInput:"",taxInput:"",searchFeeInput:"",searchTaxInput:"",tableFields:{"景区排序分段统计时长":"SECTION"},tableData:[],tableLoading:!1,searchCompanyOptions:[],searchScenicOptions:[],dateStateOptions:[{value:"1",label:"按月查询"},{value:"2",label:"按年查询"}],downloadLoading:!1,currentPage:1,pageSize:10,dialogVisible:!1,dialogState:"",dateType:"monthrange",valueFormat:"yyyy-MM",searchValidateForm:{selectDateState:"1",startEndDate:[new Date,new Date]},searchVF:{selectDateState:"1",startEndDate:[new Date,new Date]},searchVFEcharts:{selectDateState:"1",startEndDate:[new Date,new Date]},validateForm:{},companys:[],companyState:"",scenics:[],scenicState:"",total:0,order:"totalTime desc",echartsOrder:null,myChart:null,option:{},spotNameListLen:0,sectionMessage:"",disabledInput:!0,searchValidateFormRules:{},validateFormRules:{begin:[{validator:this.checkNumberMethod("起始分段统计时长"),required:!0,trigger:["blur","change"]}],end:[{validator:this.checkNumberMethod("结束分段统计时长"),required:!0,trigger:["blur","change"]}]}}},created:function(){this.getValidateForm()},mounted:function(){this.drawEcharts(),this.initTableData(),this.initEchartsData()},methods:{checkNumberMethod:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(a,r,n){if(!r)return n();console.log(r),Number(r)?Number(r)>e.spotNameListLen?n(new Error(t+"的长度不能大于"+e.spotNameListLen)):n():n(new Error(t+"必须为正整数"))}},getValidateForm:function(){var e={};for(var t in this.tableFields)e[this.tableFields[t]]="";this.validateForm=e,console.log(this.validateForm)},login:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/loginSystem?username=lijiazhao&password=lijiazhao");case 2:a=t.sent,a.data;case 4:case"end":return t.stop()}}),t)})))()},initTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/system/operational_analysis/fitList");case 2:return a=t.sent,r=a.data,console.log(r),e.tableData=r.data,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))()},initEchartsData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s,i,o,l,d,u,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.searchVFEcharts.selectDateState,""!=a&&a||(a=null),r=e.searchVFEcharts.startEndDate,""!=r&&r?(n=c(e.searchVFEcharts.startEndDate[0],e.searchVFEcharts.selectDateState),s=c(e.searchVFEcharts.startEndDate[1],e.searchVFEcharts.selectDateState)):(n=null,s=null),e.myChart.showLoading({text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.2)",zlevel:0}),t.next=7,e.$http.get("/system/operational_analysis/amountAnalysis",{params:{type:a,beginDate:n,endDate:s}});case 7:if(i=t.sent,o=i.data,"200"==o.state){for(u in e.myChart.hideLoading(),e.spotNameListLen=o.data.spotName.length,e.disabledInput=!1,e.sectionMessage=o.data.message[0],l=Object.assign({},o.data),console.log(l),d=[],l)isNaN(u)&&!isNaN(Date.parse(u))&&(console.log(u),d.push({name:u,type:"bar",stack:"Ad",emphasis:{focus:"series"},data:l[u]}));h=l["spotName"],e.option.xAxis[0].data=h,e.option.series=d,e.myChart.setOption(e.option)}return t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})))()},onDateChange:function(){"1"==this.searchValidateForm.selectDateState?this.dateType="monthrange":"2"==this.searchValidateForm.selectDateState&&(this.dateType="yearrange")},onSortChange:function(e){var t=e.column,a=e.prop,r=e.order;console.log(t,a,r),"ascending"==r?r="asc":"descending"==r&&(r="desc"),this.order=r?"".concat(a," ").concat(r):null,this.initTableData()},drawEcharts:function(){var e=this;this.myChart=this.$echarts.init(document.getElementById("myChart")),this.option={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},dataZoom:[{type:"inside",start:0,end:10},{type:"slider"}],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["温榆河公园","温榆河公园","温榆河公园","温榆河公园","温榆河公园","温榆河公园","温榆河公园"],axisLabel:{rotate:40}}],yAxis:[{type:"value",axisLabel:{formatter:"{value} 元"}}],series:[]},this.myChart.setOption(this.option),window.addEventListener("resize",(function(){e.myChart.resize()}))},getTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=[],r=[],a=[c(e.searchValidateForm.startEndDate[0],e.searchValidateForm.selectDateState),c(e.searchValidateForm.startEndDate[1],e.searchValidateForm.selectDateState)],r=[c(e.searchVF.startEndDate[0],e.searchVF.selectDateState),c(e.searchVF.startEndDate[1],e.searchVF.selectDateState)],e.searchValidateForm.selectDateState!=e.searchVF.selectDateState||a.toString()!=r.toString()){t.next=6;break}return t.abrupt("return");case 6:return e.searchVF.selectDateState=e.searchValidateForm.selectDateState,e.searchVF.startEndDate=e.searchValidateForm.startEndDate,console.log("调用接口"),t.next=11,e.initTableData();case 11:t.sent;case 12:case"end":return t.stop()}}),t)})))()},getEchartsData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=[],r=[],a=[c(e.searchValidateForm.startEndDate[0],e.searchValidateForm.selectDateState),c(e.searchValidateForm.startEndDate[1],e.searchValidateForm.selectDateState)],r=[c(e.searchVFEcharts.startEndDate[0],e.searchVFEcharts.selectDateState),c(e.searchVFEcharts.startEndDate[1],e.searchVFEcharts.selectDateState)],e.searchValidateForm.selectDateState!=e.searchVFEcharts.selectDateState||a.toString()!=r.toString()){t.next=6;break}return t.abrupt("return");case 6:return e.searchVFEcharts.selectDateState=e.searchValidateForm.selectDateState,e.searchVFEcharts.startEndDate=e.searchValidateForm.startEndDate,console.log("调用接口"),t.next=11,e.initEchartsData();case 11:t.sent;case 12:case"end":return t.stop()}}),t)})))()},addTableData:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.post("/system/operational_analysis/fitAdd",t.$qs.stringify(e));case 2:r=a.sent,n=r.data,"200"==n.state?(t.$message({message:n.msg,type:"success",offset:100,center:!0,duration:1e3}),t.initTableData(),t.initEchartsData()):t.$message({message:n.msg,type:"error",offset:100,center:!0,duration:3e3});case 5:case"end":return a.stop()}}),a)})))()},editTableData:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.post("/system/operational_analysis/fitEdit",t.$qs.stringify(e));case 2:r=a.sent,n=r.data,"200"==n.state?(t.$message({message:n.msg,type:"success",offset:100,center:!0,duration:1e3}),t.initTableData(),t.initEchartsData()):t.$message({message:n.msg,type:"error",offset:100,center:!0,duration:3e3});case 5:case"end":return a.stop()}}),a)})))()},deleteTableData:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.delete("/system/operational_analysis/fitDelete",{params:{id:e}});case 2:r=a.sent,r.data,t.initTableData(),t.initEchartsData();case 6:case"end":return a.stop()}}),a)})))()},onReset:function(){this.searchValidateForm.startEndDate=[new Date,new Date],this.searchValidateForm.selectDateState="1",this.dateType="monthrange",this.getTableData(),this.getEchartsData()},onStatGrossProfit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.showTable=!1,t.getEchartsData()}))},onExportReport:function(){var e=this;this.$nextTick((function(){var t=document.getElementById("exportReport");t.href=e.myChart.getDataURL()}))},onSetting:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.showTable=!0,t.getTableData()}))},onAdd:function(){this.dialogVisible=!0,this.dialogState="add"},editRow:function(e,t){console.log(e,t),this.dialogVisible=!0;var a=Object.assign({},t);this.validateForm={id:a.ID,begin:a.BEGIN,end:a.END},this.dialogState="edit"},deleteRow:function(e,t){var a=this;this.$confirm("此操作将永久删除该行数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.deleteTableData(t.ID),a.$message({type:"success",message:"删除成功!",offset:100,center:!0,duration:1e3})})).catch((function(){a.$message({type:"info",message:"已取消删除",offset:100,center:!0,duration:1e3})}))},dialogClose:function(){this.dialogVisible=!1,this.$refs.validateForm.resetFields(),this.getValidateForm()},handleClose:function(e){e(),this.$refs.validateForm.resetFields(),this.getValidateForm()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;console.log(t.validateForm),"add"==t.dialogState?(console.log("新增公司信息"),t.addTableData(t.validateForm)):"edit"==t.dialogState&&(console.log("编辑公司信息"),t.editTableData(t.validateForm)),t.dialogVisible=!1,t.$refs.validateForm.resetFields(),t.getValidateForm()}))},onCurrentChange:function(e){this.currentPage=e,this.initTableData()},onSizeChange:function(e){this.pageSize=e,this.initTableData()}},components:{},computed:{activeFixed:function(){return function(e){}},tableContentValue:function(){return function(e,t){var a="";return a="tb"!=t&&"hb"!=t||!e[t]?e[t]:e[t]+"%",a}},sortable:function(){return function(e){var t="";return t="spotName"!=e&&"机器人型号字段"!=e&&"运营模式字段"!=e&&"custom",t}}}},u=d,h=(a("6c00"),a("2877")),p=Object(h["a"])(u,i,o,!1,null,"2b24f7ae",null),f=p.exports,m={name:"App",components:{AmountAnalysis:f}},g=m,b=(a("5c0b"),Object(h["a"])(g,n,s,!1,null,null,null)),v=b.exports,y=a("2f62");r["default"].use(y["a"]);var D=new y["a"].Store({state:{},mutations:{},actions:{},modules:{}}),F=(a("9e1f"),a("450d"),a("6ed5")),w=a.n(F),S=(a("0fb7"),a("f529")),x=a.n(S),V=(a("be4f"),a("896a")),E=a.n(V),k=(a("826b"),a("c263")),T=a.n(k),C=(a("3db2"),a("58b8")),$=a.n(C),O=(a("eca7"),a("3787")),_=a.n(O),R=(a("425f"),a("4105")),j=a.n(R),N=(a("a7cc"),a("df33")),L=a.n(N),I=(a("672e"),a("101e")),M=a.n(I),P=(a("5466"),a("ecdf")),A=a.n(P),z=(a("38a0"),a("ad41")),q=a.n(z),B=(a("10cb"),a("f3ad")),G=a.n(B),J=(a("bdc7"),a("aa2f")),U=a.n(J),Y=(a("de31"),a("c69e")),Z=a.n(Y),H=(a("a673"),a("7b31")),K=a.n(H),Q=(a("adec"),a("3d2d")),W=a.n(Q),X=(a("6611"),a("e772")),ee=a.n(X),te=(a("1f1a"),a("4e4b")),ae=a.n(te),re=(a("1951"),a("eedf")),ne=a.n(re);r["default"].use(ne.a),r["default"].use(ae.a),r["default"].use(ee.a),r["default"].use(W.a),r["default"].use(K.a),r["default"].use(Z.a),r["default"].use(U.a),r["default"].use(G.a),r["default"].use(q.a),r["default"].use(A.a),r["default"].use(M.a),r["default"].use(L.a),r["default"].use(j.a),r["default"].use(_.a),r["default"].use($.a),r["default"].use(T.a),r["default"].use(E.a),r["default"].prototype.$message=x.a,r["default"].prototype.$confirm=w.a.confirm;var se=a("bc3a"),ie=a.n(se),oe=a("4328"),le=a.n(oe),ce=a("313e");ie.a.defaults.withCredentials=!0,r["default"].prototype.$http=ie.a,r["default"].prototype.$qs=le.a,r["default"].config.productionTip=!1,r["default"].prototype.$echarts=ce,new r["default"]({store:D,render:function(e){return e(v)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";a("9c0c")},"6c00":function(e,t,a){"use strict";a("de1c")},"9c0c":function(e,t,a){},de1c:function(e,t,a){}});
//# sourceMappingURL=app.acb3b978.js.map