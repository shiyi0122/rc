(function(e){function t(t){for(var r,o,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,s=1;s<a.length;s++){var l=a[s];0!==i[l]&&(r=!1)}r&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},i={app:0},n=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;n.push([1,"chunk-vendors"]),a()})({0:function(e,t){},"0e3f":function(e,t,a){},1:function(e,t,a){e.exports=a("56d7")},2:function(e,t){},2182:function(e,t,a){"use strict";a("0e3f")},3:function(e,t){},"332d":function(e,t,a){"use strict";a("e14a")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("asset-info")],1)},n=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"partner-company"},[a("el-container",[a("el-header",{staticClass:"header"},[a("el-form",{ref:"searchValidateForm",staticClass:"search-validate-form",attrs:{inline:!0,model:e.searchValidateForm,"label-width":"100px",rules:e.searchValidateFormRules}},[a("el-form-item",{attrs:{label:"",prop:"ascriptionCompanyId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择公司",clearable:""},on:{change:e.onChangeSearchCompany},model:{value:e.searchValidateForm.ascriptionCompanyId,callback:function(t){e.$set(e.searchValidateForm,"ascriptionCompanyId",t)},expression:"searchValidateForm.ascriptionCompanyId"}},e._l(e.searchCompanyOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.COMPANY_NAME,value:e.COMPANY_ID}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:"scenicSpotId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择景区",clearable:""},on:{change:e.onChangeSearchSpot},model:{value:e.searchValidateForm.scenicSpotId,callback:function(t){e.$set(e.searchValidateForm,"scenicSpotId",t)},expression:"searchValidateForm.scenicSpotId"}},e._l(e.searchScenicOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.SCENIC_SPOT_NAME,value:e.SCENIC_SPOT_ID}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:"robotCode"}},[a("el-input",{staticClass:"input-name",attrs:{placeholder:"机器人编号"},model:{value:e.searchValidateForm.robotCode,callback:function(t){e.$set(e.searchValidateForm,"robotCode",t)},expression:"searchValidateForm.robotCode"}})],1),a("el-form-item",{attrs:{label:"",prop:"robotModel"}},[a("el-input",{staticClass:"input-name",attrs:{placeholder:"机器人型号"},model:{value:e.searchValidateForm.robotModel,callback:function(t){e.$set(e.searchValidateForm,"robotModel",t)},expression:"searchValidateForm.robotModel"}})],1),a("el-form-item",{attrs:{label:"",prop:"equipmentStatus"}},[a("el-select",{attrs:{filterable:"",placeholder:"设备状态",clearable:""},on:{change:e.onChangeSearchEquipmentStatus},model:{value:e.searchValidateForm.equipmentStatus,callback:function(t){e.$set(e.searchValidateForm,"equipmentStatus",t)},expression:"searchValidateForm.equipmentStatus"}},e._l(e.searchEquipmentStatusOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:"netPrice"}},[a("el-input",{staticClass:"input-name",attrs:{placeholder:"净值"},model:{value:e.searchValidateForm.netPrice,callback:function(t){e.$set(e.searchValidateForm,"netPrice",t)},expression:"searchValidateForm.netPrice"}})],1)],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.onSearch("searchValidateForm")}}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-right"},on:{click:e.onReset}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.onAdd}},[e._v("添加")]),a("el-button",{attrs:{type:"primary",loading:e.downloadLoading,icon:"el-icon-download"},on:{click:e.exportExcel}},[e._v("导出Excel")]),a("a",{staticClass:"exportA",attrs:{id:"exportA",href:e.downloadUrl,download:""}}),a("el-upload",{ref:"uploadImport",attrs:{action:"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15",limit:1,"on-exceed":e.handleImportExceed,"on-change":e.handleImportChange,"show-file-list":!1,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","auto-upload":!1,"mr-3":"",flex:"","justify-end":""}},[a("el-button",{attrs:{type:"primary",loading:e.importLoading,icon:"el-icon-upload2"}},[e._v("导入EXCEL")])],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-s-data"},on:{click:function(t){return e.onDeviceStatistic()}}},[e._v("设备状态统计")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTable,expression:"showTable"}]},[a("el-main",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-cell-style":{background:"#f2f2f2",color:"#606266",height:"38px",padding:"0px"},"cell-style":{height:"38px",padding:"0"}}},[e._l(e.tableFields,(function(t,r){return a("el-table-column",{key:r,attrs:{prop:t,label:r,align:"center","min-width":"130",fixed:e.activeFixed(t)},scopedSlots:e._u([{key:"default",fn:function(r){return[a("div",[e._v(" "+e._s(e.tableContentValue(r.row,t))+" ")])]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"360"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.dispatchTrackRow(t.$index,t.row)}}},[e._v(" 调运轨迹 ")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.faultRecordRow(t.$index,t.row)}}},[e._v(" 故障记录 ")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.normalFaultRecordRow(t.$index,t.row)}}},[e._v(" 常规维修记录 ")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.repairRecordRow(t.$index,t.row)}}},[e._v(" 大维修记录 ")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.editRow(t.$index,t.row)}}},[e._v(" 编辑 ")])]}}])})],2),a("el-table",{staticClass:"table",staticStyle:{width:"100%",display:"none"},attrs:{id:"outTable",data:e.exportTableData,border:""}},e._l(e.tableFields,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e,label:t,"min-width":"130",align:"center"}})})),1)],1),a("el-footer",[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total, sizes, jumper",total:e.total,"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize},on:{"current-change":e.onCurrentChange,"size-change":e.onSizeChange}})],1)])],1),a("el-dialog",{staticClass:"dialog",attrs:{title:e.dialogTitle,visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"validateForm",staticClass:"demo-ruleForm",attrs:{model:e.validateForm,"label-width":"120px",rules:e.validateFormRules}},[a("el-form-item",{attrs:{label:"机器人编号",prop:"robotCode"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"机器人编号",clearable:"",disabled:"edit"==e.dialogState},on:{change:e.onChangeRobotId},model:{value:e.validateForm.robotCode,callback:function(t){e.$set(e.validateForm,"robotCode",t)},expression:"validateForm.robotCode"}},e._l(e.robotOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.robotCode,value:e.robotCode}})})),1)],1),a("el-form-item",{attrs:{label:"使用年限",prop:"serviceLife"}},[a("el-input",{attrs:{type:"text",placeholder:"使用年限"},model:{value:e.validateForm.serviceLife,callback:function(t){e.$set(e.validateForm,"serviceLife",t)},expression:"validateForm.serviceLife"}})],1),a("el-form-item",{attrs:{label:"主机出厂成本",prop:"factoryCost"}},[a("el-input",{attrs:{type:"text",placeholder:"主机出厂成本"},model:{value:e.validateForm.factoryCost,callback:function(t){e.$set(e.validateForm,"factoryCost",t)},expression:"validateForm.factoryCost"}})],1),a("el-form-item",{attrs:{label:"主机出厂日期",prop:"dateProduction"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"主机出厂日期","value-format":"yyyy-MM-dd"},model:{value:e.validateForm.dateProduction,callback:function(t){e.$set(e.validateForm,"dateProduction",t)},expression:"validateForm.dateProduction"}})],1),a("el-form-item",{attrs:{label:"设备状态",prop:"equipmentStatus"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"设备状态",clearable:""},on:{change:e.onChangeEquipmentStatus},model:{value:e.validateForm.equipmentStatus,callback:function(t){e.$set(e.validateForm,"equipmentStatus",t)},expression:"validateForm.equipmentStatus"}},e._l(e.equipmentStatusOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"机器人归属公司",prop:"ascriptionCompanyId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择公司",clearable:""},on:{change:e.onChangeCompany},model:{value:e.validateForm.ascriptionCompanyId,callback:function(t){e.$set(e.validateForm,"ascriptionCompanyId",t)},expression:"validateForm.ascriptionCompanyId"}},e._l(e.companyOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.COMPANY_NAME,value:e.COMPANY_ID.toString()}})})),1)],1)],1),a("div",{staticClass:"submit"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("validateForm")}}},[e._v("提交")]),a("el-button",{on:{click:e.dialogClose}},[e._v("取消")])],1)],1),a("el-dialog",{staticClass:"dialog",attrs:{title:"",visible:e.statisticDialogVisible,"before-close":e.handleCloseStatistic,center:"",top:"5vh"},on:{"update:visible":function(t){e.statisticDialogVisible=t}}},[a("div",{staticClass:"my-echarts"},[a("div",{attrs:{id:"myChart"}})])]),a("el-dialog",{staticClass:"dialog",attrs:{title:"",visible:e.dispatchTrackDialogVisible,"before-close":e.handleCloseDispatchTrack,center:"",top:"5vh","destroy-on-close":!0},on:{"update:visible":function(t){e.dispatchTrackDialogVisible=t}}},[a("dispatch-trail",{attrs:{list:e.dispatchTrackList,total:e.dispatchTrailTotal,"page-size":e.dispatchTrailPageSize},on:{"current-change":e.onDispatchTrackCurrentChange,"size-change":e.onDispatchTrackSizeChange}})],1),a("el-dialog",{staticClass:"dialog",attrs:{title:"",visible:e.failureRecordDialogVisible,"before-close":e.handleCloseFailureRecord,center:"",top:"5vh",width:"70%","destroy-on-close":!0},on:{"update:visible":function(t){e.failureRecordDialogVisible=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.failureRecordLoading,expression:"failureRecordLoading"}]},[a("iframe",{attrs:{id:"failureRecord",frameBorder:"0",title:"failureRecord",width:"100%",height:"700",src:e.failureRecordUrl},on:{load:e.onLoadFailureRepairRecord}})])]),a("el-dialog",{staticClass:"dialog",attrs:{title:"",visible:e.repairRecordDialogVisible,"before-close":e.handleCloseRepairRecord,center:"",top:"5vh",width:"70%","destroy-on-close":!0},on:{"update:visible":function(t){e.repairRecordDialogVisible=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.repairRecordLoading,expression:"repairRecordLoading"}]},[a("iframe",{attrs:{id:"repairRecord",frameBorder:"0",title:"repairRecord",width:"100%",height:"700",src:e.repairRecordUrl},on:{load:e.onLoadRepairRecord}})])]),a("el-dialog",{staticClass:"dialog",attrs:{title:"",visible:e.bigRepairRecordDialogVisible,"before-close":e.handleCloseBigRepairRecord,center:"",top:"5vh",width:"70%","destroy-on-close":!0},on:{"update:visible":function(t){e.bigRepairRecordDialogVisible=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.bigRepairRecordLoading,expression:"bigRepairRecordLoading"}]},[a("iframe",{attrs:{id:"bigRepairRecord",frameBorder:"0",title:"bigRepairRecord",width:"100%",height:"700",src:e.bigRepairRecordUrl},on:{load:e.onLoadBigRepairRecord}})])])],1)],1)},s=[],l=a("1da1"),c=a("5530");a("96cf"),a("a9e3"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("159b"),a("b680"),a("21a6"),a("1146"),a("25f0"),a("4d90");var u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.trailLoading,expression:"trailLoading"}],staticClass:"dispatch-trail"},[a("el-container",[a("el-main",{staticClass:"main-container"},[a("div",{staticClass:"main"},[a("el-steps",{staticClass:"steps",attrs:{direction:"vertical"}},e._l(e.list,(function(t,r){return a("el-step",{key:r,staticClass:"step",attrs:{status:"process"},scopedSlots:e._u([{key:"title",fn:function(){return[a("div",[a("span",[e._v(e._s(t.createDate))]),a("el-tag",{staticClass:"step-title-tag",attrs:{size:"small "}},[e._v(e._s(t.robotDispatchUsersName))]),a("span",[e._v("发起申请")]),a("span",{staticClass:"trial-detail-btn",on:{click:function(a){return e.detailRow(t.robotDispatchId)}}},[e._v("查看调运详情")])],1)]},proxy:!0},{key:"description",fn:function(){return[a("div",{staticClass:"step-description"},[a("div",{staticClass:"mb-10 mt-5"},[a("span",[e._v("从")]),a("b",[a("el-tag",{attrs:{size:"mini"}},[e._v(e._s(t.robotDispatchCallOutName))])],1),a("span",[e._v("调运至")]),a("b",[a("el-tag",{attrs:{size:"mini"}},[e._v(e._s(t.robotDispatchTransferInName))])],1)]),a("div",[a("el-timeline",[a("el-timeline-item",[a("span",[e._v("发车日期: "+e._s("待开发"))])]),a("el-timeline-item",[a("span",[e._v("到达日期: "+e._s("待开发"))])]),a("el-timeline-item",[a("span",[e._v("完成调运: "+e._s("待开发"))])])],1)],1)])]},proxy:!0}],null,!0)})})),1)],1)]),a("el-footer",[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total, sizes, jumper",total:e.total,"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize},on:{"current-change":e.onCurrentChange,"size-change":e.onSizeChange}})],1)]),a("el-dialog",{staticClass:"dialog",attrs:{title:"",visible:e.detailDialogVisible,"before-close":e.detailHandleClose,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.detailDialogVisible=t}}},[a("el-descriptions",{attrs:{title:"工厂发货详情信息",border:""}},e._l(e.detailTableList,(function(t,r){return a("el-descriptions-item",{key:r,attrs:{label:r}},["发货图片"==r||"收货图片"==r?[a("el-image",{staticStyle:{width:"100px"},attrs:{src:t,"preview-src-list":[t]}})]:[e._v(" "+e._s(t)+" ")]],2)})),1)],1)],1)],1)},d=[],p=(a("ac1f"),a("841c"),a("1276"),{name:"DispatchTrail",props:{total:{default:0},"page-size":{default:10},list:{type:Array,default:function(){return[]}}},data:function(){return{stepData:{},detailDialogVisible:!1,trailLoading:!1,detailTableList:[],currentPage:1}},created:function(){},mounted:function(){},updated:function(){this.$anime({targets:".steps .step",translateX:-150,delay:this.$anime.stagger(100)})},methods:{login:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/loginSystem?username=lijiazhao&password=lijiazhao");case 2:a=t.sent,a.data;case 4:case"end":return t.stop()}}),t)})))()},getTrailList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=window.location.search,r=a.split("=")[1],e.trailLoading=!0,t.next=5,e.$http.get("/system/factory_send/trailList",{params:{robotCode:r}});case 5:i=t.sent,n=i.data,e.stepData=n.data,e.trailLoading=!1;case 9:case"end":return t.stop()}}),t)})))()},detailTableDate:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,i,n,o,s,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=function(e){return function(t){"装车方式"==t?1==i.data[e]?n[t]="人工装车":2==i.data[e]?n[t]="叉车装车":n[t]="":"发货进度"==t?1==i.data[e]?n[t]="待发货":2==i.data[e]?n[t]="已发货":3==i.data[e]?n[t]="已收货":4==i.data[e]?n[t]="已关闭":n[t]="":n[t]=i.data[e]}},a.next=3,t.$http.get("/system/factory_send/detail",{params:{id:e}});case 3:r=a.sent,i=r.data,n={},a.t0=regeneratorRuntime.keys(i.data);case 7:if((a.t1=a.t0()).done){a.next=68;break}s=a.t1.value,l=o(s),a.t2=s,a.next="applicantName"===a.t2?13:"applicantTime"===a.t2?15:"carType"===a.t2?17:"comsignmentNotes"===a.t2?19:"consigneeName"===a.t2?21:"consigneePhone"===a.t2?23:"consignmentCount"===a.t2?25:"consignmentDate"===a.t2?27:"consignmentPicture"===a.t2?29:"consignorName"===a.t2?31:"driverName"===a.t2?33:"driverPhone"===a.t2?35:"factoryName"===a.t2?37:"license"===a.t2?39:"loadingCost"===a.t2?41:"loadingType"===a.t2?43:"receiningAddress"===a.t2?45:"receivingCount"===a.t2?47:"receivingDate"===a.t2?49:"receivingName"===a.t2?51:"receivingNotes"===a.t2?53:"receivingPicture"===a.t2?55:"receivingRobotCount"===a.t2?57:"robotCodes"===a.t2?59:"robotCount"===a.t2?61:"type"===a.t2?63:65;break;case 13:return l("申请人"),a.abrupt("break",66);case 15:return l("申请时间"),a.abrupt("break",66);case 17:return l("货车类型"),a.abrupt("break",66);case 19:return l("发货备注"),a.abrupt("break",66);case 21:return l("收货人"),a.abrupt("break",66);case 23:return l("收货人电话"),a.abrupt("break",66);case 25:return l("发货件数"),a.abrupt("break",66);case 27:return l("发货时间"),a.abrupt("break",66);case 29:return l("发货图片"),a.abrupt("break",66);case 31:return l("发货人"),a.abrupt("break",66);case 33:return l("驾驶员姓名"),a.abrupt("break",66);case 35:return l("驾驶员电话"),a.abrupt("break",66);case 37:return l("发货工厂"),a.abrupt("break",66);case 39:return l("车牌号"),a.abrupt("break",66);case 41:return l("运费"),a.abrupt("break",66);case 43:return l("装车方式"),a.abrupt("break",66);case 45:return l("收货地址"),a.abrupt("break",66);case 47:return l("收货数量"),a.abrupt("break",66);case 49:return l("收货时间"),a.abrupt("break",66);case 51:return l("收货景区"),a.abrupt("break",66);case 53:return l("收货备注"),a.abrupt("break",66);case 55:return l("收货图片"),a.abrupt("break",66);case 57:return l("收货机器人数量"),a.abrupt("break",66);case 59:return l("设备编码"),a.abrupt("break",66);case 61:return l("机器人数量"),a.abrupt("break",66);case 63:return l("发货进度"),a.abrupt("break",66);case 65:return a.abrupt("break",66);case 66:a.next=7;break;case 68:t.detailTableList=n;case 69:case"end":return a.stop()}}),a)})))()},detailRow:function(e){this.detailDialogVisible=!0,this.dialogState="detail",this.detailTableDate(e)},detailDialogClose:function(){this.detailDialogVisible=!1},detailHandleClose:function(e){e()},onCurrentChange:function(e){this.$emit("current-change",e)},onSizeChange:function(e){this.$emit("size-change",e)}},components:{}}),m=p,f=(a("2182"),a("2877")),h=Object(f["a"])(m,u,d,!1,null,"4723902c",null),b=h.exports,g={name:"SettlementFlow",data:function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,a,r){if(!a)return r(new Error(e+"不能为空"));Number(a)?r():r(new Error(e+"必须为数字值"))}}function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,a,r){if(!a)return r(new Error(e+"不能为空"));r()}}return{showTable:!0,feeInput:"",taxInput:"",searchFeeInput:"",searchTaxInput:"",tableFields:{"目前所在地":"scenicSpotName","机器人编号":"robotCode","机器人型号":"clientVersion","机器人批次号":"robotBatchNumber","出厂日期":"dateProduction","使用年限":"serviceLife","主机出厂成本/元":"factoryCost","累计折旧/元":"accumulate","净值/元":"netPrice","健康状态":"robotFaultState","设备状态":"equipmentStatus","机器人归属公司":"ascriptionCompanyName","当日运营时长/小时":"dayTime","当月运营时长/小时":"monthTime","当年运营时长/小时":"yearTime","累积运营时长/小时":"runTime","电池质保截止日期":"batteryWarrantyDeadline","机器人质保截止日期":"robotWarrantyDeadline","更新时间":"updateDate"},tableData:[],tableLoading:!1,searchCompanyOptions:[],searchScenicOptions:[],robotOptions:[],companyOptions:[],searchEquipmentStatusOptions:[{value:"20",label:"库存"},{value:"30",label:"运营"},{value:"40",label:"报废"}],equipmentStatusOptions:[{value:"20",label:"库存"},{value:"30",label:"运营"},{value:"40",label:"报废"}],exportTableData:[],downloadLoading:!1,importLoading:!1,currentPage:1,pageSize:10,total:0,dialogVisible:!1,dialogState:"",selectDateState:"1",dateType:"monthrange",valueFormat:"yyyy-MM-dd",searchValidateForm:{},validateForm:{},searchPartnerCompanyName:"",searchScenicName:"",searchSelectDateState:"1",searchStartEndDate:"",searchPayState:"",companys:[],companyState:"",scenics:[],scenicState:"",downloadUrl:"",myChart:null,markLineData:[],option:{},statisticsStateList:[],dialogTitle:"",robotId:"",statisticDialogVisible:!1,dispatchTrackList:[],dispatchTrackDialogVisible:!1,dispatchTrackLoading:!1,dispatchTrailCurrentPage:1,dispatchTrailTotal:0,dispatchTrailPageSize:10,currentRobotCode:"",failureRecordDialogVisible:!1,failureRecordUrl:"",failureRecordLoading:!1,repairRecordDialogVisible:!1,repairRecordUrl:"",repairRecordLoading:!1,bigRepairRecordDialogVisible:!1,bigRepairRecordUrl:"",bigRepairRecordLoading:!1,searchValidateFormRules:{},validateFormRules:{serviceLife:[{validator:e("使用年限"),trigger:["blur","change"]}],factoryCost:[{validator:e("主机出厂成本"),trigger:["blur","change"]}],dateProduction:[{validator:t("主机出厂日期"),trigger:["blur","change"]}],equipmentStatus:[{validator:t("设备状态"),trigger:["blur","change"]}],ascriptionCompanyId:[{validator:t("机器人归属公司"),trigger:["blur","change"]}]}}},created:function(){this.getSearchValidateForm(),this.getValidateForm(),this.getCompanyList(),this.getScenicList(),this.initTableData(),this.getRobotIdList(),this.getStatisticsStateList()},beforeMount:function(){},mounted:function(){},methods:{getSearchValidateForm:function(){var e={};for(var t in this.tableFields)e[this.tableFields[t]]="";this.searchValidateForm=Object(c["a"])(Object(c["a"])({},e),{},{ascriptionCompanyId:"",scenicSpotId:""})},getValidateForm:function(){var e={};for(var t in this.tableFields)e[this.tableFields[t]]="";this.validateForm=e},login:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/loginSystem?username=lijiazhao&password=lijiazhao");case 2:a=t.sent,a.data;case 4:case"end":return t.stop()}}),t)})))()},getCompanyList:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e||(e=null),a.next=3,t.$http.get("/system/robot_time_statistics/companyList",{params:{spotId:e}});case 3:if(r=a.sent,i=r.data,"200"!=i.state){a.next=11;break}return t.searchCompanyOptions=i.data,t.companyOptions=i.data,a.abrupt("return",i);case 11:return a.abrupt("return");case 12:case"end":return a.stop()}}),a)})))()},getScenicList:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e||(e=null),a.next=3,t.$http.get("/system/robot_time_statistics/spotList",{params:{companyId:e}});case 3:if(r=a.sent,i=r.data,"200"!=i.state){a.next=10;break}return t.searchScenicOptions=i.data,a.abrupt("return",i);case 10:return a.abrupt("return");case 11:case"end":return a.stop()}}),a)})))()},initTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,t.next=3,e.$http.get("/system/robotSoftAssetInformation/getRobotSoftAssetInformationList",{params:Object(c["a"])(Object(c["a"])({},e.searchValidateForm),{},{pageNum:e.currentPage,pageSize:e.pageSize})});case 3:if(a=t.sent,r=a.data,200==r.code){t.next=8;break}return e.$message({type:"error",message:"请求失败！"}),t.abrupt("return");case 8:e.tableData=r.list,e.total=r.totals,e.tableLoading=!1;case 11:case"end":return t.stop()}}),t)})))()},addTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/system/robotSoftAssetInformation/addRobotSoftAssetInformation",e.validateForm);case 2:a=t.sent,r=a.data,"200"==r.state?(e.$message({message:r.msg,type:"success",offset:100,center:!0,duration:1e3}),e.initTableData(),e.$refs.validateForm.resetFields()):e.$message({message:r.msg,type:"error",offset:100,center:!0,duration:3e3});case 5:case"end":return t.stop()}}),t)})))()},editTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/system/robotSoftAssetInformation/editRobotSoftAssetInformation",e.validateForm);case 2:a=t.sent,r=a.data,"200"==r.state?(e.$message({message:r.msg,type:"success",offset:100,center:!0,duration:1e3}),e.initTableData()):e.$message({message:r.msg,type:"error",offset:100,center:!0,duration:3e3});case 5:case"end":return t.stop()}}),t)})))()},delTableData:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e),a.next=3,t.$http.delete("/system/robotSoftAssetInformation/delRobotSoftAssetInformation",{params:{softAssetInformationId:e}});case 3:r=a.sent,i=r.data,"200"==i.state?(t.$message({message:i.msg,type:"success",offset:100,center:!0,duration:1e3}),t.initTableData()):t.$message({message:i.msg,type:"error",offset:100,center:!0,duration:3e3});case 6:case"end":return a.stop()}}),a)})))()},getExportTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/system/robotSoftAssetInformation/uploadExcelRobotSoftAssetInformation",Object(c["a"])({},e.searchValidateForm),{responseType:"arraybuffer"});case 2:a=t.sent,r=a.data,i=window.URL.createObjectURL(new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),n=document.createElement("a"),console.log(i),n.href=i,n.download="机器人资产信息",n.click(),e.downloadLoading=!1;case 11:case"end":return t.stop()}}),t)})))()},importE:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.importLoading=!0,r=new FormData,r.append("file",e),a.next=5,t.$http.post("/system/robotSoftAssetInformation/importExcel",r);case 5:i=a.sent,n=i.data,t.importLoading=!1,"200"==n.state?(t.$message({message:"导入成功！",type:"success"}),t.initTableData()):t.$message({message:n.msg,type:"error"});case 9:case"end":return a.stop()}}),a)})))()},getRobotIdList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/system/robot/getRobotIdList");case 2:if(a=t.sent,r=a.data,200==r.state){t.next=7;break}return e.$message({message:"获取机器人列表失败！",type:"error"}),t.abrupt("return");case 7:e.robotOptions=r.data;case 8:case"end":return t.stop()}}),t)})))()},getSysDepositLogList:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e&&(t.currentRobotCode=e),a.next=3,t.$http.get("/system/robotSoftAssetInformation/getSysDepositLogList",{params:{pageNum:1,pageSize:10,robotCode:t.currentRobotCode}});case 3:if(r=a.sent,i=r.data,200==i.code){a.next=8;break}return t.$message({message:"获取调运轨迹失败！",type:"error"}),a.abrupt("return");case 8:t.dispatchTrackList=i.list,t.dispatchTrailTotal=i.totals;case 10:case"end":return a.stop()}}),a)})))()},getStatisticsStateList:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/system/robotSoftAssetInformation/StatisticsState");case 2:if(a=e.sent,r=a.data,console.log(r),200==r.state){e.next=8;break}return t.$message({message:"获取故障记录失败！",type:"error"}),e.abrupt("return");case 8:t.statisticsStateList=r.data;case 9:case"end":return e.stop()}}),e)})))()},drawEcharts:function(){var e=this;this.myChart=this.$echarts.init(document.getElementById("myChart")),this.option={title:{text:"设备状态统计",subtext:"",left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"设备状态统计",type:"pie",radius:"50%",data:this.statisticsStateList,label:{formatter:"{b}, {d}%"},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},this.myChart.setOption(this.option),window.addEventListener("resize",(function(){e.myChart.resize()}))},onChangeSearchCompany:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,i,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.getScenicList(e);case 2:if(r=a.sent,i=r.data,t.searchScenicOptions=i,0!=i.length){a.next=8;break}return t.searchValidateForm.scenicSpotId="",a.abrupt("return");case 8:n=!1,i.forEach((function(e){e.SCENIC_SPOT_ID!=t.searchValidateForm.scenicSpotId||(n=!0)})),o=i[0].SCENIC_SPOT_ID,e&&!n&&(t.searchValidateForm.scenicSpotId=o);case 12:case"end":return a.stop()}}),a)})))()},onChangeSearchSpot:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.getCompanyList(e);case 2:if(r=a.sent,i=r.data,0!=i.length){a.next=7;break}return t.searchValidateForm.ascriptionCompanyId="",a.abrupt("return");case 7:n=!1,i.forEach((function(e){e.COMPANY_ID!=t.searchValidateForm.ascriptionCompanyId||(n=!0)})),e&&!n&&(t.searchValidateForm.ascriptionCompanyId=i[0].COMPANY_ID);case 10:case"end":return a.stop()}}),a)})))()},onReset:function(){this.getSearchValidateForm(),this.getValidateForm(),this.currentPage=1,this.initTableData(),this.getCompanyList(),this.getScenicList()},onStatGrossProfit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.showTable=!1,t.myChart.showLoading({text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.2)",zlevel:0}),t.initTableData()}))},onExportReport:function(){var e=this;this.$nextTick((function(){var t=document.getElementById("exportReport");t.href=e.myChart.getDataURL()}))},onSearch:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.showTable=!0,t.initTableData()}))},exportExcel:function(){var e=this;this.$confirm("确认导出Excel表格?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.downloadLoading=!0,t.next=3,e.getExportTableData();case 3:e.$message({type:"success",message:"已成功导出Excel表格！",offset:100,center:!0,duration:1e3});case 4:case"end":return t.stop()}}),t)})))).catch((function(){e.downloadLoading=!1,e.$message({type:"info",message:"已取消导出Excel表格",offset:100,center:!0,duration:1e3})}))},handleBeforeUpload:function(e){this.importLoading=!0},handleImportSuccess:function(){this.importLoading=!1,this.$message({type:"success",message:"已成功导入Excel表格！",offset:100,center:!0,duration:1e3})},onDeviceStatistic:function(){var e=this;this.statisticDialogVisible=!0,this.$nextTick((function(){e.drawEcharts()}))},onAdd:function(){this.dialogVisible=!0,this.dialogState="add",this.dialogTitle="新增机器人资产信息"},dispatchTrackRow:function(e,t){this.dispatchTrackDialogVisible=!0,this.getSysDepositLogList(t.robotCode)},faultRecordRow:function(e,t){this.failureRecordDialogVisible=!0,this.failureRecordLoading=!0,this.failureRecordUrl="/page/assetsSystem/robotErrorRecords/html/robotErrorRecordsList.html?robotCode=".concat(t.robotCode)},normalFaultRecordRow:function(e,t){this.repairRecordDialogVisible=!0,this.repairRecordLoading=!0,this.repairRecordUrl="/page/assetsSystem/robotServiceRecords/html/robotServiceRecordsList.html?robotCode=".concat(t.robotCode)},repairRecordRow:function(e,t){this.bigRepairRecordDialogVisible=!0,this.bigRepairRecordLoading=!0,this.bigRepairRecordUrl="/page/assetsSystem/substituteApplySystem/index.html?robotCode=".concat(t.robotCode)},editRow:function(e,t){this.dialogVisible=!0;var a=Object.assign({},t);this.validateForm=a,this.dialogState="edit",this.dialogTitle="编辑机器人资产信息"},delRow:function(e,t){var a=this,r=t.softAssetInformationId;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.delTableData(r)})).catch((function(){a.$message({type:"info",message:"已取消删除",offset:100,center:!0,duration:1e3})}))},dialogClose:function(){this.dialogVisible=!1,this.$refs.validateForm.resetFields(),this.getValidateForm()},handleClose:function(e){e(),this.$refs.validateForm.resetFields(),this.getValidateForm()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;"add"==t.dialogState?(console.log("新增公司信息"),t.addTableData()):"edit"==t.dialogState&&(console.log("编辑公司信息"),t.editTableData()),t.$refs.validateForm.resetFields(),t.getValidateForm(),t.dialogVisible=!1}))},onCurrentChange:function(e){this.currentPage=e,this.initTableData()},onSizeChange:function(e){this.pageSize=e,this.initTableData()},onChangeSearchEquipmentStatus:function(e){},onChangeEquipmentStatus:function(e){console.log(e)},onChangeRobotId:function(e){var t=this;this.robotOptions.forEach((function(a){a.robotCode==e&&(t.validateForm.robotId=a.robotId)}))},onChangeCompany:function(e){var t=this;this.companyOptions.forEach((function(a){a.COMPANY_ID==e&&(t.validateForm.ascriptionCompanyName=a.COMPANY_NAME)}))},handleCloseStatistic:function(){this.statisticDialogVisible=!1},handleCloseDispatchTrack:function(){this.dispatchTrackDialogVisible=!1},onDispatchTrackCurrentChange:function(e){this.dispatchTrailCurrentPage=e,this.getSysDepositLogList()},onDispatchTrackSizeChange:function(e){this.dispatchTrailPageSize=e,this.getSysDepositLogList()},handleCloseFailureRecord:function(){this.failureRecordDialogVisible=!1,this.bigRepairRecordLoading=!1},handleCloseRepairRecord:function(){this.repairRecordDialogVisible=!1,this.repairRecordLoading=!1},handleCloseBigRepairRecord:function(){this.bigRepairRecordDialogVisible=!1},onLoadFailureRepairRecord:function(){this.failureRecordLoading=!1},onLoadRepairRecord:function(){this.repairRecordLoading=!1},onLoadBigRepairRecord:function(){this.bigRepairRecordLoading=!1},handleImportExceed:function(e){this.$refs.uploadImport.clearFiles(),this.$refs.uploadImport.submit(e)},handleImportChange:function(e,t){console.log(e),this.importE(e.raw)}},components:{DispatchTrail:b},computed:{activeFixed:function(){return function(e){if("合作主体"==e||"scenicSpotName"==e||"robotCode"==e)return"left"}},tableContentValue:function(){return function(e,t){var a="";return a="netPrice"==t?e[t]||0:"robotFaultState"==t?"10"==e[t]?"健康":"不健康":"equipmentStatus"==t?"10"==e[t]?"在产":"20"==e[t]?"库存":"30"==e[t]?"运营":"40"==e[t]?"报废":"无":"accumulate"==t||"netPrice"==t?e[t]&&e[t].toFixed(2):"dayTime"==t||"monthTime"==t||"yearTime"==t||"runTime"==t?!isNaN(e[t])&&(e[t]/60).toFixed(2)||0:e[t]||"无",a}}}},v=g,y=(a("332d"),Object(f["a"])(v,o,s,!1,null,"357da266",null)),C=y.exports,R={name:"App",components:{AssetInfo:C}},w=R,S=(a("5c0b"),Object(f["a"])(w,i,n,!1,null,null,null)),x=S.exports,k=a("2f62");r["default"].use(k["a"]);var F=new k["a"].Store({state:{},mutations:{},actions:{},modules:{}}),D=(a("9e1f"),a("450d"),a("6ed5")),L=a.n(D),T=(a("0fb7"),a("f529")),V=a.n(T),_=(a("fb08"),a("21e5")),O=a.n(_),I=(a("2f02"),a("fe11")),$=a.n(I),E=(a("ed7b"),a("e1a5")),P=a.n(E),N=(a("cbb5"),a("8bbc")),j=a.n(N),z=(a("9c49"),a("6640")),A=a.n(z),M=(a("d2ac"),a("95b0")),q=a.n(M),B=(a("f225"),a("89a9")),U=a.n(B),Y=(a("be4f"),a("896a")),X=a.n(Y),H=(a("826b"),a("c263")),J=a.n(H),W=(a("3db2"),a("58b8")),G=a.n(W),K=(a("eca7"),a("3787")),Q=a.n(K),Z=(a("425f"),a("4105")),ee=a.n(Z),te=(a("a7cc"),a("df33")),ae=a.n(te),re=(a("672e"),a("101e")),ie=a.n(re),ne=(a("5466"),a("ecdf")),oe=a.n(ne),se=(a("38a0"),a("ad41")),le=a.n(se),ce=(a("10cb"),a("f3ad")),ue=a.n(ce),de=(a("bdc7"),a("aa2f")),pe=a.n(de),me=(a("de31"),a("c69e")),fe=a.n(me),he=(a("a673"),a("7b31")),be=a.n(he),ge=(a("adec"),a("3d2d")),ve=a.n(ge),ye=(a("6611"),a("e772")),Ce=a.n(ye),Re=(a("1f1a"),a("4e4b")),we=a.n(Re),Se=(a("1951"),a("eedf")),xe=a.n(Se);r["default"].use(xe.a),r["default"].use(we.a),r["default"].use(Ce.a),r["default"].use(ve.a),r["default"].use(be.a),r["default"].use(fe.a),r["default"].use(pe.a),r["default"].use(ue.a),r["default"].use(le.a),r["default"].use(oe.a),r["default"].use(ie.a),r["default"].use(ae.a),r["default"].use(ee.a),r["default"].use(Q.a),r["default"].use(G.a),r["default"].use(J.a),r["default"].use(X.a),r["default"].use(U.a),r["default"].use(q.a),r["default"].use(A.a),r["default"].use(j.a),r["default"].use(P.a),r["default"].use($.a),r["default"].use(O.a),r["default"].prototype.$message=V.a,r["default"].prototype.$confirm=L.a.confirm;var ke=a("bc3a"),Fe=a.n(ke),De=a("313e"),Le=a("1209");Fe.a.defaults.withCredentials=!0,r["default"].prototype.$http=Fe.a,r["default"].config.productionTip=!1,r["default"].prototype.$echarts=De,r["default"].prototype.$anime=Le["a"],new r["default"]({store:F,render:function(e){return e(x)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";a("9c0c")},"9c0c":function(e,t,a){},e14a:function(e,t,a){}});
//# sourceMappingURL=app.2683f538.js.map