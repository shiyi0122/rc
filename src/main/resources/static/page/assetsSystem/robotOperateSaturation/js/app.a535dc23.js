(function(e){function t(t){for(var n,s,i=t[0],c=t[1],u=t[2],d=0,f=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(f.length)f.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={app:0},o=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;o.push([1,"chunk-vendors"]),a()})({0:function(e,t){},1:function(e,t,a){e.exports=a("56d7")},2:function(e,t){},"2c8d":function(e,t,a){"use strict";a("4f36")},3:function(e,t){},"4f36":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("saturation")],1)},o=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"partner-company"},[a("el-container",[a("el-header",{staticClass:"header"},[a("el-form",{ref:"searchValidateForm",staticClass:"search-validate-form",attrs:{inline:!0,model:e.searchValidateForm,"label-width":"100px",rules:e.searchValidateFormRules}},[a("el-form-item",{attrs:{label:"",prop:"spotId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择景区",clearable:""},model:{value:e.searchValidateForm.spotId,callback:function(t){e.$set(e.searchValidateForm,"spotId",t)},expression:"searchValidateForm.spotId"}},e._l(e.searchScenicOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.SCENIC_SPOT_NAME,value:e.SCENIC_SPOT_ID}})})),1)],1)],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.onSearch("searchValidateForm")}}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-right"},on:{click:e.onReset}},[e._v("重置")])],1),a("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"表格",name:"table"}},[a("el-main",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-cell-style":{background:"#f2f2f2",color:"#606266",height:"38px",padding:"0px"},"cell-style":{height:"38px",padding:"0"},"summary-method":e.getSummaries,"show-summary":""}},e._l(e.tableFields,(function(t,n){return a("el-table-column",{key:n,attrs:{prop:t,label:n,align:"center","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(n){return[a("div",[e._v(" "+e._s(e.tableContentValue(n.row,t))+" ")])]}}],null,!0)})})),1),a("el-table",{staticClass:"table",staticStyle:{width:"100%",display:"none"},attrs:{id:"outTable",data:e.exportTableData,border:""}},e._l(e.tableFields,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e,label:t,"min-width":"130",align:"center"}})})),1)],1),a("el-footer",[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total, sizes, jumper",total:e.total,"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize},on:{"current-change":e.onCurrentChange,"size-change":e.onSizeChange}})],1)])],1),a("el-tab-pane",{attrs:{label:"图表",name:"echarts"}},[a("div",{staticClass:"my-echarts"},[a("div",{attrs:{id:"myChart"}})])])],1)],1)],1)},i=[],c=a("5530"),u=a("1da1");a("96cf"),a("a9e3"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("d81d"),a("b680"),a("159b"),a("21a6"),a("1146"),a("25f0"),a("4d90");var l={name:"SettlementFlow",data:function(){return{showTable:!0,feeInput:"",taxInput:"",searchFeeInput:"",searchTaxInput:"",tableFields:{"景区名称":"SCENIC_SPOT_NAME","机器人总数量":"sum","机器人在线数量":"nowsum","机器人运营饱和度":"saturation"},tableData:[],tableLoading:!1,searchCompanyOptions:[],searchScenicOptions:[],robotOptions:[],companyOptions:[],searchEquipmentStatusOptions:[{value:"10",label:"在产"},{value:"20",label:"库存"},{value:"30",label:"运营"},{value:"40",label:"报废"}],equipmentStatusOptions:[{value:"10",label:"在产"},{value:"20",label:"库存"},{value:"30",label:"运营"},{value:"40",label:"报废"}],exportTableData:[],downloadLoading:!1,importLoading:!1,currentPage:1,pageSize:10,total:0,dialogVisible:!1,dialogState:"",selectDateState:"1",dateType:"monthrange",valueFormat:"yyyy-MM-dd",searchValidateForm:{},validateForm:{},searchPartnerCompanyName:"",searchScenicName:"",searchSelectDateState:"1",searchStartEndDate:"",searchPayState:"",companys:[],companyState:"",scenics:[],scenicState:"",downloadUrl:"",myChart:null,markLineData:[],option:{},statisticsStateList:[],dialogTitle:"",robotId:"",statisticDialogVisible:!1,dispatchTrackList:[],dispatchTrackDialogVisible:!1,dispatchTrailCurrentPage:1,dispatchTrailTotal:0,dispatchTrailPageSize:10,currentRobotCode:"",errorRecordsList:[],sumTotal:0,nowsumTotal:0,saturationTotal:0,activeName:"table",xAxisData:[],saturationData:[],searchValidateFormRules:{},validateFormRules:{}}},created:function(){this.getSearchValidateForm(),this.getCompanyList(),this.getScenicList(),this.initTableData(),this.getRobotIdList()},beforeMount:function(){},mounted:function(){this.getOperateSaturationLineChart()},methods:{getSearchValidateForm:function(){var e={};for(var t in this.tableFields)e[this.tableFields[t]]="";this.searchValidateForm={spotId:""}},login:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/loginSystem?username=lijiazhao&password=lijiazhao");case 2:a=t.sent,a.data;case 4:case"end":return t.stop()}}),t)})))()},getCompanyList:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e||(e=null),a.next=3,t.$http.get("/system/robot_time_statistics/companyList",{params:{spotId:e}});case 3:if(n=a.sent,r=n.data,"200"!=r.state){a.next=11;break}return t.searchCompanyOptions=r.data,t.companyOptions=r.data,a.abrupt("return",r);case 11:return a.abrupt("return");case 12:case"end":return a.stop()}}),a)})))()},getScenicList:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e||(e=null),a.next=3,t.$http.get("/system/robot_time_statistics/spotList",{params:{companyId:e}});case 3:if(n=a.sent,r=n.data,"200"!=r.state){a.next=10;break}return t.searchScenicOptions=r.data,a.abrupt("return",r);case 10:return a.abrupt("return");case 11:case"end":return a.stop()}}),a)})))()},initTableData:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,t.next=3,e.$http.get("/system/operateSaturation/getOperateSaturationList",{params:Object(c["a"])(Object(c["a"])({},e.searchValidateForm),{},{pageNum:e.currentPage,pageSize:e.pageSize})});case 3:if(a=t.sent,n=a.data,200==n.state){t.next=8;break}return e.$message({type:"error",message:"请求失败！"}),t.abrupt("return");case 8:e.tableData=n.data,e.total=n.total,r=JSON.parse(n.type),e.sumTotal=r.sum,e.nowsumTotal=r.nowsum,e.saturationTotal=r.saturation,e.tableLoading=!1;case 15:case"end":return t.stop()}}),t)})))()},addTableData:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/system/robotSoftAssetInformation/addRobotSoftAssetInformation",e.validateForm);case 2:a=t.sent,n=a.data,"200"==n.state?(e.$message({message:n.msg,type:"success",offset:100,center:!0,duration:1e3}),e.initTableData(),e.$refs.validateForm.resetFields()):e.$message({message:n.msg,type:"error",offset:100,center:!0,duration:3e3});case 5:case"end":return t.stop()}}),t)})))()},editTableData:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/system/robotSoftAssetInformation/editRobotSoftAssetInformation",e.validateForm);case 2:a=t.sent,n=a.data,"200"==n.state?(e.$message({message:n.msg,type:"success",offset:100,center:!0,duration:1e3}),e.initTableData()):e.$message({message:n.msg,type:"error",offset:100,center:!0,duration:3e3});case 5:case"end":return t.stop()}}),t)})))()},delTableData:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e),a.next=3,t.$http.delete("/system/robotSoftAssetInformation/delRobotSoftAssetInformation",{params:{softAssetInformationId:e}});case 3:n=a.sent,r=n.data,"200"==r.state?(t.$message({message:r.msg,type:"success",offset:100,center:!0,duration:1e3}),t.initTableData()):t.$message({message:r.msg,type:"error",offset:100,center:!0,duration:3e3});case 6:case"end":return a.stop()}}),a)})))()},getExportTableData:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/system/robotSoftAssetInformation/uploadExcelRobotSoftAssetInformation",{},{responseType:"arraybuffer"});case 2:a=t.sent,n=a.data,r=window.URL.createObjectURL(new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),o=document.createElement("a"),console.log(r),o.href=r,o.click(),e.downloadLoading=!1;case 10:case"end":return t.stop()}}),t)})))()},getRobotIdList:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/system/robot/getRobotIdList");case 2:if(a=t.sent,n=a.data,200==n.state){t.next=7;break}return e.$message({message:"获取机器人列表失败！",type:"error"}),t.abrupt("return");case 7:e.robotOptions=n.data;case 8:case"end":return t.stop()}}),t)})))()},getOperateSaturationLineChart:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/system/operateSaturation/getOperateSaturationLineChart",{params:Object(c["a"])({},e.searchValidateForm)});case 2:a=t.sent,n=a.data,e.xAxisData=n.list,e.saturationData=n.data.map((function(e){return(100*e).toFixed(2)})),e.drawEcharts();case 7:case"end":return t.stop()}}),t)})))()},onChangeSearchCompany:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var n,r,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.getScenicList(e);case 2:if(n=a.sent,r=n.data,t.searchScenicOptions=r,0!=r.length){a.next=8;break}return t.searchValidateForm.spotId="",a.abrupt("return");case 8:o=!1,r.forEach((function(e){e.SCENIC_SPOT_ID!=t.searchValidateForm.spotId||(o=!0)})),s=r[0].SCENIC_SPOT_ID,e&&!o&&(t.searchValidateForm.spotId=s);case 12:case"end":return a.stop()}}),a)})))()},onChangeSearchSpot:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var n,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.getCompanyList(e);case 2:if(n=a.sent,r=n.data,0!=r.length){a.next=7;break}return t.searchValidateForm.ascriptionCompanyId="",a.abrupt("return");case 7:o=!1,r.forEach((function(e){e.COMPANY_ID!=t.searchValidateForm.ascriptionCompanyId||(o=!0)})),e&&!o&&(t.searchValidateForm.ascriptionCompanyId=r[0].COMPANY_ID);case 10:case"end":return a.stop()}}),a)})))()},onReset:function(){this.getSearchValidateForm(),this.currentPage=1,this.initTableData(),this.getCompanyList(),this.getScenicList()},onStatGrossProfit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.showTable=!1,t.myChart.showLoading({text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.2)",zlevel:0}),t.initTableData()}))},onExportReport:function(){var e=this;this.$nextTick((function(){var t=document.getElementById("exportReport");t.href=e.myChart.getDataURL()}))},onSearch:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.showTable=!0,t.initTableData(),t.getOperateSaturationLineChart()}))},exportExcel:function(){var e=this;this.$confirm("确认导出Excel表格?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.downloadLoading=!0,t.next=3,e.getExportTableData();case 3:e.$message({type:"success",message:"已成功导出Excel表格！",offset:100,center:!0,duration:1e3});case 4:case"end":return t.stop()}}),t)})))).catch((function(){e.downloadLoading=!1,e.$message({type:"info",message:"已取消导出Excel表格",offset:100,center:!0,duration:1e3})}))},handleBeforeUpload:function(e){this.importLoading=!0},handleImportSuccess:function(){this.importLoading=!1,this.$message({type:"success",message:"已成功导入Excel表格！",offset:100,center:!0,duration:1e3})},onAdd:function(){this.dialogVisible=!0,this.dialogState="add",this.dialogTitle="新增机器人资产信息"},editRow:function(e,t){this.dialogVisible=!0;var a=Object.assign({},t);this.validateForm=a,this.dialogState="edit",this.dialogTitle="编辑机器人资产信息"},delRow:function(e,t){var a=this,n=t.softAssetInformationId;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.delTableData(n)})).catch((function(){a.$message({type:"info",message:"已取消删除",offset:100,center:!0,duration:1e3})}))},dialogClose:function(){this.dialogVisible=!1,this.$refs.validateForm.resetFields()},handleClose:function(e){e(),this.$refs.validateForm.resetFields()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;"add"==t.dialogState?(console.log("新增公司信息"),t.addTableData()):"edit"==t.dialogState&&(console.log("编辑公司信息"),t.editTableData()),t.$refs.validateForm.resetFields(),t.dialogVisible=!1}))},onCurrentChange:function(e){this.currentPage=e,this.initTableData()},onSizeChange:function(e){this.pageSize=e,this.initTableData()},onChangeSearchEquipmentStatus:function(e){},onChangeEquipmentStatus:function(e){console.log(e)},onChangeRobotId:function(e){console.log(e)},onChangeCompany:function(e){console.log(e)},getSummaries:function(e){var t=this,a=e.columns,n=(e.data,[]);return a.forEach((function(e,a){0!==a?1===a?n[a]=t.sumTotal||0:2===a?n[a]=t.nowsumTotal||0:3===a&&(n[a]="".concat(t.saturationTotal&&(100*t.saturationTotal).toFixed(2)||0,"%")):n[a]="统计"})),n},handleTabClick:function(e,t){console.log(e,t)},drawEcharts:function(){var e=this;this.myChart=this.$echarts.init(document.getElementById("myChart")),this.option={tooltip:{trigger:"axis"},legend:{data:["机器人运营饱和度"],top:0},xAxis:{type:"category",data:this.xAxisData},yAxis:{name:"机器人运行饱和度（%）",type:"value",axisLabel:{formatter:"{value}%"}},series:[{name:"机器人运营饱和度",data:this.saturationData,type:"line",tooltip:{valueFormatter:function(e){return e+" %"}}}]},this.myChart.setOption(this.option),window.addEventListener("resize",(function(){e.myChart.resize()}))}},components:{},computed:{tableContentValue:function(){return function(e,t){var a="";return a="saturation"==t?"".concat((100*e[t]).toFixed(2),"%"):e[t],a}}}},d=l,f=(a("2c8d"),a("2877")),p=Object(f["a"])(d,s,i,!1,null,"7be57928",null),m=p.exports,h={name:"App",components:{Saturation:m}},g=h,b=(a("5c0b"),Object(f["a"])(g,r,o,!1,null,null,null)),v=b.exports,y=a("2f62");n["default"].use(y["a"]);var w=new y["a"].Store({state:{},mutations:{},actions:{},modules:{}}),x=(a("9e1f"),a("450d"),a("6ed5")),S=a.n(x),C=(a("0fb7"),a("f529")),T=a.n(C),O=(a("e612"),a("dd87")),R=a.n(O),F=(a("075a"),a("72aa")),I=a.n(F),k=(a("fb08"),a("21e5")),$=a.n(k),D=(a("2f02"),a("fe11")),L=a.n(D),_=(a("ed7b"),a("e1a5")),j=a.n(_),E=(a("cbb5"),a("8bbc")),V=a.n(E),P=(a("9c49"),a("6640")),A=a.n(P),N=(a("d2ac"),a("95b0")),z=a.n(N),M=(a("f225"),a("89a9")),B=a.n(M),U=(a("be4f"),a("896a")),q=a.n(U),J=(a("826b"),a("c263")),Y=a.n(J),G=(a("3db2"),a("58b8")),H=a.n(G),K=(a("eca7"),a("3787")),Q=a.n(K),W=(a("425f"),a("4105")),X=a.n(W),Z=(a("a7cc"),a("df33")),ee=a.n(Z),te=(a("672e"),a("101e")),ae=a.n(te),ne=(a("5466"),a("ecdf")),re=a.n(ne),oe=(a("38a0"),a("ad41")),se=a.n(oe),ie=(a("10cb"),a("f3ad")),ce=a.n(ie),ue=(a("bdc7"),a("aa2f")),le=a.n(ue),de=(a("de31"),a("c69e")),fe=a.n(de),pe=(a("a673"),a("7b31")),me=a.n(pe),he=(a("adec"),a("3d2d")),ge=a.n(he),be=(a("6611"),a("e772")),ve=a.n(be),ye=(a("1f1a"),a("4e4b")),we=a.n(ye),xe=(a("1951"),a("eedf")),Se=a.n(xe);n["default"].use(Se.a),n["default"].use(we.a),n["default"].use(ve.a),n["default"].use(ge.a),n["default"].use(me.a),n["default"].use(fe.a),n["default"].use(le.a),n["default"].use(ce.a),n["default"].use(se.a),n["default"].use(re.a),n["default"].use(ae.a),n["default"].use(ee.a),n["default"].use(X.a),n["default"].use(Q.a),n["default"].use(H.a),n["default"].use(Y.a),n["default"].use(q.a),n["default"].use(B.a),n["default"].use(z.a),n["default"].use(A.a),n["default"].use(V.a),n["default"].use(j.a),n["default"].use(L.a),n["default"].use($.a),n["default"].use(I.a),n["default"].use(R.a),n["default"].prototype.$message=T.a,n["default"].prototype.$confirm=S.a.confirm;var Ce=a("bc3a"),Te=a.n(Ce),Oe=a("313e"),Re=a("1209");Te.a.defaults.withCredentials=!0,n["default"].prototype.$http=Te.a,n["default"].config.productionTip=!1,n["default"].prototype.$echarts=Oe,n["default"].prototype.$anime=Re["a"],new n["default"]({store:w,render:function(e){return e(v)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";a("9c0c")},"9c0c":function(e,t,a){}});
//# sourceMappingURL=app.a535dc23.js.map