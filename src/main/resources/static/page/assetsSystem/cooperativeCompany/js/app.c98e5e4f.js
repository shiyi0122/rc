(function(e){function t(t){for(var n,i,l=t[0],s=t[1],c=t[2],d=0,p=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,l=1;l<a.length;l++){var s=a[l];0!==r[s]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;o.push([1,"chunk-vendors"]),a()})({0:function(e,t){},1:function(e,t,a){e.exports=a("56d7")},2:function(e,t){},3:function(e,t){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("partner-company")],1)},o=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"partner-company"},[a("el-container",[a("el-header",{staticClass:"header"},[a("el-form",{ref:"searchValidateForm",staticClass:"search-validate-form",attrs:{inline:!0,model:e.searchValidateForm,"label-width":"100px",rules:e.searchValidateFormRules}},[a("el-form-item",{attrs:{label:"",prop:"companyName"}},[a("el-input",{staticClass:"input-name",attrs:{placeholder:"公司名称"},on:{change:e.onChange},model:{value:e.searchValidateForm.companyName,callback:function(t){e.$set(e.searchValidateForm,"companyName",t)},expression:"searchValidateForm.companyName"}})],1)],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.onSearch("searchValidateForm")}}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.onAdd}},[e._v("新增")]),a("el-button",{attrs:{type:"primary",loading:e.downloadLoading,icon:"el-icon-top-right"},on:{click:e.exportExcel}},[e._v("导出Excel")]),e.updateUpload?a("el-upload",{staticClass:"upload-demo",attrs:{action:"","on-change":e.handleChange,"on-exceed":e.handleExceed,"on-remove":e.handleRemove,"file-list":e.fileListUpload,"show-file-list":!1,limit:e.limitUpload,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel","auto-upload":!1}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-upload"}},[e._v("导入Excel")])],1):e._e()],1),a("el-main",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}],staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-cell-style":{background:"#f2f2f2",color:"#606266",height:"38px",padding:"0px"},"cell-style":{height:"38px",padding:"0"}}},[e._l(e.tableFields,(function(t,n){return a("el-table-column",{key:n,attrs:{prop:t,label:n,"min-width":"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[a("div",[e._v(" "+e._s(e.tableContentValue(n.row,t))+" ")])]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.editRow(t.$index,t.row)}}},[e._v(" 编辑 ")])]}}])})],2),a("el-table",{staticClass:"table",staticStyle:{width:"100%",display:"none"},attrs:{id:"outTable",data:e.exportTableData,border:""}},e._l(e.tableFields,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e,label:t,"min-width":"130",align:"center"}})})),1)],1),a("el-footer",[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total, sizes, jumper",total:e.total,"current-page":e.currentPage,"page-sizes":[10,20,30,40,50,60,70,80,90],"page-size":e.pageSize},on:{"current-change":e.onCurrentChange,"size-change":e.onSizeChange}})],1)]),a("el-dialog",{staticClass:"dialog",attrs:{title:e.dialogTitle,visible:e.dialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"validateForm",staticClass:"demo-ruleForm",attrs:{model:e.validateForm,"label-width":"100px",rules:e.validateFormRules}},[a("el-form-item",{attrs:{label:"合作公司名称",prop:"companyName"}},[a("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入合作公司名称"},model:{value:e.validateForm.companyName,callback:function(t){e.$set(e.validateForm,"companyName",t)},expression:"validateForm.companyName"}})],1),a("el-form-item",{attrs:{label:"收款账户",prop:"collectionAccount"}},[a("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入收款账户"},model:{value:e.validateForm.collectionAccount,callback:function(t){e.$set(e.validateForm,"collectionAccount",t)},expression:"validateForm.collectionAccount"}})],1),a("el-form-item",{attrs:{label:"收款账号",prop:"collectionAccountNumber"}},[a("el-input",{attrs:{type:"text",value:e.validateForm.collectionAccountNumber,autocomplete:"off",placeholder:"请输入收款账号"},on:{input:e.onInputCollectionAccountNumber}})],1),a("el-form-item",{attrs:{label:"开户行",prop:"bank"}},[a("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入开户行"},model:{value:e.validateForm.bank,callback:function(t){e.$set(e.validateForm,"bank",t)},expression:"validateForm.bank"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"notes"}},[a("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入备注"},model:{value:e.validateForm.notes,callback:function(t){e.$set(e.validateForm,"notes",t)},expression:"validateForm.notes"}})],1)],1),a("div",{staticClass:"submit"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("validateForm")}}},[e._v("提交")]),a("el-button",{on:{click:e.dialogClose}},[e._v("取消")])],1)],1)],1)],1)},l=[],s=a("2909"),c=a("5530"),u=a("1da1"),d=(a("96cf"),a("a9e3"),a("ac1f"),a("5319"),a("99af"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("d81d"),a("fb6a"),a("a15b"),a("21a6")),p=a.n(d),f=a("1146"),m=a.n(f),h={name:"PartnerCompany",data:function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,a,n){if(!a)return n(new Error(e+"不能为空"));isNaN(Number(a.replace(/ /g,"")))?n(new Error(e+"必须为数字值")):n()}}function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,a,n){if(!a)return n(new Error(e+"不能为空"));n()}}return{searchCompanyName:"",tableFields:{"合作公司名称":"companyName","收款账户":"collectionAccount","收款账号":"collectionAccountNumber","开户行":"bank","创建时间":"createTime","备注":"notes"},tableData:[],exportTableData:[],downloadLoading:!1,loadingTable:!1,currentPage:1,pageSize:10,dialogVisible:!1,dialogState:"",searchValidateForm:{companyName:""},searchVF:{companyName:""},validateForm:{},total:0,dialogTitle:"",limitUpload:3,file:null,fileTemp:null,fileListUpload:[],updateUpload:!0,validateFormRules:{companyName:[{validator:t("合作公司名称"),required:!0,trigger:["blur","change"]}],collectionAccount:[{validator:t("收款账户"),required:!0,trigger:["blur","change"]}],collectionAccountNumber:[{validator:e("收款账号"),required:!0,trigger:["blur","change"]}],bank:[{validator:t("开户行"),required:!0,trigger:["blur","change"]}]},searchValidateFormRules:{}}},created:function(){this.initTableData(),this.getValidateForm()},methods:{getValidateForm:function(){var e={};for(var t in this.tableFields)e[this.tableFields[t]]="";this.validateForm=e},login:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/loginSystem?username=lijiazhao&password=lijiazhao");case 2:a=t.sent,a.data;case 4:case"end":return t.stop()}}),t)})))()},initTableData:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.searchVF.companyName,""!=a&&a||(a=null),e.loadingTable=!0,t.next=5,e.$http.get("/system/cooperative_company/list",{params:{name:a,pageNum:(e.currentPage-1)*e.pageSize,pageSize:e.pageSize}});case 5:if(n=t.sent,r=n.data,"200"!=r.state){t.next=13;break}e.tableData=r.data,e.total=r.total,e.loadingTable=!1,t.next=15;break;case 13:return e.$message({message:r.msg,type:"error",offset:100,center:!0,duration:3e3}),t.abrupt("return");case 15:case"end":return t.stop()}}),t)})))()},addTableData:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/system/cooperative_company/add",e.validateForm);case 2:a=t.sent,n=a.data,"200"==n.state?(e.$message({message:n.msg,type:"success",offset:100,center:!0,duration:1e3}),e.initTableData(),e.$refs.validateForm.resetFields()):e.$message({message:n.msg,type:"error",offset:100,center:!0,duration:3e3});case 5:case"end":return t.stop()}}),t)})))()},editTableData:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/system/cooperative_company/edit",e.validateForm);case 2:a=t.sent,n=a.data,"200"==n.state?(e.$message({message:n.msg,type:"success",offset:100,center:!0,duration:1e3}),e.initTableData()):e.$message({message:n.msg,type:"error",offset:100,center:!0,duration:3e3});case 5:case"end":return t.stop()}}),t)})))()},getExportTableData:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.searchVF.companyName,""!=a&&a||(a=null),t.next=4,e.$http.get("/system/cooperative_company/list",{params:{name:a}});case 4:if(n=t.sent,r=n.data,"200"!=r.state){t.next=10;break}e.exportTableData=r.data,t.next=11;break;case 10:return t.abrupt("return");case 11:case"end":return t.stop()}}),t)})))()},getTableData:function(){var e=this,t=function(){for(var t in e.searchValidateForm)if(e.searchValidateForm[t]!=e.searchVF[t])return!1;return!0};t()||(this.searchVF=Object(c["a"])({},this.searchValidateForm),console.log("调用接口"),this.initTableData())},onChange:function(){},onSearch:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.getTableData()}))},exportExcel:function(){var e=this;this.$confirm("确认导出Excel表格?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.downloadLoading=!0,t.next=3,e.getExportTableData();case 3:e.$nextTick((function(){var t={raw:!0},a=m.a.utils.table_to_book(document.querySelector("#outTable"),t),n=m.a.write(a,{bookType:"xlsx",bookSST:!0,type:"array"});try{p.a.saveAs(new Blob([n],{type:"application/octet-stream"}),"合作公司.xlsx")}catch(r){"undefined"!==typeof console&&console.log(r,n)}return e.downloadLoading=!1,n})),e.$message({type:"success",message:"已成功导出Excel表格！",offset:100,center:!0,duration:1e3});case 5:case"end":return t.stop()}}),t)})))).catch((function(){e.$message({type:"info",message:"已取消导出Excel表格",offset:100,center:!0,duration:1e3})}))},onAdd:function(){this.dialogVisible=!0,this.dialogState="add",this.dialogTitle="新增合作公司信息"},editRow:function(e,t){this.dialogVisible=!0;var a=Object.assign({},t);this.validateForm=a,this.dialogState="edit",this.dialogTitle="编辑合作公司信息"},dialogClose:function(){this.dialogVisible=!1,this.$refs.validateForm.resetFields(),this.getValidateForm()},handleClose:function(e){e(),this.$refs.validateForm.resetFields(),this.getValidateForm()},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=7;break}console.log(t.validateForm),"add"==t.dialogState?(console.log("新增公司信息"),t.addTableData()):"edit"==t.dialogState&&(console.log("编辑公司信息"),t.editTableData()),t.dialogVisible=!1,t.$refs.validateForm.resetFields(),e.next=9;break;case 7:return console.log("error submit!!"),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onCurrentChange:function(e){this.currentPage=e,this.initTableData()},onSizeChange:function(e){this.pageSize=e,this.initTableData()},reloadUpload:function(){var e=this;this.updateUpload=!1,this.$nextTick((function(){e.updateUpload=!0}))},handleChange:function(e,t){this.fileListUpload[0]=e,this.fileTemp=e.raw,this.reloadUpload(),this.fileTemp?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==this.fileTemp.type||"application/vnd.ms-excel"==this.fileTemp.type?this.importfxx(this.fileTemp):this.$message({type:"warning",message:"附件格式错误，请删除后重新上传！"}):this.$message({type:"warning",message:"请上传附件！"})},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleRemove:function(e,t){this.fileTemp=null,this.fileListUpload=[]},importfxx:function(e){this.file=e;var t=!1,n=this.file,r=new FileReader;FileReader.prototype.readAsBinaryString=function(e){var t,n,r="",o=!1,i=new FileReader;i.onload=function(e){for(var l=new Uint8Array(i.result),c=l.byteLength,u=0;u<c;u++)r+=String.fromCharCode(l[u]);var d=a("1146");t=o?d.read(btoa(fixdata(r)),{type:"base64"}):d.read(r,{type:"binary"}),n=d.utils.sheet_to_json(t.Sheets[t.SheetNames[0]]),console.log(n),this.da=Object(s["a"])(n);var p=[];return this.da.map((function(e){var t={robotCount:e["机器人数量"],type:e["发货进度"],applicantName:e["申请人"],factoryName:e["发货工厂"],consignorName:e["发货人"],receivingName:e["收货景区"],consigneeName:e["收货人"],consigneePhone:e["收货人电话"],receiningAddress:e["收货地址"],consignmentDate:e["发货时间"]};p.push(t)})),p},i.readAsArrayBuffer(e)},t?r.readAsArrayBuffer(n):r.readAsBinaryString(n)},onInputCollectionAccountNumber:function(e){for(var t="",a=String(e.replace(/ /g,"")),n=4,r=[],o=0;o<a.length;o+=n)r.push(a.slice(o,o+n));t=r.join(" "),this.validateForm.collectionAccountNumber=t}},computed:{tableContentValue:function(){return function(e,t){var a="";if("collectionAccountNumber"==t){for(var n=String(e[t]),r=4,o=[],i=0;i<n.length;i+=r)o.push(n.slice(i,i+r));a=o.join(" ")}else a=e[t];return a}}},components:{}},g=h,b=(a("852f"),a("2877")),v=Object(b["a"])(g,i,l,!1,null,"8c00aaec",null),y=v.exports,x={name:"App",components:{PartnerCompany:y}},w=x,F=(a("5c0b"),Object(b["a"])(w,r,o,!1,null,null,null)),k=F.exports,T=a("2f62");n["default"].use(T["a"]);var C=new T["a"].Store({state:{},mutations:{},actions:{},modules:{}}),S=(a("9e1f"),a("450d"),a("6ed5")),$=a.n(S),N=(a("0fb7"),a("f529")),_=a.n(N),V=(a("f225"),a("89a9")),j=a.n(V),A=(a("be4f"),a("896a")),R=a.n(A),O=(a("eca7"),a("3787")),D=a.n(O),E=(a("425f"),a("4105")),z=a.n(E),P=(a("a7cc"),a("df33")),U=a.n(P),L=(a("672e"),a("101e")),B=a.n(L),q=(a("5466"),a("ecdf")),M=a.n(q),I=(a("38a0"),a("ad41")),J=a.n(I),G=(a("10cb"),a("f3ad")),H=a.n(G),K=(a("bdc7"),a("aa2f")),Q=a.n(K),W=(a("de31"),a("c69e")),X=a.n(W),Y=(a("a673"),a("7b31")),Z=a.n(Y),ee=(a("adec"),a("3d2d")),te=a.n(ee),ae=(a("1f1a"),a("4e4b")),ne=a.n(ae),re=(a("1951"),a("eedf")),oe=a.n(re);n["default"].use(oe.a),n["default"].use(ne.a),n["default"].use(te.a),n["default"].use(Z.a),n["default"].use(X.a),n["default"].use(Q.a),n["default"].use(H.a),n["default"].use(J.a),n["default"].use(M.a),n["default"].use(B.a),n["default"].use(U.a),n["default"].use(z.a),n["default"].use(D.a),n["default"].use(R.a),n["default"].use(j.a),n["default"].prototype.$message=_.a,n["default"].prototype.$confirm=$.a.confirm;var ie=a("bc3a"),le=a.n(ie),se=a("323e"),ce=a.n(se);a("a5d8");le.a.defaults.withCredentials=!0,n["default"].prototype.$http=le.a,n["default"].config.productionTip=!1,le.a.interceptors.request.use((function(e){return ce.a.start(),e})),le.a.interceptors.response.use((function(e){return ce.a.done(),e})),new n["default"]({store:C,render:function(e){return e(k)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";a("9c0c")},"5c34":function(e,t,a){},"852f":function(e,t,a){"use strict";a("5c34")},"9c0c":function(e,t,a){}});
//# sourceMappingURL=app.c98e5e4f.js.map