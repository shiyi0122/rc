<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>随机寻宝活动景点奖品新增--后台管理系统</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="/css/adamins.css" media="all" />
    <link rel="stylesheet" href="/layui/css/layui.css" media="all" />
    <link rel="stylesheet" href="/css/form.css" media="all" />
    <link rel="stylesheet" href="/css/public.css" media="all" />
</head>
<body class="childrenBody">
<form class="layui-form" id="Form" lay-filter="Form">
    <div class="layui-fluid" style="padding-bottom: 75px;">
        <div class="layui-card">
            <div class="layui-card-header">基本信息</div>
            <div class="layui-card-body">
                <div class="layui-form-item layui-row">
                    <input name="scenicSpotId" type="hidden" class="scenicSpotId"/>
                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">景区名称<span style="color: red;">*</span></label>
                        <div class="layui-input-block">
                            <input name="scenicSpotName" disabled placeholder="请输入景区名称" type="text" class="layui-input layui-disabled scenicSpotName" autocomplete="off" lay-verify="required" lay-reqtext="景区名称是必填项，不能为空"/>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">奖品名称<span style="color: red;">*</span></label>
                        <div class="layui-input-block">
                            <input name="treasureName" placeholder="请输入奖品名称" type="text" class="layui-input treasureName" autocomplete="off" lay-verify="required" lay-reqtext="奖品名称是必填项，不能为空"/>
                        </div>
                    </div>

<!--                    <div class="layui-inline layui-col-md12">-->
<!--                        <label class="layui-form-label">归属时间<span style="color: red;">*</span></label>-->
<!--                        <div class="layui-input-block">-->
<!--                            <select name="dateTreasureId"  lay-verify="required" lay-search="" lay-filter="group" class="dateTreasureId" lay-reqtext="归属时间是必选项，不能为空" id="randomTime">-->
<!--                            </select>-->
<!--                        </div>-->
<!--                    </div>-->

                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">奖品类型<span style="color: red;">*</span></label>
                        <div class="layui-input-block" id="bth" >
                            <select name="treasureType" class="layui-select treasureType" lay-search="" lay-verify="required" autocomplete="off" id="treasureType" >
                                <option value="1">代金券</option>
                                <option value="2">免单</option>
                                <option value="3">实物</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">代金券金额</label>
                        <div class="layui-input-block" id="btc" name = "btc">
                            <input id="coupon" name="couponAmount" placeholder="请输入代金券金额" type="text" class="layui-input couponAmount" autocomplete="off" lay-reqtext="代金券金额是必填项，不能为空"  />
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">库存数量<span style="color: red;">*</span></label>
                        <div class="layui-input-block">
                            <input name="inventory" placeholder="请输入库存数量" type="text" class="layui-input inventory" autocomplete="off" lay-verify="required" lay-reqtext="库存数量是必填项，不能为空"/>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">开始日期<span style="color: #ff0000;">*</span></label>
                        <div class="layui-input-block">
                            <input name="startValidity" placeholder="请输入开始有效期" type="text" class="layui-input startValidity" autocomplete="off" lay-verify="required" lay-reqtext="开始有效期是必填项，不能为空"  id="startValidity"/>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">结束日期<span style="color: #ff0000;">*</span></label>
                        <div class="layui-input-block">
                            <input name="endValidity" placeholder="请输入结束日期" type="text" class="layui-input endValidity" autocomplete="off" lay-verify="required" lay-reqtext="结束有效期是必填项，不能为空" id="endValidity"/>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">权重<span style="color: #ff0000;">*</span></label>
                        <div class="layui-input-block">
                            <input name="prizeWeight" placeholder="请输入权重" type="text" class="layui-input prizeWeight" autocomplete="off" lay-verify="required" lay-reqtext="权重是必填项，不能为空"/>
                        </div>
                    </div>

                    <div class="layui-inline layui-col-md12" class = "ddd" id="ddd">
                        <label class="layui-form-label">请选择图片<span style="color: red;">*</span></label>
                        <div class="layui-input-block">
                            <button type="button" class="layui-btn file" name="file" id="file"  ><i class="layui-icon"></i>上传图片</button>
                            <span style="color: red;" >图片大小小于2M</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="form-group-bottom text-center" style="z-index: 200">
        <button class="layui-btn" lay-filter="btnSubmitTreasure" lay-submit>&emsp;提交&emsp;</button>
        <button type="reset" class="layui-btn layui-btn-primary" onclick="cancels()">&emsp;取消&emsp;</button>
    </div>

</form>
<script type="text/javascript" src="/layui/layui.js"></script>
<script type="text/javascript" src="/zTree_v3/js/jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="/page/system/scenicSpotDateTreasureHunt/js/scenicSpotDateTreasureHuntAdd.js"></script>
<script type="text/javascript" src="/js/common.js"></script>
<script type="text/javascript">
    layui.use(['form','layer','table','laytpl','laydate'],function(){
        var form = layui.form;
        var $ = layui.jquery;
        var laydate = layui.laydate;
        laydate.render({
            elem: '#startValidity',
            type: 'datetime',
            format: 'yyyy-MM-dd HH:mm:ss'
        });
        laydate.render({
            elem: '#endValidity',
            type: 'datetime',
            format: 'yyyy-MM-dd HH:mm:ss'
        });

        $.ajax({
            type : "POST",
            url : "/system/scenicSpotDateHunt/getSpotDateHuntIdList",
            async : false,
            success : function(data){
                if(data.code == 200){
                    // console.log(data)
                    items = data.list;
                    $("#randomTime").html("<option value=''>请选择时间段</option>");
                    $.each(items, function (index, item) {
                        var option = new Option(item.randomTime,item.dateTreasureId);
                        $('#randomTime').append(option);//往下拉菜单里添加元素
                        form.render('select'); //这个很重要
                    });
                }else{
                }
            }
        });

    });

    var bth = document.getElementById("bth")
  //  console.log(bth)
    setTimeout(() => {
        var layuiAnim = bth.querySelector('.layui-anim.layui-anim-upbit')
        // console.log(layuiAnim)
        var layuiAnimDd = layuiAnim.querySelectorAll('dd')
        Array.from(layuiAnimDd).forEach((item) => {
            item.addEventListener('click', function () {
                console.log(111111)
                var treasureTypeVal = document.getElementById("treasureType").value;
                if (treasureTypeVal == 2 || treasureTypeVal ==3){
                    // console.log(2,3);

                    $(".couponAmount").attr("disabled","disabled")
                    $(".couponAmount").val("0.00");
                    document.getElementById("ddd").style.display="";


                    if (treasureTypeVal == 2){
                        document.getElementById("ddd").style.display="none";
                    }
                }else{
                    console.log(1);
                    $(".couponAmount").removeAttr("disabled");
                    document.getElementById("ddd").style.display="none";
                }
            })
        })
    },1000)

</script>
</body>
</html>