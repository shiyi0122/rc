<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>寻宝活动景点奖品新增--后台管理系统</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="/css/adamins.css" media="all" />
    <link rel="stylesheet" href="/layui/css/layui.css" media="all" />
    <link rel="stylesheet" href="/css/form.css" media="all" />
    <link rel="stylesheet" href="/css/public.css" media="all" />
</head>
<body class="childrenBody">
<form class="layui-form" id="Form" lay-filter="Form">
    <div class="layui-fluid" style="padding-bottom: 75px;">
        <div class="layui-card">
            <div class="layui-card-header">基本信息</div>
            <div class="layui-card-body">
                <div class="layui-form-item layui-row">
                    <input name="scenicSpotId" type="hidden" class="scenicSpotId"/>
                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">景区名称<span style="color: red;">*</span></label>
                        <div class="layui-input-block">
                            <input name="scenicSpotName" disabled placeholder="请输入景区名称" type="text" class="layui-input layui-disabled scenicSpotName" autocomplete="off" lay-verify="required" lay-reqtext="景区名称是必填项，不能为空"/>
                        </div>
                    </div>

                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">奖品名称<span style="color: red;">*</span></label>
                        <div class="layui-input-block">
                            <input name="treasureName" placeholder="请输入奖品名称" type="text" class="layui-input treasureName" autocomplete="off" lay-verify="required" lay-reqtext="奖品名称是必填项，不能为空"/>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">奖品类型<span style="color: red;">*</span></label>
                        <div class="layui-input-block" id="bth" >
                            <select name="treasureType" class="layui-select treasureType" lay-search=""  lay-verify="required" autocomplete="off" id="treasureType" >
                                <option value="1">代金券</option>
                                <option value="2">免单</option>
                                <option value="3">实物</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">代金券金额</label>
                        <div class="layui-input-block" id="btc" name = "btc">
                            <input id="coupon" name="couponAmount" placeholder="请输入代金券金额" type="text" lay-verify="required" class="layui-input couponAmount" autocomplete="off" lay-reqtext="代金券金额是必填项，不能为空"  />
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">库存数量<span style="color: red;">*</span></label>
                        <div class="layui-input-block">
                            <input name="inventory" placeholder="请输入库存数量" type="text" class="layui-input inventory" autocomplete="off" lay-verify="required" lay-reqtext="库存数量是必填项，不能为空"/>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">开始日期<span style="color: #ff0000;">*</span></label>
                        <div class="layui-input-block">
                            <input name="startValidity" placeholder="请输入开始有效期" type="text" class="layui-input startValidity" autocomplete="off" lay-verify="required" lay-reqtext="开始有效期是必填项，不能为空"  id="startValidity"/>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">结束日期<span style="color: #ff0000;">*</span></label>
                        <div class="layui-input-block">
                            <input name="endValidity" placeholder="请输入结束日期" type="text" class="layui-input endValidity" autocomplete="off" lay-verify="required" lay-reqtext="结束有效期是必填项，不能为空" id="endValidity"/>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">权重<span style="color: #ff0000;">*</span></label>
                        <div class="layui-input-block">
                            <input name="prizeWeight" placeholder="请输入权重" type="text" class="layui-input prizeWeight" autocomplete="off" lay-verify="required" lay-reqtext="权重是必填项，不能为空"/>
                        </div>
                    </div>
<!---->

<!--                    <div class="layui-inline layui-col-md12">-->
<!--                        <label class="layui-form-label">节假日日期<span style="color: #ff0000;">*</span></label>-->
<!--                        <div class="layui-input-block">-->
<!--                            <div class="layui-inline" id="date-list" ></div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div class="layui-inline layui-col-md12">-->
<!--                        <label class="layui-form-label">已选择的日期</label>-->
<!--                        <div class="layui-input-block">-->
<!--                            <textarea placeholder="请选择日期" id="ignoreDate" class="layui-textarea"></textarea>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="layui-row">-->

<!--                        <div class="layui-col-md3">-->
<!--                            <label class="lab">红色：已禁用</label>-->
<!--                            <div class="laydate-day-mark-div" style="background-color: red;"></div>-->
<!--                        </div>-->
<!--                        <div class="layui-col-md3">-->
<!--                            <label class="lab">灰色：不可选</label>-->
<!--                            <div class="laydate-day-mark-div" style="background-color: LightGrey;"></div>-->
<!--                        </div>-->
<!--                        <div class="layui-col-md3">-->
<!--                            <label class="lab">鼠标禁用图标：不可选</label>-->
<!--                            <div class="laydate-day-mark-div" style="cursor: not-allowed"></div>-->
<!--                        </div>-->
<!--                    </div>-->




<!---->
                    <div class="layui-inline layui-col-md12" class = "ddd" id="ddd">
                        <label class="layui-form-label">请选择图片<span style="color: red;">*</span></label>
                        <div class="layui-input-block">
                            <button type="button" class="layui-btn file" name="file" id="file"  ><i class="layui-icon"></i>上传图片</button>
                            <span style="color: red;" >图片大小小于2M</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="form-group-bottom text-center" style="z-index: 200">
        <button class="layui-btn" lay-filter="btnSubmitTreasure" lay-submit>&emsp;提交&emsp;</button>
        <button type="reset" class="layui-btn layui-btn-primary" onclick="cancels()">&emsp;取消&emsp;</button>
    </div>

</form>

<script type="text/javascript" src="/layui/layui.js"></script>
<script type="text/javascript" src="/zTree_v3/js/jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="/page/system/broadcastHunt/js/treasureAdd.js"></script>
<script type="text/javascript" src="/js/common.js"></script>
<script type="text/javascript">
    layui.use(['form','layer','table','laytpl','laydate'],function(){
        var form = layui.form;
        var $ = layui.jquery;
        var laydate = layui.laydate;

        laydate.render({
            elem: '#startValidity',
            type: 'datetime',
            trigger: 'click',
            format: 'yyyy-MM-dd HH:mm:ss'
        });
        laydate.render({
            elem: '#endValidity',
            type: 'datetime',
            trigger: 'click',
            format: 'yyyy-MM-dd HH:mm:ss',
        });


    });

    var bth = document.getElementById("bth")
  //  console.log(bth)
    setTimeout(() => {
        var layuiAnim = bth.querySelector('.layui-anim.layui-anim-upbit')
        // console.log(layuiAnim)
        var layuiAnimDd = layuiAnim.querySelectorAll('dd')
        Array.from(layuiAnimDd).forEach((item) => {
            item.addEventListener('click', function () {
                // console.log(111111)
                var treasureTypeVal = document.getElementById("treasureType").value;
                if (treasureTypeVal == 2 || treasureTypeVal ==3){
                    // console.log(2,3);

                    $(".couponAmount").attr("disabled","disabled")
                    $(".couponAmount").val("0.00");
                    document.getElementById("ddd").style.display="";


                    if (treasureTypeVal == 2){
                        document.getElementById("ddd").style.display="none";
                    }
                }else{
                    console.log(1);
                    $(".couponAmount").removeAttr("disabled");
                    document.getElementById("ddd").style.display="none";
                }
            })
        })
    },1000);
</script>


<!--<script type="text/javascript">-->
<!--        layui.use(['layer', 'form', 'jquery', 'laydate'], function () {-->
<!--            var layer = layui.layer,-->
<!--                $ = layui.jquery,-->
<!--                laydate = layui.laydate,-->
<!--                form = layui.form;-->

<!--            function getNowFormatDate() {-->
<!--                var date = new Date();-->
<!--                var seperator1 = "-";-->
<!--                var year = date.getFullYear();-->
<!--                var month = date.getMonth() + 1;-->
<!--                var strDate = date.getDate();-->
<!--                if (month >= 1 && month <= 9) {-->
<!--                    month = "0" + month;-->
<!--                }-->
<!--                if (strDate >= 0 && strDate <= 9) {-->
<!--                    strDate = "0" + strDate;-->
<!--                }-->
<!--                var currentdate = year + seperator1 + month + seperator1 + strDate;-->
<!--                return currentdate;-->
<!--            }-->


<!--            //定义json-->
<!--            var data = {};-->
<!--            var new_date = new Date();-->
<!--            loding_date(new_date, data);-->


<!--            //日历插件调用方法-->
<!--            function loding_date(new_date, data) {-->

<!--                laydate.render({-->
<!--                    elem: '#date-list'-->
<!--                    , type: 'date'-->
<!--                    , theme: 'grid'-->
<!--                    , max: '2099-06-16 23:59:59'-->
<!--                    , position: 'static'-->
<!--                    , range: false-->
<!--                    , value: new_date-->
<!--                    , min:getNowFormatDate()-->
<!--                    , isInitValue: false-->
<!--                    , calendar: false-->
<!--                    , btns: false-->
<!--                    , mark: data//重要json！-->
<!--                    , ready: function (value) {-->
<!--                        // disabled_date(value,$("#appointmentDate").val());-->
<!--                        hide_mr(data);-->
<!--                    }-->
<!--                    , done: function (value, date) {-->
<!--                        dateset(value,data);-->
<!--                        console.log("111")-->
<!--                        console.log(date)-->
<!--                    }-->
<!--                    , change: function (value, date) {-->
<!--                        // disabled_date(date,$("#appointmentDate").val());-->
<!--                        hide_mr(data);-->
<!--                    }-->
<!--                });-->
<!--            }-->

<!--            /**-->
<!--             *设置不可选择的星期-->
<!--             *-->
<!--             */-->
<!--            function disabled_date(value,appointmentDate) {-->
<!--                var mm = value.year + '-' + value.month + '-' + value.date;-->
<!--                $('.laydate-theme-grid table tbody').find('[lay-ymd="' + mm + '"]').removeClass('layui-this');-->

<!--                if(appointmentDate!=null && appointmentDate!=''){-->
<!--                    var dates = appointmentDate.split(",");-->
<!--                    for(var i=0;i<dates.length;i++){-->
<!--                        if(dates[i]=="7"){-->
<!--                            dates[i] = 0;-->
<!--                        }-->
<!--                        $("table>tbody>tr").find("td:eq("+dates[i]+")").addClass('ng-laydate-disabled');-->
<!--                    }-->
<!--                }-->

<!--            }-->

<!--            /**-->
<!--             *设置选中-->
<!--             *-->
<!--             */-->
<!--            function hide_mr(markJson) {-->
<!--                keys = [];-->
<!--                if(markJson!=null){-->
<!--                    for(var key in markJson){-->
<!--                        var dates = key.split("-");-->
<!--                        dates[1] = dates[1] * 1;-->
<!--                        var mm = dates[0] + '-' + dates[1] + '-' + dates[2];-->
<!--                        $('.laydate-theme-grid table tbody').find('[lay-ymd="' + mm + '"]').addClass('layui-this');-->
<!--                        keys.push(key);-->
<!--                    }-->
<!--                }-->
<!--                if(keys.length>0){-->
<!--                    $("#ignoreDate").val(keys);-->


<!--                }-->
<!--                console.log("111")-->
<!--                console.log(document.getElementById("ignoreDate").value)-->
<!--            }-->

<!--            //定义添加/编辑标注方法-->
<!--            function chose_moban(obj_date, markJson) {-->
<!--                $('#date-list').html('');//重要！由于插件是嵌套指定容器，再次调用前需要清空原日历控件-->
<!--                if (markJson.hasOwnProperty(obj_date)) {-->
<!--                    delete markJson[obj_date]-->
<!--                } else {-->
<!--                    //添加属性-->
<!--                    markJson[obj_date] = ''-->
<!--                }-->
<!--                loding_date(obj_date, markJson);//重要！，再标注一个日期后会刷新当前日期变为初始值，所以必须调用当前选定日期。-->

<!--            }-->

<!--            //~ 点击保存到后台-->
<!--            function dateset(value,data){-->
<!--                layer.confirm('是否要设置该日期['+value+']？', {-->
<!--                    btn: ['是', '否']-->
<!--                }, function(index, layero){-->
<!--                    //你的后台ajax ：xxx-->
<!--                    layer.msg("设置成功！");-->
<!--                    hide_mr(data);-->
<!--                    chose_moban(value, data);-->

<!--                }, function(index){-->
<!--                    layer.close(index);-->
<!--                });-->
<!--            }-->
<!--        });-->
<!--</script>-->








</body>
</html>