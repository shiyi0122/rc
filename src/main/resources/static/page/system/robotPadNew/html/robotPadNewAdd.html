<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>上传PAD客户端--后台管理系统</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="/css/adamins.css" media="all" />
    <link rel="stylesheet" href="/layui/css/layui.css" media="all" />
    <link rel="stylesheet" href="/css/form.css" media="all" />
    <link rel="stylesheet" href="/css/public.css" media="all" />
</head>
<body class="childrenBody">
<form class="layui-form" id="robotPadForm" lay-filter="robotPadForm">
    <div class="layui-fluid" style="padding-bottom: 75px;">
        <div class="layui-card">
            <div class="layui-card-header">基本信息</div>
            <div class="layui-card-body">
                <div class="layui-form-item layui-row">

                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">包类型<span style="color: red;">*</span></label>
                        <div class="layui-input-block" id="bth">
                            <select id="packageType" name="packageType" lay-verify="required" lay-search="" lay-filter="group" class="packageType" lay-reqtext="包类型，不能为空">
                                <option value="1">完整包</option>
                                <option value="2">资源包</option>
                            </select>
                        </div>
                    </div>

                    <div class="layui-inline layui-col-md12" id="hideCompleteIds" style="display: none;">
                        <label class="layui-form-label">关联完整包版本<span style="color: red;">*</span></label>
                        <div class="layui-input-block">
                            <div id="completeIds" class="xm-select-demo"></div>
                        </div>
                    </div>


                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">版本号<span style="color: red;">*</span></label>
                        <div class="layui-input-block">
                            <input name="padNumber" placeholder="请输入版本号" type="text" class="layui-input padNumber" autocomplete="off" lay-verify="required" lay-reqtext="版本号是必填项，不能为空"/>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">版本描述<span style="color: red;">*</span></label>
                        <div class="layui-input-block">
                            <input name="padDescription" placeholder="请输入版本描述" type="text" class="layui-input padDescription" autocomplete="off" lay-verify="required" lay-reqtext="版本描述是必填项，不能为空"/>
                        </div>
                    </div>

                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">更新范围选择<span style="color: red;">*</span></label>
                        <div class="layui-input-block" id = "bth1">
                            <select id = "updateScope" name="updateScope" lay-verify="required" lay-search="" lay-filter="group" class="updateScope" lay-reqtext="更新范围，不能为空">
                                <option value="1">全国</option>
                                <option value="2">景区</option>
                                <option value="3">待定</option>
                            </select>
                        </div>
                    </div>


<!--                    <div class="layui-inline layui-col-md12" id="hideUpdateScope11111" style="display: none;">-->
<!--                        <label class="layui-form-label">更新范围选择<span style="color: red;">*</span></label>-->
<!--                        <div class="layui-input-block">-->
<!--                            <select id="updateScope11111" name="updateScope1111" lay-verify="required" lay-search="" lay-filter="group" class="updateScope1111" lay-reqtext="更新范围，不能为空">-->
<!--                                <option value="1">全国</option>-->
<!--                                <option value="2">景区</option>-->
<!--                                <option value="3">待定</option>-->
<!--                            </select>-->
<!--                        </div>-->
<!--                    </div>-->


                    <div class="layui-inline layui-col-md12" id="hideScenicSpotIds" style="display: none;" >
                        <label class="layui-form-label">景区<span style="color: red;">*</span></label>
                        <div class="layui-input-block">
                            <div id="scenicSpotIds" class="xm-select-demo"></div>
                        </div>
                    </div>

                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">更新状态选择<span style="color: red;">*</span></label>
                        <div class="layui-input-block">
                            <select name="updateType" lay-verify="required" lay-search="" lay-filter="group" class="updateType" lay-reqtext="更新状态，不能为空">
                                <option value="1">强制</option>
                                <option value="2">提示更新</option>
                                <option value="3">不提示更新</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">开始时间<span style="color: red;">*</span></label>
                        <div class="layui-input-block">
                            <input name="startTime" id="startTime" placeholder="请输入开启时间" lay-verify="required" type="text" class="layui-input startTime" autocomplete="off" id="startTime"/>
                        </div>
                    </div>

                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">关闭时间<span style="color: red;">*</span></label>
                        <div class="layui-input-block">
                            <input name="endTime" id="endTime" placeholder="请输入关闭时间" type="text" lay-verify="required" class="layui-input endTime" autocomplete="off" id="endTime"/>
                        </div>
                    </div>

                    <div class="layui-inline layui-col-md12">
                        <label class="layui-form-label">文件选择<span style="color: red;">*</span></label>
                        <div class="layui-input-block">
                            <button type="button" class="layui-btn" name="file" id="file" lay-type="images"><i class="layui-icon"></i>上传文件</button>
                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>
    <div class="form-group-bottom text-center" style="z-index: 200">
        <button class="layui-btn" lay-filter="btnSubmitRobotPad" lay-submit>&emsp;提交&emsp;</button>
        <button type="reset" class="layui-btn layui-btn-primary" onclick="cancels()">&emsp;取消&emsp;</button>
    </div>

</form>


<script type="text/javascript" src="/layui/layui.js"></script>
<script type="text/javascript" src="/zTree_v3/js/jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="/page/system/robotPadNew/js/robotPadNewAdd.js"></script>
<script type="text/javascript" src="/js/common.js"></script>
<script type="text/javascript" src="/layui/xm-select.js"></script>

<script type="text/javascript">
    layui.use(['form','layer','table','laytpl','laydate'],function(){
        var form = layui.form;
        var $ = layui.jquery;
        var items = [];
        var laydate = layui.laydate;

        laydate.render({
            elem: '#startTime',
            type: 'time',
            format: 'HH:mm:ss',
        });
        laydate.render({
            elem: '#endTime',
            type: 'time',
            format: 'HH:mm:ss',
        });

    })
</script>

<script type="text/javascript">
    var xmRender = null;
    $.ajax({
        type : "post",
        url : "/homePage",
        async : false,
        success : function(data) {
            if (data.code == 1) {
                items = data.data;
                // console.log(items)
                var val = [];
                var oldVal = ""; //已选中的值
                $.each(items, function (index, item) {

                    var con = {name: item.scenicSpotName, value: item.scenicSpotId}
                    val.push(con);
                });


                xmRender = xmSelect.render({
                    el: '#scenicSpotIds'
                    , data: val
                })
            } else {
            }
        }
    });

    var xmRenderOne = null;
    $.ajax({
        type : "post",
        url : "/system/robotPadNew/getRobotPadEdition",
        async : false,
        success : function(data) {
            if (data.state == 200) {
                items = data.data;
                // console.log(items)
                var val = [];
                var oldVal = ""; //已选中的值
                $.each(items, function (index, item) {

                    var con = {name: item.padNumber, value: item.padId}
                    val.push(con);

                });


                xmRenderOne = xmSelect.render({
                    el: '#completeIds'
                    , data: val
                })
            } else {
            }
        }
    });


    var bth = document.getElementById("bth")
    setTimeout(() => {
        var layuiAnim = bth.querySelector('.layui-anim.layui-anim-upbit')
        console.log(layuiAnim)
        var layuiAnimDd = layuiAnim.querySelectorAll('dd')
        Array.from(layuiAnimDd).forEach((item) => {
            item.addEventListener('click', function () {
                // console.log(111111)
                var packageTypeVal = document.getElementById("packageType").value;
                if(packageTypeVal == 1) {
                    // 完整版
                    document.getElementById("hideCompleteIds").style.display="none";
                } else if(packageTypeVal == 2) {
                    // 资源包
                    document.getElementById("hideCompleteIds").style.display="block";
                }
            })
        })
    }, 500)

    var bth1 = document.getElementById("bth1")
    setTimeout(() => {
        var layuiAnim1 = bth1.querySelector('.layui-anim.layui-anim-upbit')
        console.log(layuiAnim1)
        var layuiAnimDd1 = layuiAnim1.querySelectorAll('dd')
        Array.from(layuiAnimDd1).forEach((item) => {
            item.addEventListener('click', function () {
                // console.log(111111)
                var updateScopeVal = document.getElementById("updateScope").value;
                if(updateScopeVal == 1) {
                    // 全国
                    document.getElementById("hideScenicSpotIds").style.display="none";
                } else if(updateScopeVal == 2) {
                    // 景区
                    document.getElementById("hideScenicSpotIds").style.display="block";
                } else if (updateScopeVal == 3){
                    //待定
                    document.getElementById("hideScenicSpotIds").style.display="none";
                }
            })
        })
    }, 500)




</script>


</body>
</html>