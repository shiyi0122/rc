<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hna.hka.archive.management.assetsSystem.dao.ProductionInfoMapper">

    <select id="list" resultType="com.hna.hka.archive.management.assetsSystem.model.ProductionInfo">
        select srpi.*,sssb.SCENIC_SPOT_FNAME as factoryName   from SYS_ROBOT_PRODUCTION_INFO srpi
        left join SYS_SCENIC_SPOT_BINDING sssb on srpi.FACTORY_ID = sssb.SCENIC_SPOT_FID
        <where>
            <if test='name != null and name != ""'>
                and srpi.NAME like concat('%' , #{name} , '%')
            </if>
            <if test='factory != null and factory != ""'>
                and srpi.FACTORY_ID = #{factory}
            </if>
        </where>
        order by srpi.CREATE_TIME DESC
    </select>

    <insert id="add" parameterType="com.hna.hka.archive.management.assetsSystem.model.ProductionInfo">
        insert into SYS_ROBOT_PRODUCTION_INFO(ID, NAME, INSPECTION_ID, INSPECTION_NAME,APPECTANCE_ID, APPECTANCE, APPLICABLE_MODEL,
                                              CREATE_TIME, NOTES, FACTORY_NAME, FACTORY_ID, ROBOT_COUNT, IDENTIFICATION,TYPE)
        VALUES (#{id}, #{name}, #{inspectionId}, #{inspectionName},#{appectanceId}, #{appectance}, #{applicableModel}, #{createTime},
                #{notes}, #{factoryName}, #{factoryId}, #{robotCount}, 1,#{type})
    </insert>

    <update id="edit" parameterType="com.hna.hka.archive.management.assetsSystem.model.ProductionInfo">
        update SYS_ROBOT_PRODUCTION_INFO
        set NAME             = #{name},
            INSPECTION_ID    = #{inspectionId},
            INSPECTION_NAME  = #{inspectionName},
            APPECTANCE_ID    = #{appectanceId},
            APPECTANCE       = #{appectance},
            APPLICABLE_MODEL = #{applicableModel},
            NOTES            = #{notes},
            FACTORY_NAME     = #{factoryName},
            FACTORY_ID       = #{factoryId},
            ROBOT_COUNT      = #{robotCount},
            IDENTIFICATION   = #{identification},
            TYPE            = #{type}
        where ID = #{id}
    </update>

    <delete id="delete">
        delete
        from SYS_ROBOT_PRODUCTION_INFO
        where ID = #{id}
    </delete>

    <select id="getListAll" resultType="com.hna.hka.archive.management.assetsSystem.model.ProductionInfo">
        select *
        from SYS_ROBOT_PRODUCTION_INFO
        where TYPE = 1
    </select>
</mapper>