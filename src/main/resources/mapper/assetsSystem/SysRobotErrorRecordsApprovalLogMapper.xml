<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hna.hka.archive.management.appSystem.dao.SysRobotErrorRecordsApprovalLogMapper">

    <insert id="insertSelective" parameterType="com.hna.hka.archive.management.appSystem.model.SysRobotErrorRecordsApprovalLog">

        insert into SYS_ROBOT_ERROR_RECORDS_APPROVAL_LOG
        <trim prefix="(" suffix=")" suffixOverrides="," >
            <if test="id != null" >
                ID,
            </if>
            <if test="robotErrorRecordsId != null" >
                ROBOT_ERROR_RECORDS_ID,
            </if>
            <if test="approvalResults != null" >
                APPROVAL_RESULTS,
            </if>
            <if test="approvedUser != null" >
                APPROVED_USER,
            </if>
            <if test="reason != null" >
                REASON,
            </if>
            <if test="createTime != null" >
                CREATE_TIME,
            </if>
            <if test="updateTime != null" >
                UPDATE_TIME,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides="," >
            <if test="id != null" >
                #{id,jdbcType=BIGINT},
            </if>
            <if test="robotErrorRecordsId != null" >
                #{robotErrorRecordsId,jdbcType=BIGINT},
            </if>
            <if test="approvalResults != null" >
                #{approvalResults,jdbcType=VARCHAR},
            </if>
            <if test="approvedUser != null" >
                #{approvedUser,jdbcType=BIGINT},
            </if>
            <if test="reason != null" >
                #{reason,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null" >
                #{createTime,jdbcType=VARCHAR},
            </if>
            <if test="updateTime != null" >
                #{updateTime,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>

    <select id="getErrorRecordsIdAndUserIdByOne" resultType="com.hna.hka.archive.management.appSystem.model.SysRobotErrorRecordsApprovalLog">
        select *
        from SYS_ROBOT_ERROR_RECORDS_APPROVAL_LOG
        <where>
            1 = 1
            <if test="sysAppUserId != null and sysAppUserId != ''">
                and APPROVED_USER = #{sysAppUserId}
            </if>
            <if test="errorRecordsId != null and errorRecordsId != ''">
                and ROBOT_ERROR_RECORDS_ID = #{errorRecordsId}
            </if>
        </where>
        order by CREATE_TIME DESC
        limit 0,1
    </select>


</mapper>